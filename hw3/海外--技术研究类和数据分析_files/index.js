define("nowcoder/1.2.1082/javascripts/site/cts/testV2/index",["nc","../../../component/browserUpdate","./manager","cpn","../../../core/siteConfig","./util/util","ncStream","../../../util/util","../../../util/log","./util/ossAli","../../../action/cts","../../../util/ajax","./util/ossTx","./util/example","./util/action","./util/answerCache","./util/chat","../../../component/select","./manager/step","./manager/status","./manager/leave","./manager/phone","./manager/codePlayback","./cpn/name","./cpn/phone","./util/notice"],function(a){function b(){var a=this,b=h("div.nk-container");if(!navigator.cookieEnabled)return p.popupNoCookie();if(k.copy(a,window,["pageInfo"]),i.wechat()||i.mobile()||!a.isSupport())return a.renderNoSupport();a.initNotice(b);var c=window.manager=new o({data:a.pageInfo});c.launch(),a.initShortCut()}function c(a){var b=new q({renderTo:a.find("div.nowcoder-header"),renderBy:"after",parent:a,resize:function(){l.fire(p.MSG_EVENT_NOTICE_SIZE_CHNAGE)}});l.listen(p.MSG_EVENT_NOTICE_SHOW,function(){b.showNotice.apply(b,arguments)}),l.listen(p.MSG_EVENT_NOTICE_HIDE,function(){b.closeNotice.apply(b,arguments)})}function d(){m.add("ctrl + s",function(){})}function e(){var a=h("div.nk-main");new n({renderTo:a,renderBy:"html",needBoxCls:!0,title:"非常抱歉，你正在使用的"+(i.wechat()?"微信内置":"")+"浏览器版本不支持在线笔试",desc:"建议你使用以下浏览器的最新版本打开本页面"})}function f(){var a=p.isSupportCam(),b=window.XMLHttpRequest&&window.Blob&&window.FormData&&window.FileReader,c=i.chrome()||i.firefox();return a&&b&&c}var g=a("nc"),h=g.$,i=g.Browser,j=g.Sys,k=g.Base,l=g.Event,m=g.ShortCut,n=a("../../../component/browserUpdate"),o=a("./manager"),p=a("./util/util"),q=a("./util/notice");j.ready({initialize:b,initNotice:c,initShortCut:d,isSupport:f,renderNoSupport:e})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager",["nc","cpn","../../../core/siteConfig","./util/util","ncStream","../../../util/util","../../../util/log","./util/ossAli","../../../action/cts","../../../util/ajax","./util/ossTx","./util/example","./util/action","./util/answerCache","./util/chat","../../../component/select","./manager/step","./manager/status","./manager/leave","./manager/phone","./manager/codePlayback","./cpn/name","./cpn/phone"],function(a,b,c){function d(a){var b=this;b.cpn={},b.data=a.data||{},b.statusManager=new T({manager:b}),b.stepManager=new S({manager:b}),b.leaveManager=new U({manager:b}),b.phoneManager=new V({manager:b}),b.codePlaybackManager=new W({manager:b});var c=b.statusManager.getPaperSetting();b.dataStatus={allowGotoMenu:!1,allowCamera:!!c.allow_camera,allowMessage:!!c.allow_message,allowCodeCopy:!!c.allowCopy,allowCodeSelfTest:!0,codePlayback:!!c.codePlayback,optionDisorder:!!c.option_disorder,questionDisorder:!!c.question_disorder,antiJumpOut:!!c.antiJumpOut,antiCodingJumpOut:!!c.antiCodingJumpOut,monitorPhone:!!c.monitorPhone,noQueueUp:!!c.noQueueUp,codingScoreRule:c.codingScoreRule,chooseScoreRule:c.chooseScoreRule},b.isSupportCam=N.isSupportCam(),b.headerEl=F("div.nowcoder-header div.header-main"),b.mainEl=F("div.nk-main"),b.questionMap={},b.router=b.initRoute(),b.initEvent()}function e(){var a=this,b=H.Router.extend({routes:{"":"navStep","/":"navStep",":module":"navStep",":module/:param":"navStep","*error":"navError"},navStep:function(b,c){b=F.trim(b),c=c?window.decodeURIComponent(F.trim(c)):"",a.entryStep(b,J.json(c,{}))},navError:function(){a.entryStep()}});return new b}function f(){var a=this,b=a.stepManager;G.listen(N.MSG_EVENT_DID_START_EXAM,function(){J.forEach(b.getPreList(!0),function(a){var c=b.getCacheModule(a);c&&(c.destroy(),b.delCacheModule(a))}),a.countTime()}),G.listen(N.MSG_EVENT_GET_VIDEO_STREAM,function(b){if(b&&a.dataStatus.allowCamera){var c=a.cpn.name;c&&c.showCamera(!0),c&&c.showStream(b)}})}function g(){var a=this;a.dataStatus.allowMessage&&!a.chat&&a.data.userId&&(a.chat=new R({manager:a}))}function h(){var a=this,b=a.data,c=!(!a.dataStatus.allowCamera||!a.isSupportCam),d=a.cpn.name;d&&d.showCamera(c&&b.userId),c&&b.userId&&(N.getVideoStream(),b.tid&&N.uploadCamImage(b.userId,function(a){P.uploadPic(b.userId,b.tid,b.paperId,a)}))}function i(){var a=this,b=a.data,c=F.trim((b.user||{}).name),d=a.cpn.name;c&&!d&&(d=a.cpn.name=new X({renderTo:a.headerEl,allowCamera:a.dataStatus.allowCamera,allowMessage:a.dataStatus.allowMessage})),c&&d&&d.changeName(c)}function j(a){var b=this,c=[N.STEP_MOINT_PHONE,N.STEP_PROTOCOL,N.STEP_MENU,N.STEP_EXAM],d=b.phoneManager,e=b.cpn.phone,f=b.dataStatus.monitorPhone,g=d.needShowInHead||J.contains(c,a);d.needShowInHead=g,!e&&f&&g&&(b.cpn.phone=new Y({renderTo:b.headerEl,manager:b}))}function k(){H.history.start()}function l(a,b,c){var d=this;if(a=J.id(F.trim(a)),a&&d.stepManager.has(a)){var e=d.data.userId;e&&(b=J.extend({uid:e},b)),J.forEach(b,function(a,c){(null===a||void 0===a)&&delete b[c]});var f=b&&J.size(b)>0?window.encodeURIComponent(JSON.stringify(b)):"";f=f?"/"+f:"",d.router.navigate(a+f,J.extend({trigger:!0},c))}}function m(a){var b=this,c=b.data,d=!!b.dataStatus.allowGotoMenu;if(!c.tid)return void b.nav(N.STEP_INFO);var e=b.statusManager.getProgressType();!e||d&&a===N.STEP_EXAM?b.nav(N.STEP_MENU):b.nav(N.STEP_EXAM,{type:e})}function n(a){var b=this;b.nav(N.STEP_EXAM,a)}function o(){var a=this;a.nav(N.STEP_MENU)}function p(a){var b=this,c=J.extend({},b._navParam,a);J.size(c)>0&&(b.nav(b.currentStep,c,{trigger:!1}),b._navParam=c)}function q(a,b){function c(a){m&&d.getData(b.type,a),!m&&a&&a()}b=b||{};var d=this,e=K.getParam("id"),f=b.uid,g=b.type,h=d.stepManager,i=d.statusManager,j=!!d.dataStatus.allowGotoMenu;if(!e&&f&&!d._noFirstStep){var k=K.addParam({id:f});return void(window.location.href=k)}d._noFirstStep=!0;var l=a&&h.has(a);if(l=l&&(d.data.tid?J.contains([N.STEP_MENU,N.STEP_EXAM],a):J.contains(h.getPreList(!0),a)),l=l&&(a===N.STEP_EXAM?!!J.id(g)&&!i.isSubmitType(g):!0),l=l&&(a===N.STEP_MENU?j||!i.getProgressType():!0),!l)return d.navAuto(a);d._navParam=b,d.initName(),d.initPhone(a),d.initChat(),d.initCamera(),d.ping(),d.countStartTime();var m=a===N.STEP_EXAM,n=a===d.currentStep,o=m?N.loadMask("题目加载中..."):null;c(function(c){return m&&!c?(N.closeMask(o),d.nav(N.STEP_MENU)):void h.getClass(a,function(e){N.closeMask(o);var f=h.getCacheModule(d.currentStep);!n&&f&&(f.fire("leaveStep"),f.hide()),d.currentStep=a;var j=h.getCacheModule(a);!f&&!j&&(d.mainEl.get(0).innerHTML=""),j||(j=new e({step:a,manager:d,renderTo:d.mainEl,listeners:{pre:function(){var a=h.getPre(d.currentStep);d.nav(a)},next:function(){var a=h.getNext(d.currentStep);d.nav(a)}}}),h.cacheModule(a,j)),j.show();var k=(((c||{}).questions||[])[0]||{}).type;if(j.fire("entryStep",g,k),N.goTop(),a===N.STEP_MENU){var l=h.getCacheModule(N.STEP_EXAM);l&&l.logTimeDiff(),G.fire(N.MSG_EVENT_DID_START_EXAM)}else if(m){var p=O.getByType(k)||[],q=p.length>0&&!J.id(b.index),r="index"in b?+b.index||0:d.getTypeIndex(c.questions,c.dones);r=r<c.questions.length?r:0;var s=+b.exampleIndex||0;s=q&&s<p.length?s:0,j.loadQuestions({isExample:q,index:r,exampleIndex:s,type:g,questionType:k,items:c.questions,dones:c.dones,examples:p}),G.fire(N.MSG_EVENT_DID_START_EXAM),i.updateByType(g,N.TYPE_STATUS_PROGRESS),d.adjustTime()}d.chat&&d.chat.fixPos()})})}function r(a){var b=this,c=b.stepManager.getCacheModule(N.STEP_EXAM);if(!a)return c;var d=b.currentStep;return d===N.STEP_EXAM?c:void 0}function s(a,b){if(b=b||[],a=a||[],0===b.length)return 0;var c={};J.forEach(b,function(a){var b=J.id(a.qid);b&&(c[b]=!0)});for(var d=0,e=a.length;e>d;d++){var f=a[d],g=J.id(f.qid);if(g&&!c[g])return d}return 0}function t(a,b){var c=this;if(c._dataCache=c._dataCache||{},a=J.id(a),!a||c._dataCache[a])return b&&b(a?c._dataCache[a]:null);var d=c.data,e=d.userId||"",f=N.getSeedFromStr(e);P.getQuestions(e,d.tid,d.paperId,a,function(d){var e=d.data,g=M.questionType,h=e.questions,i=c.dataStatus.questionDisorder&&(a===J.id(g.danxuan)||a===J.id(g.duoxuan)||a===J.id(g.tiankong));h=N.resortQuestions(f,h,i),N.fixQuestionIndex(h),J.forEach(h,function(a){var b=J.id(a.type);(b===J.id(g.danxuan)||b===J.id(g.duoxuan))&&c.dataStatus.optionDisorder&&(a.answers=N.resortItems(f,a.answers))});var j={};J.forEach(e.dones,function(a){var b=J.id(a.qid);a.usercontent=J.json(a.usercontent,{});var c=!0;J.forEach(a.usercontent,function(a){c=c&&!a}),c||(j[b]=a)}),c._dataCache[a]={questions:h,dones:j},b&&b(c._dataCache[a])},function(a){L.alert(a.msg),b&&b()})}function u(){var a=this,b=a.getExamStep(!0);if(b){var c=b.items,d=b.currentIndex;return c[d]}}function v(){var a=this;window.clearTimeout(a._countStartTimer);var b=+a.data.leftBeginSeconds||0;a.data.leftBeginSeconds=Math.max(0,b-1),a.adjustStartTime(),b>0&&(a._countStartTimer=window.setTimeout(J.bind(a.countStartTime,a),1e3))}function w(){var a=this;if(window.clearTimeout(a._countTimer),a.data.leftSeconds<=0)return void a.submitPaper();var b=a.data.leftSeconds--;a.adjustTime(),300>=b&&!a._leftSecondNoticed&&(a._leftSecondNoticed=!0,N.showNotice("考试时间还剩5分钟，请抓紧答题并保存")),a._countTimer=window.setTimeout(J.bind(a.countTime,a),1e3)}function x(){function a(){var e=b.data;P.ping(e.userId,e.tid,e.paperId,b.timeDiff,function(d){var f=d.data;c=0,b.timeDiff={},"leftBeginSeconds"in f&&(e.leftBeginSeconds=+f.leftBeginSeconds||0),"leftSeconds"in f&&(e.leftSeconds=+f.leftSeconds||0),window.setTimeout(a,N.PING_DURATION),(+f.newMsgCount||0)>0&&b.chat&&b.chat.checkMsg(),b.phoneManager.update(f)},function(b){return window.setTimeout(a,N.PING_DURATION),"2"===J.id(b.code)?void(window.location.href=K.addParam({callBack:K.addParam({id:e.userId},window.location.href.split("#")[0]),ip:b.msg},"/cts/kickout")):(c++,void(c>=d&&(N.showNotice({content:"你的网络可能存在连接异常，请检查是否断网并重新连接。",type:"9",duration:N.PING_DURATION}),c=0)))})}var b=this,c=0,d=5;!b._ping&&b.data.userId&&(b._ping=!0,a())}function y(a,b){var c=this;if(a=F.trim(a),b=+b||0,a&&0!==b){var d=c.timeDiff||{};d[a]=(d[a]||0)+b,c.timeDiff=d}}function z(a){var b=this,c=N.loadMask('正在提交本题型...<div style="font-size:12px;">如果等待时间过长，请刷新页面重试，答案均已保存到服务器</div>'),d=b.data;b.codePlaybackManager.submit(),P.submitType(d.tid,d.paperId,a,function(){N.closeMask(c),b.statusManager.updateByType(a,N.TYPE_STATUS_SUBMIT),b.nav(N.STEP_MENU),L.tips("提交成功")},function(){N.closeMask(c),L.alert("提交失败，请重试")})}function A(a){function b(){e._submitTimer=window.setTimeout(function(){return h--,0>=h?(j.html("正在交卷，请等待..."),c()):(j.html("考试时间结束，正在排队交卷中，请耐心等待"+h+'秒...<div style="font-size:12px;">你的所有已作答内容将自动保存(含最后一题)，如果本次提交失败，系统将自动补交，直至交卷成功。</div>'),void b())},1e3)}function c(){var a=J.id((f||{}).type);P.submitPaper(g.tid,g.paperId,a,d,d)}function d(){N.closeMask(i),L.tips("交卷成功",2e3),Q.destroy(e.data.tid),window.setTimeout(function(){N.gotoFinish(g.paperId)},1e3)}var e=this,f=e.getExamStep(!0),g=e.data;f&&f.submitAnswer(f.currentIndex),e.leaveManager.stop(),e.phoneManager.stop(),window.clearTimeout(e._submitTimer);var h=N.randomSecond(30),i=N.loadMask(a?"正在交卷，请等待...":"考试时间结束，正在排队交卷中，请耐心等待"+h+'秒...<div style="font-size:12px;">如果本次提交失败，系统将自动补交，直至交卷成功。</div>'),j=i.getEl().find("span.warning-word");a?window.setTimeout(c,2e3):b()}function B(){var a=this;G.fire(N.MSG_EVENT_START_TIME_CHANGE,a.data.leftBeginSeconds)}function C(){var a=this;G.fire(N.MSG_EVENT_TIME_CHANGE,a.data.leftSeconds)}var D=a("nc"),E=a("cpn"),F=D.$,G=D.Event,H=D.Nav,I=D.Clazz,J=(D.Str,D.Base),K=D.Uri,L=E.Popup,M=a("../../../core/siteConfig"),N=a("./util/util"),O=a("./util/example"),P=a("./util/action"),Q=a("./util/answerCache"),R=a("./util/chat"),S=a("./manager/step"),T=a("./manager/status"),U=a("./manager/leave"),V=a("./manager/phone"),W=a("./manager/codePlayback"),X=a("./cpn/name"),Y=a("./cpn/phone"),Z=c.exports=I.create();J.extend(Z.prototype,G,{initialize:d,initRoute:e,initEvent:f,initChat:g,initCamera:h,initName:i,initPhone:j,launch:k,nav:l,navAuto:m,navExam:n,navMenu:o,addNavParam:p,entryStep:q,getExamStep:r,getTypeIndex:s,getData:t,getCurrentQuestion:u,countStartTime:v,countTime:w,ping:x,addTimeDiff:y,submitType:z,submitPaper:A,adjustStartTime:B,adjustTime:C})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/action",["nc","../../../../action/cts","../../../../util/ajax","cpn","../../../../core/siteConfig"],function(a,b,c){function d(a,b,c,d){o.addLeave({body:{uid:a,tid:b,qid:c},call:function(a){var b=n.id((a.data||{}).leaveCount);b&&d&&d(+b||0)}})}function e(a,b,c,d,e,f){o.pingTest({body:{tid:b,pid:c,uid:a,timeDiff:JSON.stringify(d||{})},call:e,error:f})}function f(a,b,c,d){d=m.trim(d),d&&o.uploadPic({body:{tid:b,pid:c,uid:a,url:d}})}function g(a,b,c,d,e,f){o.getQuestions({query:{category:d,tid:b,uid:a},params:{paperId:c},call:e,error:f})}function h(a,b,c,d){o.beginTest({body:a,call:b,error:c,always:d})}function i(a,b,c,d,e){c=n.extend({tid:a,qid:b},c),o.submitQuestion({body:c,call:d,error:e})}function j(a,b,c,d,e){o.finishTest({body:{tid:a,pid:b,category:c,isAll:!1},call:d,error:e})}function k(a,b,c,d,e){o.finishTest({body:{tid:a,pid:b,category:c||void 0,isAll:!0},call:d,error:e})}var l=a("nc"),m=l.$,n=l.Base,o=a("../../../../action/cts");c.exports={leave:d,ping:e,uploadPic:f,getQuestions:g,beginPaper:h,submitQuestion:i,submitType:j,submitPaper:k}});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/answer",["nc","../../../../action/cts","../../../../util/ajax","cpn","../../../../core/siteConfig","./answerCache"],function(a,b,c){function d(){var a=this;a.list.length=0,a.list.cbList=0,a.unlisten(t)}function e(a){var b=this,c=b.list,d=b.cbList;return 0===c.length?a&&a():(d.push(a),void(d.length>1||b.listen(t,function(){0===c.length&&(o.forEach(d,function(a){try{a&&a()}catch(b){}}),d.length=0)})))}function f(a){var b=this,c=b.list,d=b.getQid(a);a&&d&&(a=o.extend({},a),b.removeByQid(d),c.push(a),window.setTimeout(function(){b.exist(a)&&b.send(a,function(){b.updateDb(a),b.exist(a)&&(b.remove(a),b.fire(t))},function(){b.exist(a)&&window.setTimeout(function(){b.exist(a)&&(b.remove(a),b.add(a))},1e3)})},1e3))}function g(a){var b=this,c=b.list;if(a)for(var d=c.length-1;d>=0;d--)c[d]===a&&c.splice(d,1)}function h(a){var b=this,c=b.list;if(a=o.id(a))for(var d=c.length-1;d>=0;d--){var e=c[d];b.getQid(e)===a&&c.splice(d,1)}}function i(a){var b=this,c=b.list;if(!a)return!1;for(var d=0,e=c.length;e>d;d++)if(c[d]===a)return!0;return!1}function j(a){return o.id((a||{}).qid)}function k(a,b,c){var d=this;return d.getQid(a)?void q.submitQuestion({body:a,call:b,error:c}):b&&b()}function l(a){var b=this,c=b.getQid(a),d=o.id((a||{}).tid);r.markSend(d,c)}var m=a("nc"),n=(m.$,m.Clazz),o=m.Base,p=m.Event,q=a("../../../../action/cts"),r=a("./answerCache"),s=c.exports=n.create(),t="EVENT_ANSWER_SENDED";o.extend(s,p,{list:[],cbList:[],clear:d,waitComplete:e,add:f,remove:g,removeByQid:h,exist:i,getQid:j,send:k,updateDb:l})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/answerCache",["nc"],function(a,b,c){function d(a,b,c){var d=this,e=d.check(a,b);e&&e.set(b,{content:c,createdAt:(new Date).getTime()})}function e(a,b){var c=this,d=c.check(a,b);if(d){var e=d.get(b);return(e||{}).content}}function f(a,b){var c=this,d=c.check(a,b);if(d){var e=d.get(b);e&&(e.sendedAt=(new Date).getTime(),d.set(b,e))}}function g(a,b){var c=this,d=c.check(a,b);if(d){var e=d.get(b);if(e){var f=+e.sendedAt||0,g=+e.createdAt||0;return f&&f>=g}}return!1}function h(a){if(a=m.id(a)){var b=k.create("cts"+a);b.remove()}}function i(a,b){return a=m.id(a),b=m.id(b),a&&b?k.create("cts"+a):null}var j=a("nc"),k=j.Db,l=j.Clazz,m=j.Base,n=c.exports=l.create();m.extend(n,{set:d,get:e,markSend:f,isSend:g,destroy:h,check:i})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/chat",["nc","../../../../component/select","../../../../action/cts","../../../../util/ajax","cpn","../../../../core/siteConfig","./util","ncStream","../../../../util/util","../../../../util/log","./ossAli","./ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager,b.msgMap={},a.renderTo=v(a.renderTo||document.body)}function e(){var a=this,b=a.rawConfig,c=v('<div class="code-question-pannel" style="z-index:1000;"><i class="ico-q-msg"></i><span>考试问题咨询</span><a class="icon-angle-up"></a></div>');b.renderTo.append(c),a.holderEl=c,c.on("click",function(b){b.preventDefault(),b.stopPropagation(),a.open()})}function f(){var a=this,b=a.getEl();a.typeSelect=new C({renderTo:b.find("#jsType"),renderBy:"replaceWith",cls:"btn-group-xs",options:[{text:"题目问题",value:"1",checked:!0},{text:"系统问题",value:"2"},{text:"考试结果/后期面试",value:"3"},{text:"其他",value:"4"}],render:function(){this.getEl().width(150)}})}function g(){var a=this,b=(a.rawConfig,a.getEl());b.find("textarea.pannel-chat-txt").on("keydown",function(b){if(13===b.keyCode){b.preventDefault();var c=v(b.currentTarget);a.sendMsg(c.val()),c.val("")}}),v(document).on("click",function(c){var d=c.target;a.isOpen()&&d!==b.get(0)&&!v.contains(b.get(0),d)&&a.open(!1)})}function h(){function a(){if(i&&window.clearTimeout(i),b._stopFixBottom)return void(j=0);if(0===j)i=window.setTimeout(function(){f=e.height(),h=g.position().top;var a=e.scrollTop(),i=a+f-d;j=i>h?i-h:0,c.css("bottom",j),b.holderEl.css("bottom",j)},15);else{f=e.height(),h=g.position().top;var a=e.scrollTop(),k=a+f-d;j=k>h?k-h:0,c.css("bottom",j),b.holderEl.css("bottom",j)}}var b=this;if(!b._fixBottom){b._fixBottom=!0;var c=b.getEl(),d=0,e=v(window),f=e.height(),g=v("div.nk-container div.ft-wrap"),h=g.position().top,i=(g.height(),null),j=0;a(),b.open(!1),e.on("scroll",a),e.on("resize",function(){f=e.height(),a()}),b.listen("fixSize",function(){a()})}}function i(){var a=this;a.fire("fixSize")}function j(a,b,c){var d=this,e=d.listEl,f=b?"客服":"我";if(a=v.trim(a)){var g=b?['<div class="pcl-item clearfix">','<div class="pcl-head">','<a class="list-head" href="javascript:void(0);"><img alt="头像" src="//uploadfiles.nowcoder.com/images/20160711/56_1468219359225_DFC72C14F1C7419B93207CC1C1A560C9"></a>','<span class="pcl-name">#{name}</span>',"</div>",'<div class="tooltip fade right in">','<div class="tooltip-arrow" style="top:18px;"></div>','<div class="tooltip-inner letter-chat clearfix">#{msg}</div>',"</div>","</div>"].join(""):['<div class="pcl-item ask-item clearfix">','<div class="pcl-head">','<a class="list-head" href="javascript:void(0);"><img alt="头像" src="//uploadfiles.nowcoder.com/images/20160712/58_1468318308479_449C3253CA2BBED9314D39977A486D0E"></a>','<span class="pcl-name">#{name}</span>',"</div>",'<div class="tooltip fade right in">','<div class="tooltip-arrow" style="top:18px"></div>','<div class="tooltip-inner letter-chat clearfix">#{msg}</div>',"</div>","</div>"].join(""),h=z.execTpl(g,{name:f,msg:a},!!c||!b);e.append(h),d.bottomMsg()}}function k(a){var b=this;if(a=a||"",/^\d+$/.test(a)&&b._autoMsg){var c=+a-1;if(!(0>c||c>=b._autoMsg.length)){var d=b._autoMsg[c];return b.showMsg(d.answer||"",!0),!0}}}function l(a){var b=this,c=b.getEl(),d="考试问题咨询"+(a?"(您有未读信息)":"");b.titleEl.html(d),c[a?"addClass":"removeClass"]("has-new-msg"),b.holderEl[a?"addClass":"removeClass"]("new-msg-notice")}function m(){var a=this,b=a.listEl;A.scrollToElBottom(b.parent())}function n(a){var b=this,c=b.getEl();a===!1?c.hide(50,function(){c.removeClass("open"),b.holderEl.show(100)}):(b.holderEl.hide(50,function(){c.addClass("open").show(100,function(){}),b.txtIpt.focus(),b.bottomMsg()}),b.showTitle(!1)),b._isNoFirstOpen||(b._isNoFirstOpen=!0,b.showTips())}function o(){var a=this,b=a.getEl();return b.hasClass("open")}function p(a){var b=this,c=b.manager,d=c.getCurrentQuestion(),a=v.trim(a);a&&D.newMessage({body:{uid:c.data.userId,pid:c.data.paperId,qid:(d||{}).qid,content:a,type:b.typeSelect.val()},call:function(c){var d=c.data+"";b.msgMap[d]={content:a,id:c.data,isSelf:!0},b.showMsg(a)},error:function(){b.showMsg("消息“ "+a+" ”发送失败",!0,!0)}})}function q(a){var b=this,c=b.manager;b._requesting||(b._requesting=!0,a=+a||1,D.listmessage({query:{uid:c.data.userId,page:+a||1},call:function(c){var d=c.data,e=+d.totalPage||1,f=d.messages||[];B.forEach(f,function(a){var c=a.id+"",d=v.trim(a.content);!b.msgMap[c]&&d&&(b.msgMap[c]=a,b.showMsg(d,!0),"3"===B.id(a.type)&&E.showNotice(d))}),f.length>0&&!b.isOpen()&&b.showTitle(!0),b._requesting=!1,e>a&&b.checkMsg(a+1)},error:function(){b._requesting=!1}}))}function r(a){var b=this;b._stopFixBottom=a!==!1}function s(){function a(){var a=["欢迎参加在线考试。如果你遇到以下问题，可以直接点击查看哦！"];B.forEach(b._autoMsg,function(b,c){a.push(z.execTpl('<a class="js-auto-msg link-green" href="javascript:void(0);" data-index="#{order}">#{order}:#{content}</a>',{order:c+1,content:b.question},!0))}),a.push("如以上问题未能解决你的困难，请选择你遇到的问题类别并进行详细描述，我将尽快为你解答。"),a=B.map(a,function(a){return"<p>"+a+"</p>"});var c='<div class="pcl-item">'+a.join("")+"</div>";b.showMsg(c,!0)}var b=this,c=b.manager;b._autoMsg?a():b._isGetAutoMsg||(b._isGetAutoMsg=!0,D.listFaq({query:{pid:c.data.paperId},call:function(c){b._autoMsg=c.data,a()},always:function(){b._isGetAutoMsg=!1}}))}function t(a){return{open:a.open?"open":""}}var u=a("nc"),v=u.$,w=u.Clazz,x=u.Limit,y=u.Component,z=u.Str,A=u.Dom,B=u.Base,C=a("../../../../component/select"),D=a("../../../../action/cts"),E=a("./util"),F=c.exports=w.create();w.mix(F,y,{xtype:"chat",_template:['<div class="subject-oprt-wrap pannel-chat #{open}" style="display:none;">','<div class="oprt-hd">','<div class="s-pannel-oprt"><a class="icon-angle-up"></a></div>','<span class="s-pannel-title">考试问题咨询</span>',"</div>",'<div class="oprt-bd">','<div class="pannel-chat-list"><div id="jsList"></div></div>','<div class="pannel-chat-type clearfix">','<div role="group" class="btn-group btn-group-xs" id="jsType"></div>','<a href="javascript:void(0);" class="js-show-auto-msg link-green" style="display:inline-block;float:right;font-size:12px;">常见问题</a>',"</div>",'<textarea class="pannel-chat-txt" id="jsTxtIpt"></textarea>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){{var a=this,b=a.getEl();a.rawConfig}a.initHolderEl(),a.initComponent(),a.initEvent(),a.titleEl=b.find("div.oprt-hd span.s-pannel-title"),a.listEl=b.find("#jsList"),a.txtIpt=b.find("#jsTxtIpt"),a.fixBottom(),b.on("click",function(){a.showTitle(!1)})}},{name:"click div.oprt-hd",handler:function(){var a=this;a.open(!a.isOpen())}},{name:"click #jsList a.js-auto-msg",handler:function(a){var b=this,c=v(a.currentTarget),d=c.attr("data-index");return b.showAutoReply(d)}},{name:"click a.js-show-auto-msg",handler:function(a){var b=this,c=v(a.currentTarget);x.mark(c)||(b.showTips(),window.setTimeout(function(){x.clear(c)},2500))}}]},{initialize:d,initHolderEl:e,initComponent:f,initEvent:g,fixBottom:h,fixPos:i,showMsg:j,showAutoReply:k,showTitle:l,bottomMsg:m,showTips:s,open:n,isOpen:o,sendMsg:p,checkMsg:q,stopFixBottom:r,_getData:t})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/example",["nc"],function(a,b,c){function d(a){return a=f.id(a),a?i[a]||[]:[]}var e=a("nc"),f=(e.$,e.Base),g=" 本题为考试单行多行输入输出规范示例，无需提交，不计分。\n",h=" 本题为考试多行输入输出规范示例，无需提交，不计分。\n",i={4:[{qid:"example4_0",score:0,type:4,title:"考试单行输入输出规范示例",content:"求a+b的和",ext:{codingProblemId:12445,codingType:"0",cTemplate:"//"+g+'#include <stdio.h>\nint main() {\n    int a, b;\n    while(scanf("%d %d", &a, &b) != EOF)//注意while处理多个case\n        printf("%d\\n", a+b);\n    return 0;\n}',cppTemplate:"//"+g+"#include <iostream>\nusing namespace std;\nint main() {\n    int a,b;\n    while(cin >> a >> b)//注意while处理多个case\n        cout << a+b << endl;\n}",cpp14Template:"//"+g+"#include <iostream>\nusing namespace std;\nint main() {\n    int a,b;\n    while(cin >> a >> b)//注意while处理多个case\n        cout << a+b << endl;\n}",csharpTemplate:"//"+g+"public class Program {\n  public static void Main() {\n    string line;\n    while ((line = System.Console.ReadLine ()) != null) {//注意while处理多个case\n      string[] tokens = line.Split();\n      System.Console.WriteLine(int.Parse(tokens[0]) + int.Parse(tokens[1]));\n    }\n  }\n}",javaTemplate:"//"+g+"import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        while (in.hasNextInt()) {//注意while处理多个case\n            int a = in.nextInt();\n            int b = in.nextInt();\n            System.out.println(a + b);\n        }\n    }\n}",jsTemplate:"//"+g+"process.stdin.resume();\nprocess.stdin.setEncoding('ascii');\n\nvar input = \"\";\nvar input_array = \"\";\n\nprocess.stdin.on('data', function (data) {\n    input += data;\n});\n\nprocess.stdin.on('end', function () {\n    input_array = input.split(\"\\n\");\n    var nLine = 0;\n\n    while(nLine < input_array.length){\n        var line = input_array[nLine++].trim();\n        if(line === ''){\n            continue;\n        }\n        var input_arrays = line.split(' ');\n        var a = +input_arrays[0];\n        var b = +input_arrays[1];\n        console.log(a+b);\n    }\n});",pythonTemplate:"#coding=utf-8\n#"+g+"import sys \nfor line in sys.stdin:\n    a = line.split()\n    print int(a[0]) + int(a[1])",python3Template:"#coding=utf-8\n#"+g+"import sys \nfor line in sys.stdin:\n    a = line.split()\n    print(int(a[0]) + int(a[1]))",phpTemplate:"<?php\n//"+g+'\nwhile (fscanf(STDIN, "%d%d", $a, $b) == 2) {  \n    printf("%d\\n",$a+$b);\n}',jsV8Template:"//"+g+'while(line=readline()){\n    var lines = line.split(" ");\n    var a = parseInt(lines[0]);\n    var b = parseInt(lines[1]);\n    print(a+b);\n}',rTemplate:"#"+g+'lines=readLines("stdin")\nfor(l in lines){\n    if(l == ""){\n        break;\n    }\n    ll = strsplit(l, " ")[[1]]\n    a=ll[1];\n    b=ll[2];\n    cat(as.numeric(a)+as.numeric(b));\n    cat("\\n");\n}',goTemplate:"//"+g+'package main\n\nimport (\n    "fmt"\n)\nfunc main() {\n    a:=0\n    b:=0\n    for {\n        n, _ := fmt.Scan(&a,&b)\n        if n == 0 {\n            break\n        } else {\n            fmt.Printf("%d\\n",a+b)\n        }\n    }\n}',rubyTemplate:"#"+g+'a, b = gets.split(" ").map {|x| x.to_i}\nputs (a + b)',swiftTemplate:"//"+g+'import Foundation\nwhile let line = readLine() {\n    let parts = line.split(separator: " ")\n    print(Int(parts[0])! + Int(parts[1])!)\n}',objCTemplate:"//"+g+'#import <Foundation/Foundation.h>\nint main(int argc,char * argv[])\n{\n    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];\n    int a,b;\n    while(scanf("%d %d",&a, &b) != EOF)\n        printf("%d",a+b);\n    [pool drain];\n    return 0;\n}',pascalTemplate:"//"+g+"var i, j : integer;\nbegin\n   while not eof do\n   begin\n      readln(i, j);\n      writeln(i + j);\n   end;\nend.",matlabTemplate:"%"+g+"line = input('', 's');\nlines = strsplit(line);\nprintf(\"%d\\n\", str2num(lines{1}) + str2num(lines{2}));",hint:"",inputDesc:"多组读入，每一行有两个数A， B。0 &lt; A, B &lt; 1000000",samples:[{input:"1 1",output:"2"}],inputSample:"",memoryLimit:32768,outputDesc:"每行输出一个结果",outputSample:"",supportLang:"java,cpp",timeLimit:1}},{qid:"example4_1",score:0,type:4,title:"考试多行输入输出规范示例",content:"给出n阶方阵里所有数,求方阵里所有数的和",ext:{codingProblemId:12832,codingType:"0",cTemplate:"//"+h+'#include <stdio.h>\n\nint main(){\n    int n, ans = 0;\n    scanf("%d", &n);\n    for(int i = 0; i < n; i++){\n        for(int j = 0; j < n; j++){\n            int x; \n            scanf("%d", &x);\n            ans += x;\n        }\n    }\n    printf("%d\\n", ans);\n    return 0;\n}',cppTemplate:"//"+h+'#include <iostream>\n#include <cstdio>\n\nusing namespace std;\n\nint main(){\n    //freopen("1.in","r",stdin);\n    int n,ans = 0;\n    cin >> n;\n    for(int i = 0; i < n; i++){\n        for(int j = 0; j < n; j++){\n            int x; scanf("%d",&x);\n            ans += x;\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}',cpp14Template:"//"+h+'#include <iostream>\n#include <cstdio>\n\nusing namespace std;\n\nint main(){\n    //freopen("1.in","r",stdin);\n    int n,ans = 0;\n    cin >> n;\n    for(int i = 0; i < n; i++){\n        for(int j = 0; j < n; j++){\n            int x; scanf("%d",&x);\n            ans += x;\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}',csharpTemplate:"//"+h+"using System;\npublic class Program {\n    public static void Main() {\n        int n = int.Parse(Console.ReadLine().Trim());\n        int ans = 0;\n        for(int i = 0; i < n; i++){\n            string[] inputs = Console.ReadLine().Trim().Split(' ');\n            for(int j = 0; j < n; j++){\n                ans += int.Parse(inputs[j]);\n            }\n        }\n        Console.WriteLine(ans);\n    }\n}",javaTemplate:"//"+h+"import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int ans = 0, x;\n        for(int i = 0; i < n; i++){\n            for(int j = 0; j < n; j++){\n                x = sc.nextInt();\n                ans += x;\n            }\n        } \n        System.out.println(ans);\n    }\n}",jsTemplate:"//"+h+"var readline = require('readline');\nconst rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n    terminal:false\n});\n\nvar n = -1;// 初始状态为负数，表示还没开始读取\nvar ans = 0;\nvar cur_line = 0;\nrl.on('line', function(line){ // javascript每行数据的回调接口\n   if (n < 0) { // 测试用例第一行读取n\n       n = parseInt(line.trim())\n   } else {\n       // 矩阵数据读取\n          var tokens = line.split(' ');\n       for (var i = 0; i < tokens.length; ++i) {\n           // 题目逻辑求和，边读取边计算\n           ans += parseInt(tokens[i]);\n       }\n       // 记录当前读取的行数\n       cur_line += 1;\n   }\n    \n   // 读取行数结束，如果确定只有一行额外的数据输入，也可以通过cur_line === 1来判断\n   if (n === cur_line) {\n       // 输出结果\n       console.log(ans);\n       // 重新初始化相关变量\n       n = -1;\n       ans = 0;\n       cur_line = 0;\n   }\n});",pythonTemplate:"#coding=utf-8\n#"+h+'import sys\n\nif __name__ == "__main__":\n    # 读取第一行的n\n    n = int(sys.stdin.readline().strip())\n    ans = 0\n    for i in range(n):\n        # 读取每一行\n        line = sys.stdin.readline().strip()\n        # 把每一行的数字分隔后转化成int列表\n        values = map(int, line.split())\n        for v in values:\n            ans += v\n    print ans',python3Template:"#coding=utf-8\n#"+h+'import sys\nif __name__ == "__main__":\n    # 读取第一行的n\n    n = int(sys.stdin.readline().strip())\n    ans = 0\n    for i in range(n):\n        # 读取每一行\n        line = sys.stdin.readline().strip()\n        # 把每一行的数字分隔后转化成int列表\n        values = list(map(int, line.split()))\n        for v in values:\n            ans += v\n    print(ans)',phpTemplate:"<?php\n//"+h+'\nwhile(fscanf(STDIN, "%d", $n) == 1)  {\n    $ans=0;\n    for($i=0;$i<$n;$i++){\n        //read whole line\n        fscanf(STDIN, "%[^\\n]s", $line);\n        //split line to array\n        $numbers = explode(" ", trim($line));\n        foreach ($numbers as $number){\n            $ans = $ans + intval($number);\n        }\n    }\n    printf("%d\\n", $ans);\n}',jsV8Template:"//"+h+'var n = parseInt(readline());\nvar ans = 0;\nfor(var i = 0;i < n; i++){\n    lines = readline().split(" ")\n    for(var j = 0;j < lines.length; j++){\n        ans += parseInt(lines[j]);\n    }\n}\nprint(ans);',rTemplate:"#"+h+'lines=readLines("stdin")\nsum=0\nline_count=0\nline_index=1\nfor(l in lines){\n    if(l == ""){\n        break;\n    }\n    if(line_count == 0){\n        line_count = as.numeric(l);\n        next\n    }\n\n    if(line_index > line_count){\n        break\n    }\n    line_index = line_index + 1\n\n    ll = strsplit(l, " ")[[1]]\n    for(num in ll){\n        sum = sum + as.numeric(num);\n    }\n}\ncat(sum);\ncat("\\n");',goTemplate:"//"+h+'package main\n\nimport (\n    "fmt"\n)\nfunc main() {\n    n:=0\n    ans:=0\n\n    fmt.Scan(&n)\n    for i := 0; i < n; i++ {\n        for j := 0; j < n; j++ {\n            x:=0\n            fmt.Scan(&x)\n            ans = ans + x\n        }\n    }\n    fmt.Printf("%d\\n",ans)\n}',rubyTemplate:"#"+h+"num = gets.to_i\ni = 0\nsum = 0\nwhile i < num  do\n    line = gets\n    line.split().each do |token|\n      sum += token.to_i\n    end\n    i +=1\nend\nputs(sum)",swiftTemplate:"//"+h+'import Foundation\nlet n = Int(readLine()!)!\nvar ans = 0;\nfor _ in 0 ..< n {\n    if let line = readLine() {\n        let parts = line.split(separator: " ")\n        for part in parts {\n            ans += Int(part)!\n        }\n    }\n}\nprint(ans)',objCTemplate:"//"+h+'#import <Foundation/Foundation.h>\nint main(int argc,char * argv[])\n{\n    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];\n    int n, i , j, ans = 0;\n    scanf("%d", &n);\n    for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n            int x;\n            scanf("%d", &x);\n            ans += x;\n        }\n    }\n    printf("%d", ans);\n    [pool drain];\n    return 0;\n}',pascalTemplate:"//"+h+"var\n    n,ans,x,i,j:longint;\nbegin\n    while not eof do\n    begin\n        ans := 0;\n        readln(n);\n        for i:=1 to n do\n        begin\n            for j:=1 to n do\n            begin\n                read(x);\n                ans:=ans+x;\n            end;\n            readln();\n        end;\n         writeln(ans);\n     end;\nend.",matlabTemplate:"%"+h+"num = input('');\nsum = 0;\nfor i=0:1:num-1\n    line = input('', 's');\n    lines = strsplit(line);\n    for j=1:1:num\n        sum = sum + str2num(lines{j});\n    end\nend\nprintf(\"%d\\n\", sum);",hint:"",inputDesc:"输入有多个测试用例，每个测试用例第一行为一个整数n(n &le; 1000)，表示方阵阶数为n。接下来是n行的数字,每行n个数用空格隔开。",samples:[{input:"3\n1 2 3\n2 1 3\n3 2 1",output:"18"}],inputSample:"3\n1 2 3\n2 1 3\n3 2 1",memoryLimit:32768,outputDesc:"输出一个整数，表示n阶方阵的和",outputSample:"18",supportLang:"java,cpp",timeLimit:1}}]};c.exports={getByType:d}});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/notice",["nc"],function(a,b,c){function d(a){var b=this;b.parent=o(a.parent),b.list=[],b.currentItem=null,b.showing=!1,b.hiding=!1}function e(a){var b=this,c=b.list;if(q.isString(a)&&(a={content:a,type:v}),q.isObject(a)&&o.trim(a.content)){var d=+(q.id(a.duration)||u),e=o.trim(a.type);a.type=e,a.duration=d,b.removeType(e),0===d&&b.removeFixed();var f=e&&b.currentItem&&b.currentItem.type===e;f?(c.unshift(a),b.startNotice(!0)):(c.push(a),b.startNotice())}}function f(a){var b=this,c=(b.rawConfig,b.getEl()),d=b.list;if(0===d.length)return void b.hideNotice();if((!b.currentItem||a)&&!b.hiding){b.showing||(b.parent.addClass("with-notice"),b.resize(),c.hide().show(t)),window.clearTimeout(b._noticeTimer);var e=b.currentItem=d.shift();b.showContent(e.content),b.showing=!0,b._noticeTimer=window.setTimeout(function(){0===e.duration&&!b.existFixed()&&d.push(e),b.currentItem=null,b.startNotice()},e.duration||u)}}function g(){var a=this,b=a.getEl();a.hiding||(a.hiding=!0,window.clearTimeout(a._noticeTimer),a.list.length=0,b.hide(t,function(){a.currentItem=null,a.showing=!1,a.hiding=!1,a.showContent(""),a.parent.removeClass("with-notice"),a.resize(),a.list.length>0&&a.startNotice()}))}function h(a){var b=this;a=a||{};var c=a.type,d=!!a.all;return d?void b.hideNotice():(c=o.trim(c),c&&b.removeType(c),void((!c||b.currentItem&&b.currentItem.type===c)&&b.startNotice(!0)))}function i(a){var b=this,c=b.list;if(a=o.trim(a))for(var d=c.length-1;d>=0;d--)c[d].type===a&&c.splice(d,1)}function j(){for(var a=this,b=a.list,c=b.length-1;c>=0;c--)0===b[c].duration&&b.splice(c,1)}function k(){for(var a=this,b=a.list,c=0,d=b.length;d>c;c++)if(0===b[c].duration)return!0;return!1}function l(a){var b=this;a=o.trim(a),a&&b.contentEl.html(a)}function m(){var a=this,b=a.rawConfig;b&&b.resize&&b.resize()}var n=a("nc"),o=n.$,p=n.Clazz,q=n.Base,r=n.Component,s=c.exports=p.create(),t=750,u=6e4,v="TYPE_NORMAL_STRING_MSG";p.mix(s,r,{xtype:"INotice",_template:['<div class="notice-tip-bar">','<div class="notice-tip-content">','<i class="icon-volume-down"></i><span class="js-part-notice"></span><a href="javascript:void(0);" class="icon-remove"></a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this,b=a.getEl();a.contentEl=b.find("span.js-part-notice")}},{name:"click a.icon-remove",handler:function(){var a=this;a.closeNotice()}}]},{initialize:d,showNotice:e,startNotice:f,hideNotice:g,closeNotice:h,removeType:i,removeFixed:j,existFixed:k,showContent:l,resize:m})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/ossAli",["nc","../../../../action/cts","../../../../util/ajax","cpn","../../../../core/siteConfig"],function(a,b,c){function d(a){var b=this;b.rawConfig=a,b.tokenCb=[]}function e(a){var b=this;b.getToken(function(b){var c=b.endpoints,d=/^https:/.test(window.location.href),c=(c||"").replace(/^https:/,"").replace(/^http:/,"");c=(d?"https:":"http:")+c;var e=new window.OSS.Wrapper({accessKeyId:b.accessKeyId,accessKeySecret:b.accessKeySecret,stsToken:b.securityToken,endpoint:c,cname:!0});e.useBucket("nowcoder"),a&&a(e,b)})}function f(a,b){var c=this,d=c.rawConfig,e=c.cacheToken;if(e){var f=(new Date).getTime(),g=e.createdAt;if(f+6e5<=g+e.expiration)return a&&a(e)}c.tokenCb.push(a),c.tokenCb.length>1&&!b||l.getOssCredential({query:{uid:d.uid},call:function(a,b){var d=(new Date).getTime(),e=b&&b.getResponseHeader?b.getResponseHeader("Date"):null;n=e?new Date(e).getTime():null,o=d;var f=a.data;f.createdAt=d,c.cacheToken=f,k.forEach(c.tokenCb,function(a){a&&a(f)}),c.tokenCb.length=0},error:function(){c.cacheToken?a&&a(c.cacheToken):window.setTimeout(function(){c.getToken(null,!0)},1e4)}})}function g(a,b,c){var d=this;d.getOss(function(b,e){try{var f=d.getRandomName(),g=e.path+"/"+(new Date).getTime()+"_"+f;b.multipartUpload(g,new window.File([a],f,{type:a.type}),{}).then(function(){c&&c("http://uploadfiles.nowcoder.com/"+g)}).catch(function(){c&&c("")})}catch(h){c&&c()}})}function h(a){a=a||32;for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",d=c.length,e=0;e++<a;)b+=c.charAt(Math.floor(Math.random()*d));return b}var i=a("nc"),j=(i.$,i.Clazz),k=i.Base,l=a("../../../../action/cts"),m=c.exports=j.create(),n=null,o=null;window.aliyunNCFixDate=function(){return k.id(n)?new Date(+n+((new Date).getTime()-(+o||0))):new Date},k.extend(m.prototype,{initialize:d,getOss:e,getToken:f,uploadBlob:g,getRandomName:h})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/ossTx",["nc","../../../../action/cts","../../../../util/ajax","cpn","../../../../core/siteConfig"],function(a,b,c){function d(a){var b=this;b.rawConfig=a,b.tokenCb=[]}function e(a){var b=this,c=window.COS;b.getToken(function(b){var d=new c({getSTS:function(a,c){c&&c({SecretId:b.accessKeyId,SecretKey:b.accessKeySecret,XCosSecurityToken:b.securityToken})}});a&&a(d,b)})}function f(a,b){var c=this,d=c.rawConfig,e=c.cacheToken;if(e){var f=(new Date).getTime(),g=e.createdAt;if(f+6e5<=g+e.expiration)return a&&a(e)}c.tokenCb.push(a),c.tokenCb.length>1&&!b||l.getQQOssCredential({query:{uid:d.uid,method:"PUT"},call:function(a,b){var d=(new Date).getTime(),e=b&&b.getResponseHeader?b.getResponseHeader("Date"):null;n=e?new Date(e).getTime():null,o=d;var f=a.data;f.createdAt=d,c.cacheToken=f,k.forEach(c.tokenCb,function(a){a&&a(f)}),c.tokenCb.length=0},error:function(){c.cacheToken?a&&a(c.cacheToken):window.setTimeout(function(){c.getToken(null,!0)},1e4)}})}function g(a,b,c){var d=this;d.getOss(function(e,f){try{var g=f.path+"/"+(new Date).getTime()+"_"+d.getRandomName();e.putObject({Bucket:f.bucket,Region:f.region,Key:g,Body:a,ContentType:a.type||b},function(a){c&&c(a?"":"http://qqstatic.nowcoder.com/"+g)})}catch(h){c&&c()}})}function h(a){a=a||32;for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",d=c.length,e=0;e++<a;)b+=c.charAt(Math.floor(Math.random()*d));return b}var i=a("nc"),j=(i.$,i.Clazz),k=i.Base,l=a("../../../../action/cts"),m=c.exports=j.create(),n=null,o=null;window.txyunNCFixDate=function(){return k.id(n)?+new Date(+n+((new Date).getTime()-(+o||0))):+new Date},k.extend(m.prototype,{initialize:d,getOss:e,getToken:f,uploadBlob:g,getRandomName:h})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/util/util",["nc","cpn","ncStream","../../../../util/util","../../../../util/log","./ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","./ossTx"],function(a,b,c){function d(a){var b,c=0,d=1;return I.forEach(a,function(a){var e=a.parentId,f=b===e;b=e,d=e&&f?d+1:1,(!e||!f)&&c++,a.multiIndex=e?c+"-"+d:c+""}),a}function e(a,b,c){var d=this;b=b&&b.length>0?b:[];var e={},f=[];I.forEach(b,function(a){var b=a.parentId||a.qid;b&&(!e[b]&&f.push(b),e[b]=e[b]||[],e[b].push(a))});var g=[];c?g=d.random(a,f.length):I.forCount(f.length,function(a){g.push(a)});var h=[];return I.forEach(g,function(a){var b=f[a];e[b]&&h.push.apply(h,e[b])}),h}function f(a,b){var c=this;b=b&&b.length>0?b:[];var d=c.random(a,b.length),e=I.map(d,function(a){return b[a]});return e}function g(a,b){function c(b,c){a=(9301*a+49297)%233280;var d=a/233280;return b+d*(c-b)}var d=[],e={};for(b=Math.max(b,1);d.length<b;){var f=Math.round(c(0,b-1)),g=f+"";e[g]||(d.push(f),e[g]=1)}return d}function h(a){a=H.trim(a);for(var b=0,c=0,d=a.length;d>c;c++)b+=a.charCodeAt(c);return b}function i(a){return a=Math.max(1,+a||1),Math.floor(Math.random()*a+1)}function j(a){var b=this;if(!b.isSupportCam()){var c="浏览器版本过低",d=window.Error?new window.Error(c):{message:c};return a&&a(d)}if(b.isStreamEnable(b.localMediaStream))return a&&a(null,b.localMediaStream);var e=b._getVideoStreamCb=b._getVideoStreamCb||[];e.push(a),e.length>1||O.getUserMedia({video:!0,audio:!1},function(a){window.setTimeout(function(){b.localMediaStream=a,I.forEach(e,function(b){b&&b(null,a)}),e.length=0,J.fire(b.MSG_EVENT_GET_VIDEO_STREAM,a)},500)},function(a){b.localMediaStream=null,I.forEach(e,function(b){b&&b(a)}),e.length=0})}function k(a,b){return P.stream2video({el:b,stream:a,param:{mirror:!0,muted:!0}})}function l(a){if(!a)return!1;if(K.chrome())return!a.ended;var b=P.isVideoTrackEnabled(a);return b}function m(a,b){function c(){e.play();var a=P.getImageData(e,U,V,"image/jpeg",W);b&&b(a)}var d=this;if(!a)return b&&b();var e=H("#"+X).get(0);e?c():(e=d.getVideoEl(a),e.id=X,H(document.body).append(e),H(e).css("position","absolute").css("left",-99999).css("top",-99999),window.setTimeout(c,1e3))}function n(a,b,c){function d(){var d=f.localMediaStream;!f.isStreamEnable(d)&&e(),f.getVideoStream(function(d,h){return h?void f.getImageData(h,function(c){if(!P.isPhotoPass(H("#"+X),U,V))return void f.uploadCamImage(a,b,g);var d=c===f._uploadImageLastData;f._uploadImageLastData=c,f.uploadImageByImageData(c,a,b),f.uploadCamImage(a,b,g),d&&e()}):f.uploadCamImage(a,b,c)})}function e(){var a=H("#"+X);a.length>0&&(a.get(0).pause(),a.remove())}var f=this,g=4e4;c=c||1e3*Math.floor(5*Math.random()+1),window.clearTimeout(f._uploadImageTimer),f._uploadImageTimer=window.setTimeout(d,c)}function o(){var a=this;window.clearTimeout(a._uploadImageTimer)}function p(a,b,c){function d(a,b){for(var c,d,f=a.replace(/[^A-Za-z0-9\+\/]/g,""),g=f.length,h=b?Math.ceil((3*g+1>>2)/b)*b:3*g+1>>2,i=new Uint8Array(h),j=0,k=0,l=0;g>l;l++)if(d=3&l,j|=e(f.charCodeAt(l))<<18-6*d,3===d||g-l===1){for(c=0;3>c&&h>k;c++,k++)i[k]=j>>>(16>>>c&24)&255;j=0}return i}function e(a){return a>64&&91>a?a-65:a>96&&123>a?a-71:a>47&&58>a?a+4:43===a?62:47===a?63:0}var f=this,g="";if(a&&a.match(/^data\:image\/(\w+)/)&&(g=RegExp.$1),g){var h=a.replace(/^data\:image\/\w+\;base64\,/,""),i=new Blob([d(h)],{type:"image/"+g});try{var j=f.isTxYun()?T:S,k=f.oss=f.oss||new j({uid:b});k.uploadBlob(i,"image/jpeg",function(a){c&&c(a)})}catch(l){}}}function q(){H(window).scrollTop(0)}function r(){var a=P.getTestStatus();return a.canMedia}function s(a,b){var c=this,d=a.statusManager,e=a.stepManager.getList(),f=a.data,g=f.paperCategoryCount||{},h=d.getPaperSetting(),i=[];I.forEach(d.getTypeList(),function(a){var b=g[a]||0;b&&i.push(d.getTypeName(a)+' <span class="font-green">'+b+"</span> 道")});var j="",k=e.indexOf(b),l={};return l[c.STEP_INFO]="确认考生信息",l[c.STEP_CAMERA]="调试摄像头",l[c.STEP_PROTOCOL]="阅读考试须知",l[c.STEP_MENU]="开始答题",l[c.STEP_MOINT_PHONE]="开启手机监控",I.forEach(e,function(a,b){l[a]&&(j+=L.execTpl(['<div class="item #{cls}">','<div class="step-num-wrap"><div class="step-num">#{index}</div></div>','<h3 class="steps-tit">#{name}</h3>',"</div>"].join(""),{cls:b===k?"done":"",index:b+1,name:l[a]}))}),L.execTpl(['<div class="ecom-info clearfix">','<a href="javascript:void(0);" class="ecom-logo"><img src="#{logo}" /></a>','<div class="ecom-main">','<h2 class="ecom-title">#{paperName}</h2>',"<p>试卷开放时间(北京时间)：#{examTime}</p>","<p>考试时长：#{durationMin}分钟</p>","<p>考试题型：#{count}</p></div>","</div>",'<div class="steps-wrap">#{list}</div>'].join(""),{examTime:f.examTime,durationMin:f.durationMin,paperName:f.paperName,count:i.join("，"),logo:Q.fixUrlProtocol(h.logo),list:j})}function t(a){window.location.href="/cts/"+H.trim(a)+"/finish"}function u(a){return"//static.nowcoder.com/cts/miniapp/check/"+a+".png"}function v(a){var b=this;J.fire(b.MSG_EVENT_NOTICE_SHOW,a),b.soundNotice()}function w(a){var b=this;J.fire(b.MSG_EVENT_NOTICE_HIDE,a)}function x(){var a=this;try{a._noticeSound=a._noticeSound||new M("//uploadfiles.nowcoder.com/acts/cts/notice.mp3"),a._noticeSound.stop(),a._noticeSound.play()}catch(b){}}function y(){return!!window.isTencentCloud}function z(a,b,c,d){try{var e={uid:a,key:c,content:H.trim(d),source:"cts",sourceId:b};R.log(e)}catch(f){}}function A(a){return new N({hasNoTitle:!0,hasNoMove:!0,hasNoFooter:!0,content:['<div class="confirm-content">','<div class="poptip-word"><span class="warning-word">',a||"","</span></div>","</div>"].join(""),width:500,clickToHide:!1})}function B(a){try{a&&a.close()}catch(b){}}function C(){var a=['<div class="pop-video-interview">','<div class="video-res-tips error"><i class="icon-exclamation-sign"></i>你的浏览器已禁用Cookies，请参考以下解决方案，然后继续：</div>','<div class="pop-video-main">','<div class="clearfix" style="font-size:16px;text-align:center;font-weight:bold">','<div style="float:left;width:49%">Firefox浏览器</div>','<div style="float:right;width:49%">Chrome浏览器</div>',"</div>",'<img style="width:700px;height:274px;" src="//uploadfiles.nowcoder.com/images/20180227/56_1519721641599_A13D083F01374BA61281696576A21948">',"</div>",'<div style="margin-top:20px;">请按以上方法处理后刷新页面<br />如果刷新后仍未生效，请重启电脑</div>',"</div>"].join("");new N({title:"友情提示",content:a,width:800,hasNoFooter:!0,listeners:{close:function(){window.location.reload()}}})}function D(){var a=['<div class="pop-video-interview">','<div class="video-res-tips error"><i class="icon-exclamation-sign"></i>你的设备无法启用，请参考以下任一方案，然后继续：</div>','<div class="pop-video-main">',"<ul>","<li>1. 请检查你的摄像头是否连接正常？</li>",'<li>2. 浏览器地址栏附近是否出现<img src="//uploadfiles.nowcoder.com/images/20160706/56_1467799550047_E36B978A3BFAFCF3E1E0A81C3C5D9133">图标，点击查看是否对摄像头设置了禁用。</li>',"<li>3. 启用或者更换你的视频设备。</li>","</ul>",'<img style="width:622px;height:227px;" src="//uploadfiles.nowcoder.com/images/20160706/56_1467799001381_B17356A9B5F14EDD7B9B69ECFE2C261F">',"</div>",'<div style="margin-top:20px;">请按以上方法处理后刷新页面<br />如果启用设备还是失败，请重启电脑或更新摄像头驱动</div>',"</div>"].join("");new N({title:"友情提示",content:a,width:800,hasNoFooter:!0})}var E=a("nc"),F=a("cpn"),G=a("ncStream"),H=E.$,I=E.Base,J=E.Event,K=E.Browser,L=E.Str,M=E.Sound,N=F.Popup,O=G.Adapter,P=G.Stream,Q=a("../../../../util/util"),R=a("../../../../util/log"),S=a("./ossAli"),T=a("./ossTx"),U=420,V=3*U/4,W=.6,X="jsTmpImageVideo";c.exports={STEP_INFO:"0",STEP_CAMERA:"1",STEP_PROTOCOL:"2",STEP_MENU:"3",STEP_EXAM:"4",STEP_MOINT_PHONE:"5",TYPE_STATUS_NONE:"0",TYPE_STATUS_PROGRESS:"1",TYPE_STATUS_SUBMIT:"2",MSG_EVENT_START_TIME_CHANGE:"MSG_EVENT_START_TIME_CHANGE",MSG_EVENT_TIME_CHANGE:"MSG_EVENT_TIME_CHANGE",MSG_EVENT_DID_START_EXAM:"MSG_EVENT_DID_START_EXAM",MSG_EVENT_GET_VIDEO_STREAM:"MSG_EVENT_GET_VIDEO_STREAM",MSG_EVENT_NOTICE_SHOW:"MSG_EVENT_NOTICE_SHOW",MSG_EVENT_NOTICE_HIDE:"MSG_EVENT_NOTICE_HIDE",MSG_EVENT_NOTICE_SIZE_CHNAGE:"MSG_EVENT_NOTICE_SIZE_CHNAGE",PING_DURATION:8e3,fixQuestionIndex:d,resortQuestions:e,resortItems:f,random:g,getSeedFromStr:h,randomSecond:i,getVideoStream:j,getVideoEl:k,isStreamEnable:l,getImageData:m,uploadCamImage:n,stopUploadCamImage:o,uploadImageByImageData:p,goTop:q,isSupportCam:r,getStepHeader:s,gotoFinish:t,getMiniQrCode:u,showNotice:v,hideNotice:w,soundNotice:x,isTxYun:y,log:z,loadMask:A,closeMask:B,popupNoCookie:C,popupPermission:D}});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/cpn/name",["nc","cpn","ncStream","../util/util","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.allowCamera=!!a.allowCamera,b.allowMessage=!!a.allowMessage}function e(){var a=this,b=a.getEl(),c=b.find(".js-user-name"),d=b.find(".js-inner-video"),e=d.parent(),f=b.find(".video-error-tips"),g=f.find(".txt");a.elMap={name:c,video:d,videoWrap:e,errorTips:f,errorTxt:g}}function f(){var a=this,b=a.getEl();b.on("click",function(){u.getVideoStream(function(a,b){(a||!b)&&u.popupPermission()})})}function g(){function a(){u.getVideoStream(function(g,h){u.isStreamEnable(h)?t.isPhotoPass(d,420,315)?(c=0,b.showError(!1)):(c++,c>=f&&b.showError(!0,"图片质量异常，请确认摄像头正常工作，或者调节光线、姿势，仍无法解决请右下角联系客服")):(c=0,b.showError(!0)),window.setTimeout(function(){e(a)},0)})}var b=this,c=0,d=b.elMap.video,e=s.frequency(3e3),f=3;e(a)}function h(a){var b=this,c=b.getEl();c[a===!1?"addClass":"removeClass"]("no-camera")}function i(a){var b=this;u.getVideoEl(a,b.elMap.video)}function j(a,b){var c=this,d=c.getEl(),e=c.elMap;a=a!==!1,a!==c._isInError&&(c._isInError=a,d[a?"addClass":"removeClass"]("written-name-error"),e.errorTxt.html(b||c.getErrorTips()))}function k(a){var b=this;a!==b._lastName&&(b._lastName=a,b.elMap.name.html("考生: "+q.encodeHTML(a||"没有姓名")))}function l(){var a=this;return"拍照异常，请尝试刷新页面"+(a.allowMessage?"，仍无法解决请右下角联系客服":"")}function m(){var a=this;return{errorTips:a.getErrorTips()}}var n=a("nc"),o=(a("cpn"),a("ncStream")),p=(n.$,n.Clazz),q=n.Str,r=(n.Base,n.Component),s=n.Time,t=o.Stream,u=a("../util/util"),v=c.exports=p.create();p.mix(v,r,{_template:['<div class="written-name no-camera">','<div><span class="js-user-name"></span> <i class="icon-angle-down"></i><i class="icon-angle-up"></i></div>','<div class="written-video"><video class="written-video-inner js-inner-video"></video></div>','<div class="video-error">拍照异常</div>','<div class="video-error-tips" style="font-size:12px;"><div class="txt">#{errorTips}</div></div>',"</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){{var a=this;a.getEl()}a.initEl(),a.allowCamera&&(a.initCamera(),a.initMonit())}}]},{initialize:d,initEl:e,initCamera:f,initMonit:g,showCamera:h,showStream:i,showError:j,changeName:k,getErrorTips:l,_getData:m})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/cpn/phone",["nc","cpn","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager}function e(){function a(){var a=f.isRight;c[a?"removeClass":"addClass"]("error"),d.html(a?"手机持续监控中，请不要打开其他手机应用":"手机异常，请查看小程序是否停止运行，并保持小程序页面常亮")}var b=this,c=b.getEl(),d=c.find(".js-tips"),e=b.manager,f=e.phoneManager;f.listen("update",a),b.listen("destroy",function(){f.unlisten("update",a)}),a()}function f(){var a=this,b=a.manager;return{src:j.getMiniQrCode(b.data.userId)}}var g=a("nc"),h=(a("cpn"),g.$,g.Clazz),i=(g.Str,g.Base,g.Component),j=a("../util/util"),k=c.exports=h.create();h.mix(k,i,{_template:['<div class="written-phone">','<a href="javascript:void(0);" class="phone-normal"></a>','<div class="video-error">手机异常</div>','<div class="written-qrcode">','<div class="written-qrcode-inner">','<div class="written-qrcode-img"><img src="#{src}" /></div>','<p class="js-tips">请扫码进入小程序，并持续开启，不得打开其他应用</p>',"</div>","</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this;a.initMonit()}}]},{initialize:d,initMonit:e,_getData:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/cpn/popupInfoError",["nc","cpn","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig"],function(a,b,c){function d(a){{var b=new q(a);o.wrap(b,{title:"考生信息错误反馈",content:b.html(),width:520,ok:function(){return b.submit(),!0},cancel:function(){}})}return b}function e(){var a=this,b=a.getEl();b.html(['<div style="font-size:14px;text-align:center;">','<div style="margin-bottom:20px;">请指出错误信息并输入正确信息，如：姓名有误，张三</div>','<input type="text" placeholder="请填写反馈内容" style="width:400px;" class="js-content-ipt" />',"</div>"].join("")),a.popup.fixPosition()}function f(a){var b=this,c=b.rawConfig,d=l(".js-content-ipt");return 0===arguments.length?{id:c.uid,pid:c.pid,key:c.key,name:c.name,feedback:l.trim(d.val())}:void d.val(l.trim(a.feedback))}function g(){var a=this,b=a.val();return b.feedback?void p.saveFeedBack({body:b,call:function(){o.tips("提交成功"),a.popup.close()},error:function(a){o.alert(a.msg)}}):o.alert("反馈内容不能为空")}function h(a){var b=this,c=b.rawConfig;p.getFeedBack({params:{pid:c.pid},query:{id:c.uid},call:function(b){a&&a(b.data)},error:function(a){b.renderWait(a.msg)}})}function i(a){var b=this,c=b.getEl();c.html('<div style="font-size:14px;text-align:center">'+(a||"加载中...")+"</div>")}var j=a("nc"),k=a("cpn"),l=j.$,m=j.Component,n=j.Clazz,o=(j.Base,k.Input,k.Popup),p=a("../../../../action/cts"),q=c.exports=n.create();n.mix(q,m,{_template:"<div></div>",listeners:[{name:"render",type:"custom",handler:function(){var a=this;a.renderWait(),a.fetchData(function(b){a.initContainer(),a.val(b)})}}],show:d},{initContainer:e,val:f,submit:g,fetchData:h,renderWait:i})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager/codePlayback",["nc","cpn","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig"],function(a,b,c){function d(a){var b=this,c=a.manager;b.codeCache={},b.manager=c,b.qid=null,b.timer=null}function e(a){var b=this,c=b.manager.dataStatus.codePlayback;a=c&&a!==!1,window.clearTimeout(b.timer),a&&(b.timer=window.setTimeout(function(){b.fire("log",b.qid),b.countdown()},p))}function f(a){var b=this;b.qid=null,b.countdown(!1),b.log(a)}function g(a){var b=this;b.qid=a.qid,b.countdown(!!b.qid&&!a.isExample),b.log(a)}function h(){var a=this;a.countdown(!1),a.qid=null}function i(a){var b=this,c=b.manager,d=c.dataStatus.codePlayback,e=b.codeCache;if(d&&a&&!a.isExample&&a.qid&&a.language){var f=a.qid,g=e[f],h={uid:c.data.userId||"",qid:f,language:a.language,content:a.content};g&&h.language===g.language&&h.content===g.content||n.codePlayBack({body:h,call:function(){e[f]=h}})}}var j=a("nc"),k=(a("cpn"),j.$,j.Clazz),l=j.Base,m=j.Event,n=a("../../../../action/cts"),o=c.exports=k.create(),p=3e4;l.extend(o.prototype,m,{initialize:d,countdown:e,leave:f,entry:g,submit:h,log:i})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager/leave",["nc","cpn","../util/action","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig"],function(a,b,c){function d(a){var b=this,c=a.manager;b.manager=c,b.maxAlertCount=3,b.needLog=!1,b.alerting=!1}function e(){var a=this;a.needLog=!0}function f(){var a=this;a.needLog=!1}function g(a,b){var c=this,d=c.manager,e=d.data||{},f=d.dataStatus.antiJumpOut,g=!!d.dataStatus.antiCodingJumpOut;if(b=k.id(b),"6"!==b&&("4"===b?g:f)&&!c.alerting&&c.needLog){var h=(+e.leaveCount||0)+1;e.leaveCount=h,h<=c.maxAlertCount&&(c.alerting=!0,l.alert("你已离开当前页面"+h+"次，"+(g?"":"除编程题外其他题型")+"离开超过3次后将会标示作弊嫌疑。",function(){c.alerting=!1})),m.leave(e.userId,e.tid,a,function(a){e.leaveCount=a})}}var h=a("nc"),i=a("cpn"),j=(h.$,h.Clazz),k=h.Base,l=i.Popup,m=a("../util/action"),n=c.exports=j.create();k.extend(n.prototype,{initialize:d,start:e,stop:f,log:g})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager/phone",["nc","cpn"],function(a,b,c){function d(a){var b=this,c=a.manager;b.manager=c,b.isStop=!1,b.isConnect=!1,b.isRight=void 0,b.needShowInHead=!1}function e(){var a=this;a.isStop=!0}function f(a){var b=this;if(!b.isStop){var c=!a.monitorPhoneException,d=b.isRight===c;b.isConnect=b.isConnect||c,b.isRight=c,b.fire("update",d)}}var g=a("nc"),h=(a("cpn"),g.$,g.Clazz),i=g.Base,j=g.Event,k=c.exports=h.create();i.extend(k.prototype,j,{initialize:d,stop:e,update:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager/status",["nc","../util/util","cpn","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.rawConfig=a}function e(a){var b=this;if(a=s.trim(a),!a)return v.TYPE_STATUS_SUBMIT;for(var c=b.getStatus(),d=0,e=c.length;e>d;d++){var f=c[d];if(u.id(f.qcategoty)===a)return u.id(f.qstatus)}return v.TYPE_STATUS_SUBMIT}function f(a){var b=this,c=b.getByType(a);return c===v.TYPE_STATUS_SUBMIT}function g(){for(var a=this,b=a.getStatus(),c=0,d=b.length;d>c;c++)if(u.id(b[c].qstatus)!==v.TYPE_STATUS_SUBMIT)return!1;return!0}function h(a,b){var c=this;a=s.trim(a),b=s.trim(b),u.contains([v.TYPE_STATUS_NONE,v.TYPE_STATUS_PROGRESS,v.TYPE_STATUS_SUBMIT],b)&&u.forEach(c.getStatus(),function(c){u.id(c.qcategoty)===a&&(c.qstatus=b)})}function i(){var a=this,b=null;return u.forEach(a.getStatus(),function(a){u.id(a.qstatus)===v.TYPE_STATUS_PROGRESS&&(b=u.id(a.qcategoty))}),b}function j(){var a=this,b=0;return u.forEach(a.getStatus(),function(a){b+=u.id(a.qstatus)!==v.TYPE_STATUS_SUBMIT?1:0}),b}function k(){var a=this,b=0,c=0;return u.forEach(a.getStatus(),function(a){var d=+a.qcount||0;b+=d,c+=u.id(a.qstatus)===v.TYPE_STATUS_SUBMIT?d:0}),{total:b,submit:c}}function l(){var a=this,b=a.getManager();return(b.data||{}).categoryStatus||[]}function m(){var a=this,b=a.getManager();return(b.data||{}).paperSetting||{}}function n(a){var b=this,c=b.rawConfig,d=b.serverNameMap=b.serverNameMap||c.manager.data.paperSetting.questionCategories||{},e={1:"单选题",2:"多选题",3:"填空题",4:"编程题",5:"问答题",6:"设计题"};return a?d[a]||e[a]:"题目"}function o(){var a=this,b=a.rawConfig;return u.keys(b.manager.data.paperCategoryCount).sort(function(a,b){return+a-+b})}function p(a){var b=this,c=b.getPaperSetting();if(a=u.id(a),"2"===a){var d=u.id(c.chooseScoreRule);return"1"===d?"少选不得分":"2"===d?"错选不得分,少选得1/2分":"3"===d?"错选不得分,少选得1/3分":""}if("4"===a){var e=u.id(c.codingScoreRule),f="1"===e?"每题以多次提交中最高得分计分":"2"===e?"每题以最后一次提交得分计分":"";return f?'<span title="假设某编程题20分，\n有10个测试用例，\n提交的代码通过了3个用例，\n本次提交得6分。" class="js-nc-title-tips">'+f+"</span>":""}return""}function q(){var a=this,b=a.rawConfig;return b.manager||{}}var r=a("nc"),s=r.$,t=r.Clazz,u=r.Base,v=a("../util/util"),w=c.exports=t.create();u.extend(w.prototype,{initialize:d,getByType:e,isSubmitType:f,isSubmitAllType:g,updateByType:h,getProgressType:i,getNoSubmitTypeCount:j,getCount:k,getStatus:l,getPaperSetting:m,getTypeName:n,getTypeList:o,getTypeScoreRule:p,getManager:q})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/manager/step",["nc","../util/util","cpn","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.cacheMap={},b.manager=a.manager}function e(a){var b=this;return a=o.trim(a),a&&q.contains(b.getList(),a)}function f(a){var b=this;a=o.trim(a);var c=b.getList(),d=c.indexOf(a);d=d>0?d-1:-1;var e=-1===d?-1:c[d];return e}function g(a){var b=this;a=o.trim(a);var c=b.getList(),d=c.indexOf(a);d=d+1<c.length?d+1:-1;var e=-1===d?-1:c[d];return e}function h(b,c){var d=this;if(b=o.trim(b),!d.has(b))return c&&c();var e=b===r.STEP_EXAM,f=e?"../step/exam":"../step/step"+b;a.async(f,function(a){c&&c(a)})}function i(){var a=this,b=a.manager;return a._stepOrder||(a._stepOrder=[r.STEP_INFO,r.STEP_CAMERA,r.STEP_MOINT_PHONE,r.STEP_PROTOCOL,r.STEP_MENU,r.STEP_EXAM],!b.dataStatus.monitorPhone&&a._stepOrder.splice(2,1),!b.dataStatus.allowCamera&&a._stepOrder.splice(1,1)),a._stepOrder}function j(a){var b=this,c=b.manager,d=[r.STEP_INFO,r.STEP_PROTOCOL];return(a||c.dataStatus.monitorPhone)&&d.push(r.STEP_MOINT_PHONE),(a||c.dataStatus.allowCamera)&&d.push(r.STEP_CAMERA),d}function k(a,b){var c=this;a=o.trim(a),a&&b&&(c.cacheMap["step"+a]=b)}function l(a){var b=this;return a=o.trim(a),(a?b.cacheMap["step"+a]:null)||null}function m(a){var b=this;a=o.trim(a),delete b.cacheMap["step"+a]}var n=a("nc"),o=n.$,p=n.Clazz,q=n.Base,r=a("../util/util"),s=c.exports=p.create();q.extend(s.prototype,{initialize:d,has:e,getPre:f,getNext:g,getClass:h,getList:i,getPreList:j,cacheModule:k,getCacheModule:l,delCacheModule:m})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/exam",["nc","cpn","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx","../util/answer","../util/answerCache","../util/action"],function(a,b,c){function d(a){var b=this;b.manager=a.manager,b.questionCpnCache={}}function e(){{var a=this;a.manager}A.listen(F.MSG_EVENT_TIME_CHANGE,function(b){D.forEach(a.questionCpnCache,function(a){a&&a.showTime(b)})})}function f(a){{var b=this;b.manager}G.clear(),b.delQuestionCpn(),b.currentIndex=null,b.currentExampleIndex=null,b.items=a.items||[],b.dones=a.dones||{},b.examples=a.examples||[],b.type=a.type,b.questionType=a.questionType;var c=!!a.isExample;b.gotoQuestion(a[c?"exampleIndex":"index"],c)}function g(b,c){{var d=this,e=(d.getEl(),d.manager);d.items.length,(d.examples||[]).length}if(b=+b||0,d.submitAnswer(d.currentIndex),d[c?"currentExampleIndex":"currentIndex"]!==b){var f=d[c?"examples":"items"][b],g=D.map(d.items,function(a){return a.multiIndex||"--"});d.currentIndex=c?null:b,d.currentExampleIndex=c?b:null,e.addNavParam({index:d.currentIndex,exampleIndex:d.currentExampleIndex}),d.logTimeDiff(c?null:f.qid),a.async("./type/"+f.type,function(a){d.currentModule&&(d.currentModule.hide(),d.currentModule.fire("leaveModule"));var h=d.getQuestionCpn(b,c);h?(h.show(),h.refresh()):(h=new a({renderTo:d.getEl(),manager:d.manager,parent:d,data:{item:f,multiIndex:g,done:d.getDoneContent(f.qid),isExample:c,type:d.type,index:b,itemCount:d.items.length,exampleCount:(d.examples||[]).length},listeners:{gotoQuestion:function(a,b){d.gotoQuestion(a,b)},gotoNext:function(){var a=b+1;if(c){var e=a<d.examples.length;return void d.gotoQuestion(e?a:0,e)}a<d.items.length&&d.gotoQuestion(a)},gotoMenu:function(){d.gotoMenu()},gotoSubmitType:function(){d.submitType()},gotoSubmitAnswer:function(){d.submitAnswer(b)}}}),d.setQuestionCpn(h,b,c)),d.currentModule=h,d.currentModule.fire("entryModule"),e.chat&&e.chat.fixPos(),e.adjustTime()}),F.goTop()}}function h(){var a=this,b=a.currentIndex;return D.id(b)?a.items[b]:null}function i(a,b){var c=this;return c.questionCpnCache[(b?"example":"item")+a]}function j(a,b,c){var d=this;d.questionCpnCache[(c?"example":"item")+b]=a}function k(){var a=this;D.forEach(a.questionCpnCache,function(a){a&&(a.fire("leaveModule"),a.destroy())}),a.questionCpnCache={}}function l(a){var b=y("div.ft-wrap"),c=y("div.nk-main");a=a!==!1,b[a?"hide":"show"](),c[a?"addClass":"removeClass"]("fullscreen"),!a&&c.removeAttr("style"),y(document.body)[a?"addClass":"removeClass"]("nk-body-hidden")}function m(){var a=this;a._forbidRightMenu||(a._forbidRightMenu=!0,y(document).on("contextmenu",function(){return!!a.canUse.rightMenu}).on("click",function(b){3!==b.witch||a.canUse.rightMenu||b.preventDefault()}))}function n(){var a=this;a._forbidSelect||(a._forbidSelect=!0,y(document).on("selectstart",function(){return!!a.canUse.select})),y(document.body).css("-moz-user-select",a.canUse.select?"inherit":"none")}function o(a,b){function c(){return f&&8>=f&&e._forbidBlurWindFirst?void(e._forbidBlurWindFirst=!1):(window.clearTimeout(e._blurTimer),void(e._blurTimer=window.setTimeout(function(){a&&a()},J)))}function d(){window.clearTimeout(e._blurTimer),b&&b()}var e=this;if(e._forbidBlurWind)return{blur:c,focus:d};e._forbidBlurWind=!0,e._forbidBlurWindFirst=!0;var f=B.ie();return y(window).blur(c),y(window).focus(d),y(document).on("click",function(){d(),window.setTimeout(function(){d()},0)}),{blur:c,focus:d}}function p(a){var b=this,c=b.manager;if(D.id(a)){var d=b.items[a];if(d){var e=D.id(d.type),f=D.id(d.qid),g={qid:d.qid,tid:c.data.tid},h=!1,i=b.getQuestionCpn(a);if(i&&f){var j=b.getDoneContent(d.qid);if(e===K||e===L||e===M){var k=i.val();g.content=k,h=(j||{content:""}).content!==k,h=e===K?k&&(j||{}).content!==k:h,h&&(b.dones[f]={qid:d.qid,usercontent:{content:k}})}else if(e===O){var k=i.val();g.content=k,h=(j||{}).content!==k,h&&(b.dones[f]={qid:d.qid,usercontent:{content:k,urls:""}})}e===O&&H.set(c.data.tid,d.qid,g),h&&G.add(g)}}}}function q(a){var b=this,c=b.timeDiffMap||{},d=b.manager,e=(new Date).getTime(),f=b._lastTimeId;if(a=D.id(a),window.clearTimeout(b._logDiffTimer),f&&c[f]){var g=Math.round((e-c[f])/1e3);d.addTimeDiff(f,g),delete c[f]}b._lastTimeId=null,b.timeDiffMap=c,a&&(c[a]=e,b._lastTimeId=a,b._logDiffTimer=window.setTimeout(function(){b.logTimeDiff(a)},1e3))}function r(){var a=this,b=a.dones,c=[];return D.forEach(a.items,function(a,d){var e=D.id(a.qid);e&&e in b&&c.push(d)}),c}function s(a){var b=this,c=b.dones;return a=D.id(a),a?(c[a]||{}).usercontent:void 0}function t(){var a=this,b=a.getDonesIndex();return b.length>=a.items.length}function u(){var a=this,b=a.manager,c=b.data,d=a.type;a.submitAnswer(a.currentIndex);var e=a.isAllDone()?'本次操作将提交本部分<span style="color:#e86142;">全部题目做题结果</span>，提交后将无法返回修改或调试本题型<span style="color:#e86142;">所有题目</span>答案，确定现在提交吗？':'你还有题目未完成，本次操作将提交本部分<span style="color:#e86142;">全部题目做题结果</span>，提交后将无法返回修改或调试本题型<span style="color:#e86142;">所有题目</span>答案，确定现在提交吗？';E.confirm(e,function(){F.log(c.userId,c.tid,"sureSubmit",d),a.logTimeDiff();var e=F.loadMask("正在保存答案...");G.waitComplete(function(){F.closeMask(e),a.currentIndex=null,a.currentExampleIndex=null,b.submitType(d)})})}function v(){var a=this,b=a.manager,c=F.loadMask("正在保存答案...");a.submitAnswer(a.currentIndex),G.waitComplete(function(){F.closeMask(c),a.currentIndex=null,a.currentExampleIndex=null,b.navMenu()})}var w=a("nc"),x=a("cpn"),y=w.$,z=w.Component,A=w.Event,B=w.Browser,C=w.Clazz,D=(w.Sys,w.Base),E=x.Popup,F=a("../util/util"),G=a("../util/answer"),H=(a("../util/action"),a("../util/answerCache")),I=c.exports=C.create(),J=3e3,K="1",L="2",M="3",N="4",O="5",P="6";C.mix(I,z,{_template:"<div></div>",listeners:[{name:"render",type:"custom",handler:function(){{var a=this;a.getEl()}a.initEvent()}},{name:"entryStep",type:"custom",handler:function(a,b){var c=this,d=c.manager;b=D.id(b);var e=!!d.dataStatus.antiJumpOut,f=!!d.dataStatus.antiCodingJumpOut,g=b===D.id(N),h=b===D.id(P),i=(g||h)&&d.dataStatus.allowCodeCopy;c.delQuestionCpn(),c.codeTheme(g),c.canUse={rightMenu:i,select:i,blur:h||(g?!f:!e)},c.forbidRightMenu(),c.forbidSelect();var j=d.leaveManager;j.start(),c.forbidBlurWindowItem=c.forbidBlurWindow(function(){if(!c.canUse.blur){var a=c.getCurrentQuestion()||{};j.log(a.qid,c.questionType)}})}},{name:"leaveStep",type:"custom",handler:function(){var a=this;a.delQuestionCpn(),a.codeTheme(!1),a.canUse={rightMenu:!0,select:!0,blur:!1},a.forbidSelect()}}]},{initialize:d,initEvent:e,loadQuestions:f,gotoQuestion:g,getCurrentQuestion:h,getQuestionCpn:i,setQuestionCpn:j,delQuestionCpn:k,codeTheme:l,forbidRightMenu:m,forbidSelect:n,forbidBlurWindow:o,submitAnswer:p,logTimeDiff:q,getDonesIndex:r,getDoneContent:s,isAllDone:t,submitType:u,gotoMenu:v})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/step0",["nc","cpn","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx","../cpn/popupInfoError"],function(a,b,c){function d(a){var b=this;b.manager=a.manager;var c=b.manager.statusManager.getPaperSetting().signUpFields,d=[],e=[];v.forEach(c,function(a){"true"===a.need||"true"===a.required?d["姓名"===a.title?"unshift":"push"](a):e.push(a)}),b.fields=d.concat(e),b.iptMap={};var f={};v.forEach(b.fields,function(a){f[a.name]=a})}function e(){var a=this,b=a.getEl(),c=b.find("div.exam-confirm"),d=a.manager,e=d.data,f=e.user||{},g=!!e.userId,h=g?{}:w.getParams();t.recycle(c,!1);v.forEach(a.fields,function(b){var d=a.getFieldType(b),e=a.getFieldEdit(b),i={0:y,1:z,2:A}[d];if(i){var j=a.isSysField(b),k=a.isHrField(b),l=b.name,m=r.trim(j?f[l]:(f.ext||{})[l]),n=r(u.execTpl(['<div class="form-group">','<label class="control-label">#{title}</label>','<div class="control-group js-field"></div>',"2"===e?'<span class="form-ext-tips">*必填</span>':"","</div>"].join(""),{title:b.title}));c.append(n);var o="0"===d,p=new i({renderTo:n.find(".js-field"),renderBy:o?"replaceWith":"append",noSelectAll:!0,options:o?void 0:v.map(b.valueList,function(a){return{text:a,value:a}})});!o&&a.fixSelect(p),a.iptMap[l]=p;var q=m||h[l]||"";p.val("2"===d?q.split("_"):q),(j||k)&&g&&p.disabled()}})}function f(){{var a=this,b=a.getEl(),c=a.manager,d=!!c.data.userId;!!c.dataStatus.allowMessage}if(d){var e=b.find("div.exam-confirm"),f=a.getHrFieldTitle(),g=a.fields||[];e.append(['<div class="form-group">','<label class="control-label">&nbsp;</label>','<div class="control-group" style="line-height:24px;color:#999;">',"信息有误？如"+f.join("、")+'有误请<a href="javascript:void(0)" class="js-info-error link-green">点此反馈</a>',f.length===g.length?"":"，其他字段可自行修改。","</div>","</div>"].join(""))}}function g(a){var b=this;if(0===arguments.length){var c={};return v.forEach(b.fields,function(a){var d=a.name,e=b.getFieldType(a),f=b.iptMap[d];c[d]="2"===e?f.val().join("_"):r.trim(f.val())}),c}v.forEach(b.fields,function(c){var d=c.name,e=b.getFieldType(c),f=b.iptMap[d],g=r.trim(a[d]);f.val("2"===e?g.split("_"):g)})}function h(){var a=this,b=(a.val(),!0);return v.forEach(a.fields,function(c){var d=a.iptMap[c.name],e=a.getFieldType(c),f=a.getFieldEdit(c),g=r.trim(d.val()),h="true"===c.need||c.need===!0,i=c.title,j=!0;!g&&h?j=!1:(!g||"Email"!==c.format&&!/邮箱/.test(i)||u.isEmail(g))&&(!g||"Phone"!==c.format&&!/手机/.test(i)||u.isTel(g))?!g||"IDCard"!==c.format&&!/身份证/.test(i)||u.isPassport(g)||(j=!1):j=!1,j=j&&(g||"2"!==f),!j&&"0"===e&&d.setErrorTips("请填写正确的"+i),!j&&"0"!==e&&d.error&&d.error("请选择"+i),b=b&&j}),b}function i(){var a=this,b=[];return v.forEach(a.fields,function(c){(a.isSysField(c)||a.isHrField(c))&&b.push(c.title)}),b}function j(a){var b=v.id(a.valueType)||"0";return b={0:"0",1:"1",2:"2"}[b]||"0",b="0"!==b&&0===(a.valueList||[]).length?"0":b}function k(a){return v.id(a.edit)||"0"}function l(a){var b=(a||{}).name;return"key"===b||"name"===b}function m(a){{var b=this;(a||{}).name}return"0"===b.getFieldEdit(a)}function n(){var a=this,b=a.manager;return{header:B.getStepHeader(b,B.STEP_INFO)}}function o(a){var b=a.error,c=a.getEl().parent(),d=r('<span class="input-tip" style="display:none;"></span>');c.append(d),a.error=function(e){var f=e!==!1;b.call(a,f),c[f?"addClass":"removeClass"]("error"),f&&d.html(e||"请选择").show(),!f&&d.hide()}}var p=a("nc"),q=a("cpn"),r=p.$,s=p.Clazz,t=p.Component,u=p.Str,v=p.Base,w=p.Uri,x=(p.Dom,q.Popup),y=q.Input,z=q.Select,A=q.SelectMult,B=a("../util/util"),C=a("../../../../action/cts"),D=a("../cpn/popupInfoError"),E=c.exports=s.create();s.mix(E,t,{_template:['<div class="exam-cover">',"#{header}",'<div class="exam-confirm"></div>','<div class="exam-btn-wrap">','<a href="javascript:void(0);" class="btn btn-primary btn-auto js-next">下一步</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){}},{name:"entryStep",type:"custom",handler:function(){{var a=this;a.getEl()}a.initContent(),a.initTips()}},{name:"click a.js-info-error",handler:function(){var a=this,b=a.manager,c=b.data,d=a.val(),e=r.trim(c.userId);e&&D.show({uid:e,pid:c.paperId,key:d.key,name:d.name})}},{name:"click a.js-next",handler:function(){var a=this,b=a.manager;if(a.checkVal()){var c=b.data,d=a.val(),e={};v.forEach(d,function(a,b){"key"!==b&&"name"!==b&&(e[b]=a)});var f=B.loadMask("正在保存中...");C.validateUser({body:{id:c.userId,pid:c.paperId,key:d.key,name:d.name,ext:JSON.stringify(e)},call:function(b){var g=b.data||{},h=g.userId,i=w.getParam("id"),j=c.user;!i&&h&&i!==h&&(c.userId=h,j.id=h,j.key=d.key,j.name=d.name),j&&(j.ext=v.extend(j.ext||{},e)),B.closeMask(f),a.fire("next")},error:function(a){B.closeMask(f),x.alert(a.msg)}})}}}]},{initialize:d,initContent:e,initTips:f,val:g,checkVal:h,getHrFieldTitle:i,getFieldType:j,getFieldEdit:k,isSysField:l,isHrField:m,fixSelect:o,_getData:n})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/step1",["nc","cpn","ncStream","../util/util","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager,b.status=B,b.camFixed=!1}function e(){var a=this;r.listen(y.MSG_EVENT_GET_VIDEO_STREAM,function(b){b&&(y.getVideoEl(b,a.videoEl),a.camFixed=!0)})}function f(){var a=this,b=a.getEl(),c=b.find("div.js-video-container"),d=c.width(),e=3*d/4;a.videoEl.outerWidth(d).outerHeight(e),a.avatarEl.outerWidth(d).outerHeight(e),a.actionBtn.outerWidth(d),c.height(e+a.actionBtn.outerHeight()),u.forEach(["","moz","webkit","o","ms"],function(b){var c=b?b+"Transform":"transform";a.avatarEl.css(c,"scaleX(-1)")})}function g(){var a=this,b=a.manager,c=b.data.user,d=q.trim(c.headUrl);d&&a.showAvatar(c.headUrl),!d&&a.showVideo(),b.isSupportCam?a.getStream(function(c){c&&b.initCamera(),c&&y.getVideoEl(c,a.videoEl),a.camFixed=!!c}):w.alert("您的浏览器不支持摄像头功能，请更换最新版chrome浏览器，确保考试正常进行")}function h(){var a=this,b=a.manager;a.status=B,a.avatarEl.hide(),a.videoEl.show(),a.btnTxt("点击拍照"),a.nextBtn.removeClass("btn-primary").addClass("btn-default"),!b.isSupportCam}function i(a){var b=this;b.status=C,b.videoEl.hide(),b.avatarEl.attr("src",a).show(),b.btnTxt("保存成功"),b.nextBtn.removeClass("btn-default").addClass("btn-primary")}function j(a){y.getVideoStream(function(b,c){(b||!c)&&y.popupPermission(),a&&a(c)})}function k(a){var b=this;b.actionBtn.html('<i class="icon-camera">'+q.trim(a)+"</i>")}function l(a,b,c){var d=this,e=d.manager.data;y.uploadImageByImageData(a,e.userId,function(a){return a?(d.avatarEl.attr("src",a),void z.uploadPic({body:{pid:e.paperId,tid:e.tid,uid:e.userId,url:a,isHead:!0},error:c,call:b})):c&&c()})}function m(){var a=this,b=a.manager;return{header:y.getStepHeader(b,y.STEP_CAMERA)}}var n=a("nc"),o=a("cpn"),p=a("ncStream"),q=n.$,r=n.Event,s=n.Limit,t=n.Clazz,u=n.Base,v=n.Component,w=o.Popup,x=p.Stream,y=a("../util/util"),z=a("../../../../action/cts"),A=c.exports=t.create(),B="video",C="avatar";t.mix(A,v,{_template:['<div class="exam-cover">',"#{header}",'<div class="exam-confirm">','<p class="exam-tip"><i class="icon-exclamation-sign"></i>请点击视频画面下方的按钮进行拍照，考试过程中摄像头将全程开启，照片将用于和考场监控做对比</p>','<div class="video-mod">','<div class="video-img js-video-container">','<video class="js-video" style="display:block;"></video>','<img class="js-avatar" style="display:none;" src="//uploadfiles.nowcoder.com/images/20160520/56_1463728821615_B856A5CA00C64BEA1A77436F8FE39D5E" />','<div class="video-img-upload js-get-avatar"><i class="icon-camera">点击拍照</i></div>',"</div>","<dl>","<dt>拍照遇到问题怎么办？</dt>",'<dd>1、请检查你的电脑摄像头是否连接正常，浏览器的摄像头权限是否开启。<a class="link-green" href="/test/video" target="_blank">点此进行调试</a></dd>',"<dd>2、如果图像头像上传失败，请关闭AdGuard、AdBlock等广告屏蔽插件后重新拍照</dd>","<dd>3、使用最新版本的Chorme或Firefox浏览器</dd>","<dd>4、还是有问题？请点右下角小窗联系我们</dd>","</dl>","</div>","</div>",'<div class="exam-btn-wrap">','<a href="javascript:void(0);" class="return-pre js-pre">&lt;&lt; 返回上一步</a>','<a href="javascript:void(0);" class="btn btn-primary btn-auto js-next">下一步</a>','<a href="javascript:void(0);" class="js-pass" style="position:absolute;line-height:36px;top:0;left:510px;">我没有摄像头/拍照失败，跳过这一步</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this,b=a.getEl();a.videoEl=b.find("video.js-video"),a.avatarEl=b.find("img.js-avatar"),a.actionBtn=b.find("div.js-get-avatar"),a.nextBtn=b.find("a.js-next"),a.passBtn=b.find("a.js-pass"),a.initEvent(),a.initAppear(),a.startVideo()}},{name:"click a.js-pre",handler:function(){var a=this;a.fire("pre")}},{name:"click a.js-next",handler:function(a){var b=this,c=q(a.currentTarget);c.hasClass("btn-default")?w.alert("请先点击拍照"):b.fire("next")}},{name:"click div.js-get-avatar",handler:function(a){var b=this,c=b.manager.data,d=c.user,e=q(a.currentTarget),f=b.status;return s.mark(e)?void 0:f===C?(w.confirm("你已拍照成功，是否确定重拍？",function(){d.headUrl="",b.startVideo()}),void s.pause(e)):void b.getStream(function(a){if(!a)return s.pause(e);var c=b.camFixed;b.camFixed=!0,!c&&y.getVideoEl(a,b.videoEl),b.btnTxt("拍照中..."),window.setTimeout(function(){var a=x.getImageData(b.videoEl,480,360,"image/jpeg",.8);d.headUrl=a,b.startVideo(),b.btnTxt("保存中..."),b.uploadAvatar(a,function(){b.btnTxt("保存成功"),s.pause(e)},function(){d.headUrl="",b.startVideo(),w.alert("头像上传失败<br />如果使用了广告屏蔽插件请关闭插件后重试。<br />如果头像多次保存失败，请更换网络重试 或者 点击页面右下方链接跳过本步骤，继续考试。"),s.pause(e)})},c?500:2500)})}},{name:"click a.js-pass",handler:function(){var a=this;w.confirm("因拍照无法完成，你的成绩单上将没有头像，后台监控也会进行风险标识，可能会影响你的成绩，确定跳过吗？",function(){a.fire("next")})}}]},{initialize:d,initEvent:e,initAppear:f,startVideo:g,showVideo:h,showAvatar:i,getStream:j,btnTxt:k,uploadAvatar:l,_getData:m})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/step2",["nc","cpn","../util/answerCache","../util/action","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager,b.timeLeft=10}function e(){var a=this;return a.timeLeft<=0?void a.nextEl.html("开始答题").removeClass("btn-default").addClass("btn-primary"):(window.clearTimeout(a.timer),void(a.timer=window.setTimeout(function(){a.timeLeft--,a.nextEl.html("开始答题("+a.timeLeft+")"),a.countDown()},1e3)))}function f(){var a=this;window.clearTimeout(a.timer),a.timeLeft=10,a.nextEl.html("开始答题("+a.timeLeft+")")}function g(){var a=this;if(a.timeLeft=0,!a._waitStart){a._waitStart=!0;var b=a.manager;a.nextEl.html("距离考试开始还有："+r.second(b.data.leftBeginSeconds)),o.listen(w.MSG_EVENT_START_TIME_CHANGE,function(b){b>0?(a.nextEl.html("距离考试开始还有："+r.second(b)),a.moreEl.show()):(a._waitStart=!1,a.nextEl.html("开始答题").removeClass("btn-default").addClass("btn-primary"),a.moreEl.hide(),o.unlisten(w.MSG_EVENT_START_TIME_CHANGE,arguments.callee))})}}function h(){var a=this,b=a.manager;return(+b.data.leftBeginSeconds||0)<=0}function i(){var a=this,b=a.manager,c=b.statusManager.getPaperSetting().paperSummary||"";return{header:w.getStepHeader(b,w.STEP_PROTOCOL),paperSummary:c.replace(/\n/gi,"<br />")}}var j=a("nc"),k=a("cpn"),l=j.$,m=j.Clazz,n=j.Component,o=j.Event,p=j.Limit,q=j.Base,r=j.Time,s=k.CheckBox,t=k.Popup,u=a("../util/answerCache"),v=a("../util/action"),w=a("../util/util"),x=c.exports=m.create();m.mix(x,n,{_template:['<div class="exam-cover">',"#{header}",'<div class="exam-notice">','<div class="module-body">',"<h4>考试须知</h4>","<div>#{paperSummary}</div>",'<div style="margin-top:10px;display:none;" class="js-summary-more">','<div>更多笔试常见问题，详见链接：<a href="https://www.nowcoder.com/discuss/92224" target="_blank" class="link-green">https://www.nowcoder.com/discuss/92224</div>',"</div>","</div>",'<label class="checkbox">','<span class="icons"></span>我保证题目由个人独立完成，不在做题过程中获取来自网络、书籍、他人的帮助。',"</label>","</div>",'<div class="exam-btn-wrap">','<a href="javascript:void(0);" class="return-pre js-pre">&lt;&lt; 返回上一步</a>','<a href="javascript:void(0);" class="btn btn-default btn-auto js-next">开始答题(10)</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){{var a=this,b=a.getEl();a.manager}a.moreEl=b.find(".js-summary-more"),a.nextEl=b.find("a.js-next"),a.agreeChk=s.transform(b.find("label.checkbox")),a.isTestBegin()?(a.stopCountDown(),a.countDown(),a.moreEl.hide()):(a.waitStart(),a.moreEl.show())}},{name:"entryStep",type:"custom",handler:function(){var a=this;a.isTestBegin()?(a.stopCountDown(),a.countDown(),a.moreEl.hide()):(a.waitStart(),a.moreEl.show()),a.nextEl.removeClass("btn-primary").addClass("btn-default")}},{name:"leaveStep",type:"custom",handler:function(){var a=this;a.stopCountDown()}},{name:"click a.js-pre",handler:function(){var a=this;a.fire("pre")}},{name:"click a.js-next",handler:function(a){function b(){window.setTimeout(function(){return h--,0>=h?(w.closeMask(d),c()):(i.html("正在排队发卷中，请耐心等待"+h+"秒..."),void b())},1e3)}function c(){w.closeMask(d),d=w.loadMask("正在发卷中...");var a=g.data;v.beginPaper({uid:a.userId,pid:a.paperId},function(b){w.closeMask(d);var c=b.data;return c.isTestFinish?void w.gotoFinish(a.paperId):(q.extend(a,{tid:c.tid,leftSeconds:+c.leftSeconds||0,categoryStatus:c.categoryStatus,leaveCount:+c.leaveCount||0}),u.destroy(c.tid),void g.navAuto())},function(a){w.closeMask(d),t.alert(a.msg),e._noQueueUp=!0},function(){p.clear(f)})}var d,e=this,f=l(a.currentTarget),g=e.manager;if(!e.agreeChk.isChecked()||e.timeLeft>0)return void t.alert("请阅读并同意考试须知");if(!e.isTestBegin())return void t.alert("考试未开始，请耐心等待");if(!p.mark(f))if(g.dataStatus.noQueueUp||e._noQueueUp)c();else{var h=w.randomSecond(30),d=w.loadMask("正在排队发卷中，请耐心等待"+h+"秒..."),i=d.getEl().find("span.warning-word");b()}}}]},{initialize:d,countDown:e,stopCountDown:f,waitStart:g,isTestBegin:h,_getData:i})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/step3",["nc","cpn","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager}function e(){var a=this,b=a.getEl(),c=a.manager,d=c.dataStatus,e=!!d.allowCamera,f=!!d.allowGotoMenu,g=!!d.antiJumpOut,h=!!d.antiCodingJumpOut,i=[];i.push(f?"本目录页为本场考试的全部题型，你可从任一部分开始作答，答案提交后无法返回修改。":"本目录页为本场考试的全部题型，你可从任一部分开始作答，进入后需作答完毕，提交该部分答案才可返回目录页，答案提交后无法返回修改。"),i.push(e?"答题过程中全程摄像头开启，并会记录你的做题路径。":"答题过程中会记录你的做题路径。"),g&&h&&i.push('全部题型<span style="color:#ff4f2a;">（含编程题）</span>做题时禁止跳出页面，只能在考试页面进行作答，跳出三次以上将后台记录。'),g&&!h&&i.push("除编程题外的其他题型做题时禁止跳出页面，只能在考试页面进行作答，跳出三次以上将后台记录。"),!g&&h&&i.push("全部编程题做题时禁止跳出页面，只能在考试页面进行作答，跳出三次以上将后台记录。"),i=p.map(i,function(a,b){return'<p style="margin-bottom:5px;"><span class="notice-num">'+(b+1)+"</span> "+a+"</p>"}),i.unshift('<p style="margin-bottom:5px;"><i class="icon-exclamation-sign"></i> <strong style="font-size:16px;">重要提醒</strong>：</p>');var j=b.find("div.js-exam-tips");j.find("div.module-body").html(i.join("")),j.show()}function f(){{var a=this;a.manager}q.listen(u.MSG_EVENT_TIME_CHANGE,function(b){a.showTime(b)})}function g(a){var b=this;a=+a||0,b.timeEl.html(s.second(a)),b.timeEl.parent()[300>=a?"addClass":"removeClass"]("time-clock-warn")}function h(){var a=this,b=a.getEl(),c=a.manager,d=c.statusManager.getCount(),e=d.total,f=d.submit,g=b.find("div.subject-progress");e=+e||0;var h=e?100*f/e:0;g.find("div.progress-bar").width(h+"%"),g.find("span.progress-nums").html(f+"/"+e)}function i(){var a=this,b=a.manager,c=b.statusManager,d="";return p.forEach(c.getStatus(),function(a){var b=p.id(a.qstatus)===u.TYPE_STATUS_SUBMIT,e=c.getTypeScoreRule(a.qtype);d+=o.execTpl(['<div data-type="#{type}" data-qtype="#{qtype}" class="tab-menu clearfix #{examCls}">','<div class="tab-menu-tit tab-menu-item">#{name}</div>','<div class="tab-menu-item" style="width:120px;">#{count}题</div>','<div class="tab-menu-item">满分#{score}分</div>',"#{scoreRule}",'<a href="javascript:void(0);" data-type="#{type}" data-qtype="#{qtype}" class="btn #{cls}">#{desc}</a>',"</div>"].join(""),{examCls:b?"":"js-exam",cls:b?"btn-default":"btn-primary",type:a.qcategoty,qtype:a.qtype,count:a.qcount,score:p.id(a.qscore)||"未知",scoreRule:e?'<div class="tab-menu-item" style="border:none;width:210px;">'+e+"</div>":"",name:c.getTypeName(a.qcategoty),desc:b?"已提交":"开始答题"})}),d}function j(){{var a=this;a.manager}return{list:a.getBtnStr()}}var k=a("nc"),l=a("cpn"),m=k.$,n=k.Clazz,o=k.Str,p=k.Base,q=k.Event,r=k.Component,s=k.Time,t=l.Popup,u=a("../util/util"),v=c.exports=n.create();n.mix(v,r,{_template:['<div class="module-box subject-box">','<div class="subject-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span></span><span class="time-text">00:00:00</span>',"</a>","</div>",'<div class="module-body">','<div class="exam-notice js-exam-tips" style="display:none;margin-bottom:20px;"><div class="module-body" style="padding:20px 30px;"></div></div>','<div class="js-type-list">#{list}</div>','<div class="exam-btn-wrap">','<a href="javascript:void(0);" class="js-submit-test btn-commit" style="margin-top:0;">我要交卷</a>',"</div>","</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this,b=a.getEl();a.initTips(),a.timeEl=b.find("a.progress-time span.time-text"),a.initEvent()}},{name:"entryStep",type:"custom",handler:function(){var a=this,b=a.getEl();b.find("div.js-type-list").html(a.getBtnStr()),a.showProgress()}},{name:"click .js-exam",handler:function(a){var b=this,c=b.manager,d=c.dataStatus,e=m(a.currentTarget),f=e.attr("data-type"),g=e.attr("data-qtype"),h=d.allowGotoMenu,i=!!d.antiCodingJumpOut,j="4"===g;if(h||c.statusManager.isSubmitType(f))c.navExam({type:f});else{var k=j?i?'应企业要求，本场考试编程题禁止跳出页面，不支持本地IDE，请务必<span style="color:#d94140">不要跳出页面！</span>':"支持本地IDE编码后粘贴至考试界面，无跳出限制！":"",l=5,n=!1;new t({title:"提示",width:600,content:['<div class="confirm-content">','<div class="poptip-word">','<div><span class="warning-ico"></span><span class="warning-word">完成并提交本题型才可进入下一题型！<span style="color:#25bb9b;">确认进入吗？</span></span></div>',k?'<div style="font-size:16px;background:#fff3df;padding:10px 20px;margin:20px 0;color:#e08542;text-align:center;display:inline-block;">* '+k+"</div>":"","</div>","</div>"].join(""),ok:function(){return 0>=l&&c.navExam({type:f}),l>0},cancel:function(){},listeners:{close:function(){n=!0},render:function(){var a=this.okBtn;s.countDown({second:l,call:function(b){return l=b,a.html("确定("+l+"秒)"),a.removeClass("btn-primary").addClass("btn-default"),n},end:function(){l=0,a.html("确定"),a.removeClass("btn-default").addClass("btn-primary")}})}}})}}},{name:"click a.js-submit-test",handler:function(a){a.preventDefault();var b=this,c=b.manager,d=c.data,e=c.statusManager,f=e.isSubmitAllType()?"交卷后您的本场考试将结束，您将无法再返回修改作答，是否确定交卷？":"你还有部分题型未提交，交卷后将无法返回修改，建议提交全部题型后再交卷。确定要现在交卷吗？";u.log(d.userId,d.tid,"clickSubmit","finish"),t.confirm(f,function(){u.log(d.userId,d.tid,"sureSubmit","finish"),c.submitPaper(!0)})}}]},{initialize:d,initTips:e,initEvent:f,showTime:g,showProgress:h,getBtnStr:i,_getData:j})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/step5",["nc","cpn","../util/util","ncStream","../../../../util/util","../../../../util/log","../util/ossAli","../../../../action/cts","../../../../util/ajax","../../../../core/siteConfig","../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager}function e(){function a(){var a=e.isRight;f[a?"addClass":"removeClass"]("starting"),f.html('<i class="icon-status-sign"></i>'+(a?"已开启":"未开启")),g.removeClass(a?"btn-default":"btn-primary").addClass(a?"btn-primary":"btn-default"),h[a?"hide":"show"]()}var b=this;if(!b._initedPhone){b._initedPhone=!0;var c=b.getEl(),d=b.manager,e=d.phoneManager,f=c.find(".js-phone-status"),g=c.find(".js-next"),h=c.find(".js-phone-tips");e.listen("update",a),b.listen("destroy",function(){e.unlisten("update",a)}),a()}}function f(){var a=this,b=a.manager;return{header:l.getStepHeader(b,l.STEP_MOINT_PHONE),miniSrc:l.getMiniQrCode(b.data.userId)}}var g=a("nc"),h=a("cpn"),i=(g.$,g.Clazz),j=g.Component,k=(g.Base,h.Popup),l=a("../util/util"),m=c.exports=i.create();i.mix(m,j,{_template:['<div class="exam-cover">',"#{header}",'<div class="exam-tips">','<i class="icon-exclamation-sign"></i>',"请使用微信扫描屏幕下方二维码开启手机监控，考试中需一直打开小程序页面，并保持屏幕常亮，建议插上手机电源","</div>",'<div class="exam-qrcode">','<div class="exam-qrcode-img"><img src="#{miniSrc}" /></div>','<div class="exam-qrcode-status js-phone-status"><i class="icon-status-sign"></i>未开启</div>','<div class="js-phone-tips" style="color:#989898;text-align:center;font-size:14px;margin-top:10px;">手机监控状态有10秒延时</div>',"</div>",'<div class="exam-btn-wrap">','<a href="javascript:void(0);" class="return-pre js-pre">&lt;&lt; 返回上一步</a>','<a href="javascript:void(0);" class="btn btn-primary btn-auto js-next">下一步</a>','<a href="javascript:void(0);" class="js-pass" style="position:absolute;line-height:36px;top:0;left:510px;">我没有手机，跳过这一步</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this;a.initPhone()}},{name:"entryStep",type:"custom",handler:function(){var a=this;a.initPhone()}},{name:"leaveStep",type:"custom",handler:function(){}},{name:"click a.js-pre",handler:function(){var a=this;a.fire("pre")}},{name:"click a.js-next",handler:function(){var a=this,b=a.getEl(".js-phone-status");b.hasClass("starting")?a.fire("next"):k.alert("请先开启手机监控")}},{name:"click a.js-pass",handler:function(){var a=this;k.confirm("如果你不开启手机核验，我们将在你的成绩报告进行作弊风险提示，确定跳过吗？",function(){a.fire("next")})}}]},{initialize:d,initPhone:e,_getData:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/1",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx"],function(a,b,c){function d(){var a=this,b=!1,c=l.map(a.item.answers,function(a){return k.execTpl(['<a href="javascript:void(0);" class="subject-options" data-id="#{aid}">','<label class="radio">','<input value="#{aid}" type="hidden">',"<pre>#{content}</pre>","</label>","</a>"].join(""),a)}).join(""),d=i("<div></div>");d.html(c),a.getEl(".js-content").append(d);var e=a.chk=new m({el:d.find("a.subject-options label"),change:function(c){d.find("a.selected").removeClass("selected"),c.getEl().closest("a").addClass("selected"),!b&&a.fire("gotoSubmitAnswer")}});l.forEach(e.option,function(a){var b=a.getEl().parent();b.on("click",function(b){b.stopPropagation(),b.preventDefault(),a.fire("click")})});var f=(a.data.done||{}).content;f&&(b=!0,e.val(f,!0),b=!1)}function e(){var a=this;return a.chk.val()}function f(){var a=this,b=a.item;return{title:a.getTitle({type:"单选题"}),parentContent:a.getParentStr(b),content:b.content,action:a.getActionStr()}}var g=a("nc"),h=a("cpn"),i=g.$,j=g.Clazz,k=g.Str,l=g.Base,m=h.CheckGroup,n=a("./base"),o=c.exports=j.create();j.mix(o,n,{_template:['<div class="module-box subject-box">','<div class="nowcoder-topic">','<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="subject-title">#{title}</div>','<div class="subject-main">','<div class="subject-content js-content">',"#{parentContent}",'<div class="subject-question">#{content}</div>',"</div>",'<div class="subject-action clearfix">#{action}</div>',"</div>","</div>",'<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>"].join("")},{initContent:d,val:e,_getData:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/2",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx"],function(a,b,c){function d(){var a=this,b=!1,c=l.map(a.item.answers,function(a){return k.execTpl(['<a href="javascript:void(0);" class="subject-options" data-id="#{aid}">','<label class="checkbox">','<input value="#{aid}" type="hidden">',"<pre>#{content}</pre>","</label>","</a>"].join(""),a)}).join(""),d=i("<div></div>");d.html(c),a.getEl(".js-content").append(d);var e=a.chk=new m({el:d.find("a.subject-options label"),change:function(c){c.getEl().closest("a.subject-options")[c.isChecked()?"addClass":"removeClass"]("selected"),!b&&a.fire("gotoSubmitAnswer")}});l.forEach(e.option,function(a){var b=a.getEl().parent();b.on("click",function(b){b.stopPropagation(),b.preventDefault(),a.fire("click")})});var f=(a.data.done||{}).content;if(f){b=!0;var g=k.split(f,",");e.val(g,!0),b=!1}}function e(){var a=this,b=(a.chk.val()||[]).sort();return 0===b.length?"":b.join(",")}function f(){var a=this,b=a.item;return{title:a.getTitle({type:"不定项选择题"}),parentContent:a.getParentStr(b),content:b.content,action:a.getActionStr()}}var g=a("nc"),h=a("cpn"),i=g.$,j=g.Clazz,k=g.Str,l=g.Base,m=h.CheckGroup,n=a("./base"),o=c.exports=j.create();j.mix(o,n,{_template:['<div class="module-box subject-box">','<div class="nowcoder-topic">','<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="subject-title">#{title}</div>','<div class="subject-main">','<div class="subject-content js-content">',"#{parentContent}",'<div class="subject-question">#{content}</div>',"</div>",'<div class="subject-action clearfix">#{action}</div>',"</div>","</div>",'<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>"].join("")},{initContent:d,val:e,_getData:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/3",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx"],function(a,b,c){function d(){var a=this,b=(a.data.done||{}).content,c=j.split(b||"","[$##$]"),d="",e=(a.item.contents||[]).length;k.forCount(e,function(a){e>a+1&&(d+=['<div class="blank-answer">','<span class="blank-num">'+(a+1)+"</span>",'<input value="'+(c[a]||"")+'" placeholder="请在此填写答案" class="blank-content" type="text">',"</div>"].join(""))});var f=h("<div></div>");f.html(d),a.getEl(".js-content").append(f);var g=f.find("input.blank-content");k.forEach(g,function(b){h(b).on("blur",function(){a.fire("gotoSubmitAnswer")})})}function e(){var a=this,b=a.getEl("input.blank-content"),c=k.map(b,function(a){return h.trim(h(a).val())});return c.join("[$##$]")}function f(){var a=this,b=a.item,c="",d=(b.contents||[]).length;return k.forEach(b.contents,function(a,b){c+=a,d>b+1&&(c+='<span class="blank-num">'+(b+1)+"</span>")}),{title:a.getTitle({type:"填空题"}),parentContent:a.getParentStr(b),content:c,action:a.getActionStr()}}var g=a("nc"),h=(a("cpn"),g.$),i=g.Clazz,j=g.Str,k=g.Base,l=a("./base"),m=c.exports=i.create();i.mix(m,l,{_template:['<div class="module-box subject-box">','<div class="nowcoder-topic">','<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="subject-title">#{title}</div>','<div class="subject-main">','<div class="subject-content js-content">',"#{parentContent}",'<div class="subject-question">#{content}</div>',"</div>",'<div class="subject-action clearfix">#{action}</div>',"</div>","</div>",'<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>"].join("")},{initContent:d,val:e,_getData:f})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/4",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx","../../../../../util/littleAction","../../../../../action/contest","../../../../../action/note","../../../../../kit/clipboard"],function(a,b,c){function d(){{var a=this,b=a.getEl();a.manager}b.find("div.js-left-part div.js-left-top").scrollTop(0),a.initCppy(),a.initCodeEditor(),a.initCodePlayback()}function e(){var a=this;a.unReisze(),a.resize();var b;a.resizeCb=a.resizeCb||function(){window.clearTimeout(b),b=window.setTimeout(x.bind(a.resize,a),0)},u(window).on("resize",a.resizeCb)}function f(){var a=this,b=a.item,c=(b.ext||{}).samples||[],d=a.getEl(".js-sample-clipboard");x.forEach(d,function(a){var b=u(a),d=+u.trim(b.attr("data-index"))||0,e=u.trim(b.attr("data-type"))||"input",f=(c[d]||{})[e]||"";if(a){var g=new F(a,{text:function(){return f}});g.on("success",function(){B.tips("复制成功")}),g.on("error",function(){B.alert("复制失败，请手动复制")})}})}function g(){var a=this;a.unNotice(),a.noticeCb=a.noticeCb||function(){a.resize()},y.listen(D.MSG_EVENT_NOTICE_SIZE_CHNAGE,a.noticeCb)}function h(){var b=this,c=b.getEl(),d=b.data,e=b.item,f=b.manager,g=b.parent,h=d.done,i=e.ext,j=d.isExample?e.qid||(new Date).getTime():x.id(e.qid);return"2"===x.id(i.codingType)?void a.async("../../../../../component/editorSub/codeEditor/index",function(){a.async("../../../../../component/editorSub/codeFEEditor",function(a){var d=b.codeEditor=E.initFECodeEditor(a,{noAutoSize:!0,pid:f.data.paperId,tid:f.data.tid,qid:e.qid,statusExtParam:{isContest:!0},supportLang:i.supportLang,langTpl:A.getTplFEByData(i),codeEl:c.find(".js-code-editor").html(""),runInfoEl:c.find(".js-run-info"),runCodeEl:c.find(".js-run")});try{var k=h?JSON.parse(h.content):null;k&&d.resetCode(k)}catch(l){}b.fixCodeEditor(),b.initDrag(),d.listen("runCodeFinish",function(a){(a||{}).isSelfTest||(g.dones[j]={qid:e.qid,usercontent:{content:d.getJsonStr()}})})})}):void a.async("../../../../../component/editorSub/codeEditor/index",function(a){var k=i.codingType,l=b.codeEditor=E.initCodeEditor(a,{noAutoSize:!0,noCacheCode:!0,noSelfTest:d.isExample||!f.dataStatus.allowCodeSelfTest,codeHint:"keyword",pid:f.data.paperId,tid:f.data.tid,qid:e.qid,statusExtParam:{isContest:!0},selfTestRunExtParam:{userId:f.data.tid},codeJudgeType:k,langTpl:A.getTplByData(k,i,b.getLimitLang()),submitCode:h?{code:h.content,language:h.language}:null,codeEl:c.find(".js-code-editor").html(""),runInfoEl:c.find(".js-run-info"),runCodeEl:c.find(".js-run")});b.fixCodeEditor(),b.initDrag(),l.listen("runCodeFinish",function(a){(a||{}).isSelfTest||(g.dones[j]={qid:e.qid,usercontent:{content:l.valCode(),language:l.valLangue()}})})})}function i(){function a(a){a&&g.qid===a&&e.log(b())}function b(){var a=c.codeEditor;return{qid:g.qid,isExample:i,language:a?a.valLangue():"",content:a?a.valCode():""}}{var c=this,d=c.manager,e=d.codePlaybackManager,f=c.data,g=c.item,h=g.ext,i=f.isExample;"2"===x.id(h.codingType)}c.listen("entryModule",function(){e.entry(b())}),c.listen("leaveModule",function(){e.leave(b())}),c.listen("destroy",function(){e.unlisten("log",a)}),e.listen("log",a)}function j(){function a(a,j){var k=d.height(),l=f.outerHeight(),a=Math.max(60,a+j),m=k-l-a,n=i.outerHeight(),o=m-n;100>o&&(o=100,m=o+n,a=k-m-l),e.outerHeight(m),g.outerHeight(a),b.findEl(".js-run-info").outerHeight(g.height()),h.outerHeight(o),c&&c.resize(null,o);var p=b.manager.chat;if(p){var q=a+l+n;p.getEl().css("bottom",q),p.holderEl.css("bottom",q)}}var b=this,c=(b.getEl(),b.codeEditor);if(c){var d=b.findEl("div.coding-main"),e=b.findEl(".js-right-top"),f=b.findEl(".js-right-center"),g=b.findEl(".js-right-bottom"),h=b.findEl(".js-code-editor"),i=b.findEl(".js-toggle-angle");new z({drag:i,listeners:[{name:"start",handler:function(){!e.hasClass("open")||c&&c.isFullScreen||(this._bottomHeight=g.outerHeight(),i.attr(H,"1"))}},{name:"drag",handler:function(){if(!(!e.hasClass("open")||c&&c.isFullScreen)){var b=this._downY-this._moveY;a(this._bottomHeight,b)}}},{name:"drop",handler:function(){!e.hasClass("open")||c&&c.isFullScreen||(this._bottomHeight=null,window.setTimeout(function(){i.removeAttr(H)},0))}}]})}}function k(){var a=this;a.resizeCb&&u(window).unbind("resize",a.resizeCb)}function l(){var a=this;a.noticeCb&&y.unlisten(D.MSG_EVENT_NOTICE_SIZE_CHNAGE,a.noticeCb)}function m(){var a=this,b=a.getEl(),c=u(window),d=u("div.nk-main"),e=a.findEl(".js-left-part"),f=b.find("div.coding-main"),g=b.find("div.subject-progress");d.outerWidth(c.width()).outerHeight(c.height());var h=d.width(),i=d.height()-g.outerHeight(),j=.35*h;e.outerHeight(i),e.outerWidth(j);var k=a.findEl(".js-left-top"),l=a.findEl(".js-left-bottom");l.height("auto"),k.outerHeight(i-l.outerHeight()),f.outerHeight(i),f.css("marginLeft",j),a.resizeRight()}function n(){var a=this,b=a.getEl(),c=(a.findEl(".js-code-container"),a.codeEditor);if(!c||!c.isFullScreen){var d=b.find("div.coding-main"),e=a.findEl(".js-right-top"),f=a.findEl(".js-right-center"),g=a.findEl(".js-right-bottom"),h=a.findEl(".js-code-editor"),i=e.hasClass("open"),j=d.height(),k=f.outerHeight(),l=i?Math.max(.2*j,60):0;e.outerHeight(j-l-k),g.outerHeight(l)[i?"show":"hide"](),a.findEl(".js-run-info").outerHeight(g.height());var m=a.findEl(".js-toggle-angle").outerHeight(),n=Math.max(100,e.height()-m);h.outerHeight(n),c&&c.resize(null,n);var o=a.manager,p=o.chat;if(p){var q=l+k+m;p.getEl().css("bottom",q),p.holderEl.css("bottom",q)}}}function o(){var a=this,b=a.manager,c=a.item,d=a.data,e=c.ext,f=d.isExample,g=b.dataStatus.antiCodingJumpOut,h=[];if(f)h.push("例题说明："),h.push("1、本题目为例题，不计分。"),h.push("2、在代码框中选择你擅长的语言，标准的输入输出代码将显示在代码框中，请作为参考。"),h.push("3、本次考试正式编程题均将遵循此输入输出规范，如已掌握规范请跳过此题，点击屏幕右下方“开始答题”按钮进入正式考题。"),h.push("4、在完成正式编程考题前，如果输入输出格式遇到问题，你可通过答题卡随时切换回本例题进行参考。");else{var i=x.id(e.codingType);"0"===i||"1"===i?("timeLimit"in e&&h.push("时间限制：C/C++ "+(e.timeLimit||1)+"秒，其他语言 "+2*(e.timeLimit||1)+"秒"),"memoryLimit"in e&&h.push("空间限制：C/C++ "+(e.memoryLimit||1)+"K，其他语言 "+2*(e.memoryLimit||1)+"K")):("timeLimit"in e&&h.push("时间限制："+(e.timeLimit||1)+"秒"),"memoryLimit"in e&&h.push("空间限制："+e.memoryLimit+"K"));var j=a.getLimitLang();if(j.length>0){var k=A.getTplByData(i,e,j);k=A.checkTpl(i,k),h.push("语言限定："+x.map(k,function(a){return a?A.getNameById(a.id):""}).join(", "))}}var l=['<div class="subject-question">',c.content,"</div>","<div>",e.inputDesc?'<h2 style="font-size:14px;font-weight:bold;">输入描述:</h2><pre>'+e.inputDesc+"</pre>":"",e.outputDesc?'<h2 style="font-size:14px;font-weight:bold;">输出描述:</h2><pre>'+e.outputDesc+"</pre>":"","</div>"];return x.forEach(e.samples,function(a,b){a=a||{};var c=u.trim(a.input),d=u.trim(a.output),e=u.trim(a.note);(c||d||e)&&l.push(['<div class="question-oi">','<div class="question-oi-hd" style="font-size:14px;font-weight:bold;">示例'+(b+1)+"</div>",'<div class="question-oi-bd">',c?'<div class="question-oi-mod"><h2>输入</h2><a class="code-copy-btn js-sample-clipboard" data-type="input" data-index="'+b+'" href="javascript:void(0);">复制</a></div><div class="question-oi-cont"><pre>'+w.encodeHTML(a.input)+"</pre></div>":"",d?'<div class="question-oi-mod"><h2>输出</h2><a class="code-copy-btn js-sample-clipboard" data-type="output" data-index="'+b+'" href="javascript:void(0);">复制</a></div><div class="question-oi-cont"><pre>'+w.encodeHTML(a.output)+"</pre></div>":"",e?'<div class="question-oi-mod"><h2>说明</h2></div><div class="question-oi-cont"><pre>'+a.note+"</pre></div>":"","</div>","</div>"].join(""))}),l.push(e.hint?'<h2 style="font-size:14px;font-weight:bold;">备注:</h2><pre>'+e.hint+"</pre>":""),{title:a.getTitle({type:"编程题",name:c.title}),content:l.join(""),intr:h.join("<br />"),questionWarn:g?'<div class="nk-warning question-warning">应企业要求，本场考试编程题禁止跳出页面，不支持本地IDE，请使用考试系统提供的在线自测进行调试。</div>':f?"":'<div class="nk-warning">本题可使用本地IDE编码，不做跳出限制，编码后请点击“保存并调试”按钮进行代码提交。</div>',runBtn:f?"":'<button class="btn btn-blue btn-large btn-block js-run">保存并调试</button>',action:a.getActionStr(),tips:f?"本题为输入输出规范例题，不计分。如已熟悉规范，请直接进入下一题。":"保存并调试之后，这里将会显示运行结果。"}}function p(){var a=this,b=a.item;return b.languageLimit?b.languageList||[]:[]}function q(a){var b=this,c=(b.getEl(),b.findEl(".js-code-container")),d=c.find("div.subject-content"),e=d.hasClass("open");e&&a!==!1||!e&&a===!1||(d[a===!1?"removeClass":"addClass"]("open"),c.find(".js-toggle-angle").css("cursor",a===!1?"pointer":"ns-resize"),b.resizeRight())}function r(){var a=this,b=a.codeEditor;b&&(b.showResult=function(a,b,c){var d=this,e=d.rawConfig,f=e.tipEl;if(a=u.trim(a),!a)return f.html("").hide();f.css("color",b===!0?"#b6b79a":"#00bc9b");var g=c?"<div>自测结果</div>":"";g+=b===!1?'<div class="ico-passed">通过</div>':b===!0?'<div class="ico-unpass">不通过</div>':"",g+="<div>"+a.replace(/\n/g,"<br />")+"</div>",f.html(g)},b.listen("beforeRunCode",function(){a.openTab()}),b.listen("fullScreen",function(b){!b&&a.resizeRight()}),a.resizeRight())}var s=a("nc"),t=a("cpn"),u=s.$,v=s.Clazz,w=s.Str,x=s.Base,y=s.Event,z=s.DragDrop,A=s.CodeLang,B=t.Popup,C=a("./base"),D=a("../../util/util"),E=a("../../../../../util/littleAction"),F=a("../../../../../kit/clipboard"),G=c.exports=v.create(),H="data-drag";v.mix(G,C,{_template:["<div>",'<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="js-left-part coding-side-bar" style="overflow:hidden;padding:0;">','<div class="js-left-top" style="overflow-y:auto;padding:0 10px;">','<div class="subject-title test-title">#{title}</div>','<div class="question-intr">#{intr}</div>',"#{questionWarn}",'<div class="module-box subject-box">','<div class="module-head clearfix"><h1>题目描述</h1></div>','<div class="subject-main"><div class="subject-content js-question-main">#{content}</div></div>',"</div>","</div>",'<div class="js-left-bottom clearfix">','<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv" style="padding:10px;"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>","</div>",'<div class="coding-main" style="overflow:hidden;padding-bottom:0;margin-bottom:0;">','<div class="js-code-container">','<div class="subject-content js-right-top" style="overflow:hidden">','<div class="js-code-editor"><div style="color:#fff;padding:20px 0;text-align:center;">编辑器加载中...</div></div>','<span class="icon-angle-down js-toggle-angle" style="cursor:pointer;"></span>',"</div>",'<div class="js-right-center subject-action clearfix" style="margin:0;">',"#{runBtn}","#{action}","</div>",'<div class="passed-wrapper js-right-bottom" style="margin:0;padding:5px 10px;overflow:hidden;display:none;">','<div class="js-run-info" style="margin:0;overflow-y:auto;color:#00bc9b;">#{tips}</div>',"</div>","</div>","</div>","</div>"].join(""),listeners:[{name:"cardFold",type:"custom",handler:function(){var a=this;a.resize()}},{name:"entryModule",type:"custom",handler:function(){var a=this,b=a.manager;a.initResize(),a.initNotice(),b.chat&&b.chat.stopFixBottom()}},{name:"leaveModule",type:"custom",handler:function(){var a=this,b=a.manager;a.unReisze(),a.unNotice(),b.chat&&b.chat.stopFixBottom(!1)}},{name:"click .js-toggle-angle",handler:function(a){var b=this,c=u(a.currentTarget);if("1"!==c.attr(H)){var d=b.findEl(".js-code-container"),e=d.find("div.subject-content"),f=e.hasClass("open");b.openTab(!f)}}}]},{initContent:d,initResize:e,initNotice:g,initCppy:f,initCodeEditor:h,initCodePlayback:i,initDrag:j,unReisze:k,unNotice:l,resize:m,resizeRight:n,getLimitLang:p,openTab:q,fixCodeEditor:r,_getData:o})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/5",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx","../../util/action","../../../../../component/popupSub/popupScanUpload","../../../../../action/common"],function(a,b,c){function d(){var a=this;a.editorCb=[]}function e(){var a=this;a.initEditor(function(b){b.waitCreated(function(){var c=a.item,d=a.data.done,e=a.getCache(c),f=e||(d||{}).content||"";b.val(f)})})}function f(b){var c=this;if(c.txtEditor)return b&&b(c.txtEditor);if(c.editorCb.push(b),!(c.editorCb.length>1)){var d=c.getEl(),e=c.parent,f=c.manager,g=c.item;a.async("../../../../../component/editorSub/hEditor/index",function(a){var b=null,h=d.find(".js-txt-count"),i=c.txtEditor=new a({renderTo:d.find(".js-temp-tips"),renderBy:"replaceWith",noUploadRemote:!0,content:"",height:250,toolbarFixedTop:s.getNavHeight(),keConf:{uploadJson:"/cts/file/upload",extraFileUploadParams:{uid:f.data.userId,type:t.uploadType.data},items:"bold,italic,underline,|,bockquote,codeblock,insertorderedlist,insertunorderedlist,|,image,|,table,subscript,superscript,removeformat".split(",")},afterFocus:function(){window.clearTimeout(b),b=window.setTimeout(function(){e.forbidBlurWindowItem&&e.forbidBlurWindowItem.focus()},0)},afterBlur:function(){window.clearTimeout(b),e.forbidBlurWindowItem&&e.forbidBlurWindowItem.blur(),c.fire("gotoSubmitAnswer")},afterChange:function(){h.html("<span>字数：</span>"+this.count()).show()},draftChange:function(a){c.setCache(g,a)}});i.waitCreated(function(){i.getToolbarEl().find(".ke-toolbar-icon").on("click",function(){window.setTimeout(function(){i.rawConfig.afterFocus()},50)})}),m.forEach(c.editorCb,function(a){a&&a(i)}),c.editorCb.length=0})}}function g(){var a=this;return a.txtEditor.val()}function h(){var a=this,b=a.item,c=['<h2 class="subject-item-title">题目描述</h2>','<div class="subject-question">',b.content,"</div>",'<div class="subject-anwser-tip">如需画图或推导，你可以在草稿纸上作答，手机拍照后<a href="javascript:void(0)" class="link-green js-upload-tips">点此扫码上传</a></div>'].join("");return{title:a.getTitle({type:"问答题"}),content:c,action:a.getActionStr()}}var i=a("nc"),j=a("cpn"),k=i.$,l=i.Clazz,m=(i.Str,i.Base),n=i.Limit,o=j.Popup,p=a("./base"),q=a("../../util/util"),r=a("../../util/action"),s=a("../../../../../util/util"),t=a("../../../../../core/siteConfig"),u=a("../../../../../component/popupSub/popupScanUpload"),v=c.exports=l.create();l.mix(v,p,{_template:['<div class="module-box subject-box">','<div class="nowcoder-topic">','<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="subject-title">#{title}</div>','<div class="subject-main nowcoder-topic-body js-question-main">#{content}</div>',"</div>",'<div class="nowcoder-topic-answer subject-des" style="margin-bottom:0;margin-top:0;padding-top:0;">','<div class="editor-box">','<div class="js-temp-tips" style="font-size:14px;text-align:center;padding:50px 0;">编辑器加载中...</div>','<div class="txt-status-num js-txt-count" style="margin-bottom:20px;text-align:right;display:none;"><span>字数：</span>0</div>',"</div>",'<div class="subject-action clearfix">','<a href="javascript:void(0);" class="btn btn-blue js-save-answer">保存</a>',"#{action}","</div>","</div>",'<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>"].join(""),listeners:[{name:"destroy",type:"custom",handler:function(){var a=this;a.txtEditor&&a.txtEditor.destroy()}},{name:"click .js-save-answer",handler:function(){var a=this,b=a.getEl(),c=a.txtEditor,d=a.item,e=a.manager,f=a.getQid(d);f&&c&&(n.mark(b)||(c.waitCreated(function(){var b=a.val();r.submitQuestion(e.data.tid,f,{content:b},function(){a.markSend(d),o.ok("保存成功")},function(){o.alert("保存失败，请重试")})}),n.pause(b,1e3)))}},{name:"click a.js-upload-tips",handler:function(){var a=this,b=a.manager,c=a.item,d=b.data;u.show({data:{syncType:t.syncType.ctsTest,uid:d.userId,entityId:c.qid,ownerId:d.tid},cloud:{domain:d.mDomain,urlQuery:{cloud:q.isTxYun()?"tx":""}},call:function(b){var c=a.txtEditor;b=k.trim(b).replace(/^https/,"http"),c&&b&&c.waitCreated(function(){try{c.getEditor().exec("insertimage",b)}catch(a){}})}})}}]},{initialize:d,initContent:e,initEditor:f,val:g,_getData:h})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/6",["nc","cpn","./base","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx","../../../../../util/upload","../../../../../lib/swfupload","../../../../../action/code"],function(a,b,c){function d(){function a(a){n.submitDmInPaper({body:{pid:d.data.paperId,tid:d.data.tid,qid:f.qid,url:a},call:function(c){e.dones[i.id(f.qid)]={qid:f.qid,usercontent:{urls:a}},window.clearTimeout(g),g=setTimeout(function(){var a=arguments.callee;n.newDmStatus({query:{submissionId:c.submissionId},call:function(c){c=c||{};var d=c.status;if(5===d){var e=c.desc+"<br />"+c.memo;b(e,"info"),g=null}else{if(0===d||23===d||19===d||100===d){g=setTimeout(a,500);var e=c.desc+"<br />"+c.memo;return void b(e,"info")}var e=c.desc+"<br />"+c.memo;b(e),g=null}},error:function(){b("出现错误，请重试")}})},500)},error:function(){b("出现错误，请重试")}})}function b(a,b){var d=c.findEl(".js-dm-subject-info"),e="info"===b;d.removeClass(e?"alert-danger":"alert-info").addClass(e?"alert-info":"alert-danger"),d.html(a.replace(/\n/g,"<br />")).show(),d.parent().show()}{var c=this,d=(c.getEl(),c.manager),e=c.parent,f=c.item;c.data.done}new l({target:c,url:"/cts/file/upload",postParam:{uid:d.data.userId,type:m.uploadType.data},holderEl:c.findEl("a.js-subject-upload"),type:m.uploadType.data,fileType:"*.txt",fileQueueLimit:1,btn:{image:"//uploadfiles.nowcoder.com/images/20170720/56_1500535196899_0D6F0B229817E61B74168FFDD350D585",width:150,height:45},uploadSuccess:function(b,d){c.findEl(".subject-upload-text").html("已上传: "+d.fileName),a(d.url)}});var g}function e(){var a=this,b=a.item,c=b.ext||{},d=a.data.done||{},e=h.execTpl(["<div>",'<h2 class="subject-item-title">题目描述</h2>','<div class="subject-question">#{content}</div>','<h2 class="subject-item-title">数据获取</h2>','<div class="subject-upload">','<div class="subject-des">#{fileDescription}</div>','<div class="subject-upload-inner clearfix">','<span class="down-file-name">mnist_train_test.zip</span>','<div class="down-files-btnbox">','<a data-prevent="0" class="btn btn-primary down-files" target="_blank" href="#{fileDownload2}">普通下载</a>','<a data-prevent="0" class="btn btn-primary down-files" target="_blank" href="#{fileDownload1}">高速下载</a>',"</div>","</div>","</div>","</div>"].join(""),{content:b.content,fileDescription:c.fileDescription,fileDownload2:c.fileDownload2||"javascript:void(0);",fileDownload1:c.fileDownload1||"javascript:void(0);"}),f=(d.urls||"").split(",")[0]||"",g=f?"已上传: "+k.getFileName(f):"上传数据结果文件,格式仅限txt文件";return{title:a.getTitle({type:"数据挖掘"}),content:e,uploadTxt:g,action:a.getActionStr()}}var f=a("nc"),g=(a("cpn"),f.$,f.Clazz),h=f.Str,i=f.Base,j=a("./base"),k=a("../../../../../util/util"),l=a("../../../../../util/upload"),m=a("../../../../../core/siteConfig"),n=a("../../../../../action/code"),o=c.exports=g.create();g.mix(o,j,{_template:['<div class="module-box subject-box">','<div class="nowcoder-topic">','<div class="subject-progress js-progress">','<div class="progress"><div style="width:0%" class="progress-bar"></div></div>','<span class="progress-nums">0/0</span>','<a href="javascript:void(0);" class="progress-time time-clock">','<i class="ico-time-control"></i><span>距考试结束：</span><span class="time-text js-time">00:00:00</span>',"</a>","</div>",'<div class="subject-title">#{title}</div>','<div class="subject-main nowcoder-topic-body js-question-main">#{content}</div>',"</div>",'<div class="nowcoder-topic-answer subject-des js-dm-container" style="margin-bottom:0;margin-top:0;padding-top:0;">',"<div>",'<div class="subject-upload">','<div class="subject-upload-inner">','<a class="btn-upload2 js-subject-upload" href="javascript:void(0);"></a>','<span class="subject-upload-text">#{uploadTxt}</span>',"</div>","</div>",'<div class="subject-info">','<div class="alert alert-danger js-dm-subject-info" style="display:none;"></div>',"</div>",'<div class="subject-action clearfix">#{action}</div>',"</div>","</div>",'<div class="answer-sheet-box open js-pager"></div>','<div class="subject-main js-go-menu-dv"><a href="javascript:void(0);" class="js-go-menu">&lt;&lt;返回全部题型</a></div>',"</div>"].join("")},{initContent:d,_getData:e})});
define("nowcoder/1.2.1082/javascripts/site/cts/testV2/step/type/base",["nc","cpn","../../util/answerCache","../../util/util","ncStream","../../../../../util/util","../../../../../util/log","../../util/ossAli","../../../../../action/cts","../../../../../util/ajax","../../../../../core/siteConfig","../../util/ossTx"],function(a,b,c){function d(a){var b=this;b.manager=a.manager,b.parent=a.parent,b.data=a.data,b.item=b.data.item}function e(){var a=this,b=a.getEl(),c=a.data,d=a.item,e=!c.isExample&&c.index+1>=c.itemCount,f=c.isExample&&c.index+1>=c.exampleCount;b.find("a.js-next").html(f?"开始答题":"下一题")[e?"hide":"show"](),b.find("a.js-submit")[e?"show":"hide"](),"4"!==C.id(d.type)&&b.find("a.js-next").closest("div.subject-next")[e?"addClass":"removeClass"]("fn-center")}function f(a){var b=this,c=b.getEl(".js-pager"),d=b.parent,e=b.data,f=C.toMap(d.getDonesIndex(),function(a){return{key:C.id(a),value:!0}}),g=['<a href="javascript:void(0)" class="card-unfold">收起答题卡 <i class="icon-angle-down"></i></a>','<a href="javascript:void(0)" class="card-fold">展开答题卡 <i class="icon-angle-up"></i></a>','<ul class="answer-sheet-num clearfix">'].join("");C.forEach([e.exampleCount,e.itemCount],function(a,b){var c=0===b;C.forCount(a,function(b){var d=(e.isExample&&c||!e.isExample&&!c)&&b===e.index,h=c||f[b];g+=B.execTpl('<li data-type="#{type}" data-index="#{index}"><a href="javascript:void(0);" class="#{cls}">#{order}</a></li>',{type:c?I:J,index:b,order:c?"例"+(a>1?b+1:""):(e.multiIndex||[])[b]||"--",cls:d?"answering-num":h?"answer-done":""})})}),g+="</ul>",c.html(g),a||(c.unbind(),c.on("click",".card-unfold,.card-fold",function(a){var d=y(a.currentTarget);c[d.hasClass("card-unfold")?"removeClass":"addClass"]("open"),b.fire("cardFold")}),c.on("click","ul.answer-sheet-num li",function(a){var c=y(a.currentTarget),d=c.attr("data-type")===I,e=+c.attr("data-index")||0;b.fire("gotoQuestion",e,d)}))}function g(){var a=this,b=a.getEl(),c=a.data,d=b.find("div.js-progress"),e=c.isExample?0:(+c.index||0)+1,f=+c.itemCount||0,g=f?100*e/f:0;d.find("div.progress-bar").width(g+"%"),d.find("span.progress-nums").html(e+"/"+f)}function h(){}function i(){var a=this,b=a.manager,c=a.getEl(".js-go-menu");b.dataStatus.allowGotoMenu?c.on("click",function(){a.fire("gotoMenu")}):(c.remove(),a.getEl(".js-go-menu-dv").remove())}function j(){var a=this,b=a.getEl();b.on("click",".js-question-main img",function(a){a.stopPropagation(),a.preventDefault();var b=y(a.currentTarget),c=y.trim(b.attr("src"));c&&E.show(c)}),b.on("click","a.js-next",function(){a.fire("gotoNext")}),b.on("click","a.js-submit",function(){var b=(a.manager||{}).data||{};G.log(b.userId,b.tid,"clickSubmit",a.parent.type),a.fire("gotoSubmitType")})}function k(){return""}function l(){var a=this;a.initPager(!0)}function m(a){var b=this,c=b.findEl(".js-time");c.html(D.second(a)),c.parent()[300>=a?"addClass":"removeClass"]("time-clock-warn")}function n(a){var b=this;b._elCache=b._elCache||{};var c=b._elCache[a];return c||(c=b._elCache[a]=b.getEl(a)),c}function o(a){var b=this,c=b.data,d=b.manager,e=b.item,f=C.id(e.score);return B.execTpl("#{example}[#{type}#{score}] #{name}",{example:c.isExample?'<span class="tag-label tag-test">例题</span>':"",type:d.statusManager.getTypeName(c.type)||a.type,score:f?"|"+f+"分":"",name:a.name})}function p(){return['<div class="subject-next">','<a href="javascript:void(0);" class="btn warning-btn js-submit" style="display:none;">提交本题型</a>','<a href="javascript:void(0);" class="btn btn-primary js-next" style="display:none">下一题</a>',"</div>"].join("")}function q(a){var b=y.trim((a||{}).parentContent);return b&&(b=['<div class="subject-question-wrap js-parent-content open clearfix">','<div class="subject-question">',b,"</div>",'<a href="javascript:void(0);" class="subject-fold link-green js-parent-fold" data-type="0">收起 <i class="icon-angle-up"></i></a>','<a href="javascript:void(0);" class="subject-unfold link-green js-parent-fold" data-type="1">展开详情 <i class="icon-angle-down"></i></a>',"</div>"].join("")),b}function r(){var a=this,b=a.manager||{};return C.id((b.data||{}).tid)}function s(a){return C.id((a||{}).qid)}function t(a){var b=this,c=b.getTid(),d=b.getQid(a),e=F.get(c,d);return(e||{}).content||""}function u(a,b){var c=this,d=c.getTid(),e=c.getQid(a);F.set(d,e,{tid:d,qid:e,content:b})}function v(a){var b=this,c=b.getTid(),d=b.getQid(a);F.markSend(c,d)}var w=a("nc"),x=a("cpn"),y=w.$,z=w.Clazz,A=w.Component,B=w.Str,C=w.Base,D=w.Time,E=x.PopupImage,F=a("../../util/answerCache"),G=a("../../util/util"),F=a("../../util/answerCache"),H=c.exports=z.create(),I="example",J="question";z.mix(H,A,{_template:'<div style="font-size:14px;text-align:center;padding:20px 0;">看到这条信息表示出问题啦，赶快联系管理员~</div>',listeners:[{name:"render",type:"custom",handler:function(){var a=this;a.initPager(),a.initNextAndSubmit(),a.initProgress(),a.initContent(),a.initGoBack(),a.initAction()}},{name:"click .js-parent-fold",handler:function(a){var b=y(a.currentTarget),c=b.closest(".js-parent-content"),d="1"===b.attr("data-type");c[d?"addClass":"removeClass"]("open")}}]},{initialize:d,initNextAndSubmit:e,initPager:f,initProgress:g,initContent:h,initGoBack:i,initAction:j,val:k,refresh:l,showTime:m,findEl:n,getTitle:o,getActionStr:p,getParentStr:q,getTid:r,getQid:s,getCache:t,setCache:u,markSend:v})});
function FileProgress(a,b){if(this.fileProgressID=a.id,this.opacity=100,this.height=0,this.fileProgressWrapper=document.getElementById(this.fileProgressID),this.fileProgressWrapper)this.fileProgressElement=this.fileProgressWrapper.firstChild,this.reset();else{this.fileProgressWrapper=document.createElement("div"),this.fileProgressWrapper.className="progressWrapper",this.fileProgressWrapper.id=this.fileProgressID,this.fileProgressElement=document.createElement("div"),this.fileProgressElement.className="progressContainer";var c=document.createElement("a");c.className="progressCancel",c.href="#",c.style.visibility="hidden",c.appendChild(document.createTextNode(" "));var d=document.createElement("div");d.className="progressName",d.appendChild(document.createTextNode(a.name));var e=document.createElement("div");e.className="progressBarInProgress";var f=document.createElement("div");f.className="progressBarStatus",f.innerHTML="&nbsp;",this.fileProgressElement.appendChild(c),this.fileProgressElement.appendChild(d),this.fileProgressElement.appendChild(f),this.fileProgressElement.appendChild(e),this.fileProgressWrapper.appendChild(this.fileProgressElement),document.getElementById(b).appendChild(this.fileProgressWrapper)}this.height=this.fileProgressWrapper.offsetHeight,this.setTimer(null)}function cancelQueue(a){document.getElementById(a.customSettings.cancelButtonId).disabled=!0,a.stopUpload();var b;do b=a.getStats(),a.cancelUpload();while(0!==b.files_queued)}var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)}),SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete SWFUpload.instances[this.movieName],b}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(a){if("string"!=typeof a||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return path=0>=b?"/":window.location.pathname.substr(0,b)+"/",path+a},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=void 0==this.settings[a]?b:this.settings[a]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div"),b.innerHTML=this.getFlashHTML(),a.parentNode.replaceChild(b.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(b),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"="+encodeURIComponent(a[c].toString()));return b.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if(a=this.getMovieElement(),a&&"unknown"==typeof a.CallFunction){for(var b in a)try{"function"==typeof a[b]&&(a[b]=null)}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(e){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(a,b,c){return this.settings[a]=void 0==b?c:b},SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])},SWFUpload.prototype.cancelUpload=function(a,b){b!==!1&&(b=!0),this.callFlash("CancelUpload",[a,b])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])},SWFUpload.prototype.getFile=function(a){return"number"==typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])},SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])},SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString(),this.callFlash("SetUploadURL",[a])},SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a,this.callFlash("SetPostParams",[a])},SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a,this.settings.file_types_description=b,this.callFlash("SetFileTypes",[a,b])},SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a,this.callFlash("SetFileSizeLimit",[a])},SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a,this.callFlash("SetFileUploadLimit",[a])},SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a,this.callFlash("SetFileQueueLimit",[a])},SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a,this.callFlash("SetFilePostName",[a])},SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a,this.callFlash("SetUseQueryString",[a])},SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a,this.callFlash("SetRequeueOnError",[a])},SWFUpload.prototype.setHTTPSuccess=function(a){"string"==typeof a&&(a=a.replace(" ","").split(",")),this.settings.http_success=a,this.callFlash("SetHTTPSuccess",[a])},SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a,this.callFlash("SetAssumeSuccessTimeout",[a])},SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a,this.callFlash("SetDebugEnabled",[a])},SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a=""),this.settings.button_image_url=a,this.callFlash("SetButtonImageURL",[a])},SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a,this.settings.button_height=b;var c=this.getMovieElement();void 0!=c&&(c.style.width=a+"px",c.style.height=b+"px"),this.callFlash("SetButtonDimensions",[a,b])},SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a,this.callFlash("SetButtonText",[a])},SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b,this.settings.button_text_left_padding=a,this.callFlash("SetButtonTextPadding",[a,b])},SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a,this.callFlash("SetButtonTextStyle",[a])},SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a,this.callFlash("SetButtonDisabled",[a])},SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a,this.callFlash("SetButtonAction",[a])},SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a,this.callFlash("SetButtonCursor",[a])},SWFUpload.prototype.queueEvent=function(a,b){void 0==b?b=[]:b instanceof Array||(b=[b]);var c=this;if("function"==typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"==typeof a&&a.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(a){var b,c=/[$]([0-9a-f]{4})/i,d={};if(void 0!=a){for(var e in a.post)if(a.post.hasOwnProperty(e)){b=e;for(var f;null!==(f=c.exec(b));)b=b.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)));d[b]=a.post[e]}a.post=d}return a},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}},SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();return a?(this.cleanUp(a),void this.queueEvent("swfupload_loaded_handler")):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&"unknown"==typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"==typeof a[b]&&(a[b]=null)}catch(c){}}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("file_queued_handler",a)},SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("file_queue_error_handler",[a,b,c])},SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])},SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("return_upload_start_handler",a)},SWFUpload.prototype.returnUploadStart=function(a){var b;if("function"==typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0),b=!!b,this.callFlash("ReturnUploadStart",[b])},SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_progress_handler",[a,b,c])},SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_error_handler",[a,b,c])},SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_success_handler",[a,b,c])},SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("upload_complete_handler",a)},SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)},SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var b,c=[];if("object"==typeof a&&"string"==typeof a.name&&"string"==typeof a.message){for(var d in a)a.hasOwnProperty(d)&&c.push(d+": "+a[d]);b=c.join("\n")||"",c=b.split("\n"),b="EXCEPTION: "+c.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(a)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+d.name+" Message: "+d.message)}};var SWFUpload;"function"==typeof SWFUpload&&(SWFUpload.queue={},SWFUpload.prototype.initSettings=function(a){return function(){"function"==typeof a&&a.call(this),this.queueSettings={},this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0,this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler,this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler,this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler,this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler,this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(SWFUpload.prototype.initSettings),SWFUpload.prototype.startUpload=function(a){this.queueSettings.queue_cancelled_flag=!1,this.callFlash("StartUpload",[a])},SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=!0,this.stopUpload();for(var a=this.getStats();a.files_queued>0;)this.cancelUpload(),a=this.getStats()},SWFUpload.queue.uploadStartHandler=function(a){var b;return"function"==typeof this.queueSettings.user_upload_start_handler&&(b=this.queueSettings.user_upload_start_handler.call(this,a)),b=b===!1?!1:!0,this.queueSettings.queue_cancelled_flag=!b,b},SWFUpload.queue.uploadCompleteHandler=function(a){var b,c=this.queueSettings.user_upload_complete_handler;if(a.filestatus===SWFUpload.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++,b="function"==typeof c?c.call(this,a)===!1?!1:!0:a.filestatus===SWFUpload.FILE_STATUS.QUEUED?!1:!0){var d=this.getStats();d.files_queued>0&&this.queueSettings.queue_cancelled_flag===!1?this.startUpload():this.queueSettings.queue_cancelled_flag===!1?(this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]),this.queueSettings.queue_upload_count=0):(this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)}}),FileProgress.prototype.setTimer=function(a){this.fileProgressElement.FP_TIMER=a},FileProgress.prototype.getTimer=function(){return this.fileProgressElement.FP_TIMER||null},FileProgress.prototype.reset=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[2].innerHTML="&nbsp;",this.fileProgressElement.childNodes[2].className="progressBarStatus",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width="0%",this.appear()},FileProgress.prototype.setProgress=function(a){this.fileProgressElement.className="progressContainer green",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width=a+"%",this.appear()},FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue",this.fileProgressElement.childNodes[3].className="progressBarComplete",this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){a.disappear()},1e4))},FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){a.disappear()},5e3))},FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){a.disappear()},2e3))},FileProgress.prototype.setStatus=function(a){this.fileProgressElement.childNodes[2].innerHTML=a},FileProgress.prototype.toggleCancel=function(a,b){if(this.fileProgressElement.childNodes[0].style.visibility=a?"visible":"hidden",b){var c=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){return b.cancelUpload(c),!1}}},FileProgress.prototype.appear=function(){if(null!==this.getTimer()&&(clearTimeout(this.getTimer()),this.setTimer(null)),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(a){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"}else this.fileProgressWrapper.style.opacity=1;this.fileProgressWrapper.style.height="",this.height=this.fileProgressWrapper.offsetHeight,this.opacity=100,this.fileProgressWrapper.style.display=""},FileProgress.prototype.disappear=function(){var a=15,b=4,c=30;if(this.opacity>0)if(this.opacity-=a,this.opacity<0&&(this.opacity=0),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(d){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}else this.fileProgressWrapper.style.opacity=this.opacity/100;if(this.height>0&&(this.height-=b,this.height<0&&(this.height=0),this.fileProgressWrapper.style.height=this.height+"px"),this.height>0||this.opacity>0){var e=this;this.setTimer(setTimeout(function(){e.disappear()},c))}else this.fileProgressWrapper.style.display="none",this.setTimer(null)},function(){"function"==typeof SWFUpload&&(SWFUpload.prototype.initSettings=function(a){return function(b){"function"==typeof a&&a.call(this,b),this.refreshCookies(!1)}}(SWFUpload.prototype.initSettings),SWFUpload.prototype.refreshCookies=function(a){a!==!1&&(a=!0);var b,c,d,e,f,g=this.getSetting("post_params"),h=document.cookie.split(";"),i=h.length;for(b=0;i>b;b++){for(c=h[b];" "==c.charAt(0);)c=c.substring(1,c.length);d=c.indexOf("="),d>0&&(e=c.substring(0,d),f=c.substring(d+1),g[e]=f)}a&&this.setPostParams(g)})}(window),"function"==typeof define&&define("nowcoder/1.2.1082/javascripts/lib/swfupload",[],function(a,b,c){c.exports=SWFUpload});
define("nowcoder/1.2.1082/javascripts/component/editorSub/codeEditor/index",["ncPlugin/codemirror/style/codemirror.css","ncPlugin/codemirror/style/theme/monokai.css","ncPlugin/codemirror/codemirror","nc","cpn","../../select","../../../core/siteConfig","../../../action/code","../../../util/ajax"],function(a,b,c){function d(a){var b=window.localStorage,c=H.create(R);a&&c.set("NC_Code_Langue",a),a&&b&&b.removeItem&&b.removeItem("NC_Code_Langue")}function e(){var a=this,b=window.localStorage,c=H.create(R),d=c.get("NC_Code_Langue");return!d&&b&&(d=b.NC_Code_Langue,a.saveLastLangue(d)),d}function f(){var a=this;a.codeSubmit=new K,a._disabled=!1,a._createdQueue=[]}function g(b){var c=["ncPlugin/codemirror/mode/clike/clike","ncPlugin/codemirror/addon/edit/matchbrackets","ncPlugin/codemirror/addon/edit/closebrackets","ncPlugin/codemirror/addon/hint/showhint","ncPlugin/codemirror/addon/invisible/invisible"],d=0;G.forEach(c,function(e){a.async(e,function(){d++,d>=c.length&&b&&b()})})}function h(){var b=this,c=b.rawConfig,d=c.options,e=-1;G.forEach(d,function(a,b){e=a.checked&&0>e?b:e,a.text=J.getNameById(a.value)||"",a.value=G.id(a.value)}),d[Math.min(Math.max(0,e),d.length-1)].checked=!0,b.langueSelect=new N({options:d,renderTo:b.headerEl,renderBy:"prepend",change:function(){var c=b.valLangue();Q.saveLastLangue(c);var d=J.getCMById(c);d&&a.async("ncPlugin/codemirror/mode/"+d.plugin+"/"+d.plugin,function(){b.editor.setOption("mode",{name:d.name})}),b.execPlugin("cache","restoreCode"),b.fire("langueChange")}})}function i(){var a=this,b=a.rawConfig,c=(a.getEl(),G.extend({theme:"monokai",indentUnit:4,lineNumbers:!0,showInvisibles:!0,mode:"text/x-csrc",matchBrackets:!0,autoCloseBrackets:!0,hintOptions:{completeSingle:!1,closeOnUnfocus:!0},extraKeys:{Tab:function(a){var b=a.somethingSelected();b&&a.indentSelection("add"),!b&&a.replaceSelection("    ","end","+input")}}},b.codeMirrorConf));a.editor=A(a.editorEl.get(0),c),!!b.readOnly&&a.disable(),G.forEach(a._createdQueue,function(b){b&&b.call(a)}),a._createdQueue.length=0}function j(b){var c=this,d=[{name:"cache",path:"./plugin/cache"},{name:"hint",path:"./plugin/hint"},{name:"setting",path:"./plugin/setting"},{name:"selfTest",path:"./plugin/selfTest"}],e=d.length,f=0;c.plugin={},G.forEach(d,function(d){a.async(d.path,function(a){c.plugin[d.name]=new a({parent:c,editor:c.editor}),f++,f>=e&&b&&b()})})}function k(){var a=this,b=a.rawConfig,c=a.getEl(),d=a.editor;d.on("changes",function(){a.fire("codeChange")}),d.on("cursorActivity",function(){a._disabled&&(window.setTimeout(function(){c.find(".CodeMirror-cursor").hide()},0),b.clickMask&&b.clickMask())})}function l(){var a=this,b=a.rawConfig;b.noAutoSize||(a.editor.on("changes",function(){a.autoSize()}),a.autoSize())}function m(a){var b=this;if(a=a!==!1,a!==b._disabled){var c=b.getEl();c.find(".CodeMirror-cursor")[a?"hide":"show"](),b._disabled=a,b.editor.setOption("readOnly",a),b.langueSelect.disabled(a)}}function n(a,b){var c=this;arguments.length>=2&&(c.valLangue(a),c.valCode(b))}function o(a){var b=this;return 0===arguments.length?(b.editor.getValue()||"").replace(/ /gi," "):void b.editor.setValue(a||"")}function p(a,b){var c=this;return 0===arguments.length?c.langueSelect.val():(a=G.id(a),void(a&&c.langueSelect.val(a,b)))}function q(a,b,c){var d=this;d.waitCreated(function(){var e=d.getEl();a&&e.outerWidth(a),b?(b=parseInt(b,10),e.outerHeight(b),!c&&(d.originalHeight=e.height())):b=e.outerHeight();var f=d.toolbarHeight=e.find("div.subject-eidt-header").outerHeight();d.editor.setSize("100%",b-f),d.autoSize(),d.execPlugin("selfTest","resize")})}function r(){var a=this,b=a.rawConfig;if(!b.noAutoSize&&!a.isFullScreen)try{a._editorScrollEl=a._editorScrollEl||D(a.editor.getScrollerElement()),a._editorSizerEl=a._editorScrollEl.find("div.CodeMirror-sizer");var c=window.parseInt(a._editorSizerEl.css("min-height")||a._editorSizerEl.height(),10);a.editor.setSize("100%",Math.max(a.originalHeight-a.toolbarHeight,c)),a.getEl().height("auto")}catch(d){}}function s(){var a=this,b=a.rawConfig,c=a.getEl(),d=D(window);return I.cls(c.find(".js-full-screen"),{"icon-fullscreen":a.isFullScreen,"icon-resize-small":!a.isFullScreen}),a.isFullScreen?(a.isFullScreen=!1,b.renderTo.append(c),a.layer.hide(),a.resize(b.width,a.originalHeight,!0),void a.fire("fullScreen",!1)):(a.isFullScreen=!0,a.layer=new L({showContent:!0,clickToHide:!1,listeners:{render:function(){var b=this;b.contentEl.addClass("nk-body"),b.append(c),a.resize("100%",d.height(),!0)},winresize:function(){a.resize("100%",d.height(),!0)}}}),void a.fire("fullScreen",!0))}function t(a){var b=this,c=b.rawConfig,d=G.toMap(c.options,function(a){return{key:a.value,value:a}});return a?d[a]:d}function u(a){function b(b){M.alert(b),a&&a(!1)}var c=this,d=c.valLangue(),e=c.valCode(),f=D.trim(e)?e.length>1e5?"啊，代码不要这么长嘛，人家受不了了~":d?"":"错误的代码语言":"代码不能为空";if(f)return b(f);if("1"===d||"2"===d||"22"===d){if(/%I64/.test(e)&&!/%ll/.test(e)){var g="在提交的代码中发现%I64，牛客OJ后台是Linux系统，64位long long请使用%lld，unsigned long long请使用 %llu",h=M.confirm(g,G.bind(a,null,!1),G.bind(a,null,!0));return h.okBtn.html("返回修改"),void h.cancelBtn.html("强制提交")}}else if("4"===d){var i=c.getLangueData(),j=i[d];if(!j.tplCode){for(var k=D.trim(e).split("\n"),l=!1,m=!1,n=0,o=k.length;o>n;n++){var p=k[n];if(!l){var q=p.split("//")[0]||"";if(/\bpackage\b/.test(q))return b("请删除代码开头的package信息")}var r=/public\s+class\s+(\w+)/.exec(p);if(r&&!m&&(l=!0,m="Main"===r[1],!m))return b("请修改类名为Main")}if(!l)return b("找不到类名，请修改类名为Main")}}a&&a(!0)}function v(){function b(){var b=c.rawConfig,f=b.runCode||{},g=!!f.questionId,h={pid:f.pid,tid:f.tid,qid:f.qid,questionId:f.questionId||f.qid,content:c.valCode(),language:c.valLangue()};e&&G.extend(h,{input:d.input,output:d.output,selfType:b.selfTestType||5}),c.codeSubmit[e?"submitDiyCode":g?"submitSelfCode":"submitTestCode"]({urlSubmitCode:P[e?"selfTestCodeUrl":g?"submitCodeUrl":"runCodeUrl"](),urlGetCodeStatus:e?P.selfTestStatusUrl():P.statusUrl(),data:h,maxStatusDelay:b.maxStatusDelay,extCodeParam:b[e?"selfTestRunExtParam":"runExtParam"],extStatusParam:b.statusExtParam,feedback:function(a,b){a=a.replace(/^\n+|\n+$/gi,""),e&&(a=a.replace(/所有的?测试用例/gi,"你的自测数据")),c.showResult(a,b,e)},cbGetCaptcha:function(b){a.async("../../popupSub/popupCaptcha",function(a){a.show({type:O.captcha.runCode,call:b,cancel:b})})},cbGetCaptchaError:function(){c.fire("runCodeError")},cbSubmitCodeBefore:function(){c.fire("beforeRunCode")},cbSubmitCodeComplete:function(a){a&&(a.isSelfTest=e),c.fire("runCodeSubmit",a)},cbSubmitCodeError:function(a){a&&(a.isSelfTest=e),c.fire("runCodeError",a)},cbStatusCodeBefore:function(){c.fire("beforeReqStatus")},cbStatusCodeSuccess:function(a){a&&(a.isSelfTest=e),!e&&c.fire("runCodeSuccess",a),c.fire("runCodeFinish",a)},cbStatusCodeFail:function(a){a&&(a.isSelfTest=e),c.fire("runCodeDanger",a),c.fire("runCodeFinish",a)},cbStatusCodeError:function(a){a&&(a.isSelfTest=e),c.fire("runCodeError",a)}})}var c=this,d=c.execPlugin("selfTest","val")||{},e=!!d.inTest;c.checkCode(function(a){a&&b(),!a&&c.fire("runCodeError",{code:-1,msg:"代码不符合规范",isSelfTest:e})})}function w(a,b){var c=this,d=c.rawConfig,e=d.tipEl;return D.trim(a)?(e.removeClass(b?"alert-info":"alert-danger").addClass(b?"alert-danger":"alert-info"),e.html(a.replace(/\n/g,"<br />")).show(),void e.parent().show()):void e.html("").hide()}function x(a){var b=this;b.editor?a&&a.call(b):b._createdQueue.push(a)}function y(){var a=this;a._editorScrollEl=a._editorScrollEl||D(a.editor.getScrollerElement()),a._editorSizerEl=a._editorScrollEl.find("div.CodeMirror-sizer");var b=window.parseInt(a._editorSizerEl.css("min-height")||a._editorSizerEl.height(),10);return b+(a.toolbarHeight||0)}function z(a,b){var c=this,d=(c.plugin||{})[a],e=[].slice.call(arguments,2);return d&&d[b]?d[b].apply(d,e):void 0}a("ncPlugin/codemirror/style/codemirror.css"),a("ncPlugin/codemirror/style/theme/monokai.css");var A=a("ncPlugin/codemirror/codemirror"),B=a("nc"),C=a("cpn"),D=B.$,E=B.Component,F=B.Clazz,G=B.Base,H=B.Db,I=B.Dom,J=B.CodeLang,K=B.CodeSubmit,L=C.Layer,M=C.Popup,N=a("../../select"),O=a("../../../core/siteConfig"),P=a("../../../action/code"),Q=c.exports=F.create(),R="codeEditorCache";F.mix(Q,E,{_template:['<div class="subject-eidt-box" style="position:relative;">','<div class="subject-eidt-header">','<a href="javascript:void(0);" class="ico-fresh js-fresh-code" title="还原模板代码">重置</a>','<a href="javascript:void(0);" class="ico-computer js-self-test" title="代码自测">自测</a>','<div class="subject-edit-oprt js-head-tool">','<a href="javascript:void(0);" class="icon-fullscreen js-full-screen"></a>',"</div>","</div>",'<div class="js-editor-body code-font"></div>',"</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var a=this,b=a.rawConfig,c=a.getEl();!!b.noRefresh&&c.find(".js-fresh-code").remove(),b.noSelfTest&&c.find(".js-self-test").remove(),a.initCMPlugin(function(){a.headerEl=c.find("div.subject-eidt-header"),a.editorEl=c.find("div.js-editor-body"),a.initHeader(),a.initEditor(),a.originalHeight=c.height(),a.toolbarHeight=c.find("div.subject-eidt-header").outerHeight(),(b.width||b.height)&&a.resize(b.width,b.height),a.initAutoSize(),a.initPlugin(function(){a.initEvent(),a.execPlugin("cache","initCacheCode")})})}},{name:"click a.js-full-screen",handler:function(){var a=this,b=a.rawConfig,c=G.isFunction(b.goFullScreen);c&&b.goFullScreen.call(a),!c&&a.goFullScreen()}},{name:"click a.js-fresh-code",handler:function(){var a=this,b=a.rawConfig;b.noRefresh||M.confirm("刷新后代码框将重置为初始状态，正在编辑的代码将清空，但不会影响已提交的代码，确定刷新吗？",function(){a.execPlugin("cache","restoreTpl")})}},{name:"click div.js-editor-mask",handler:function(){var a=this,b=a.rawConfig;a._disabled&&b.clickMask&&b.clickMask.call(a)}}],saveLastLangue:d,getLastLangue:e},{initialize:f,initCMPlugin:g,initHeader:h,initEditor:i,initPlugin:j,initEvent:k,initAutoSize:l,disable:m,val:n,valCode:o,valLangue:p,resize:q,autoSize:r,goFullScreen:s,getLangueData:t,checkCode:u,runCode:v,showResult:w,waitCreated:x,exactHeight:y,execPlugin:z})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/codeEditor/plugin/cache",["nc"],function(a,b,c){function d(a){var b=this;b.editor=a.editor,b.parent=a.parent,b.autoCacheCode()}function e(){var a=this,b=a.parent,c=b.rawConfig,d=a._memoryCode={},e=!!c.noCacheCode,f=a.getStorageCode(),g=e?{}:f.code||{},h=e?b.valLangue():f.langue||b.valLangue(),i=b.getLangueData();q.forEach(i,function(a,b){var c=p.trim(g[b]||"");c=(c?g[b]:"")||a.code||a.tplCode,d[b]=c}),h&&b.valLangue(h,!0)}function f(){var a=this;a.editor.on("changes",function(){a.cacheCode2Memory()})}function g(a,b){var c=this,d=c.parent,e=c._memoryCode=c._memoryCode||{};arguments.length<2&&(a=d.valLangue(),b=d.valCode()),a&&(e[a]=b,c.cacheCode2Storage())}function h(){var a=this,b=a.parent,c=b.rawConfig,d=a.getCacheId(c.runCode),e=a._memoryCode;if(c.noCacheCode)return void(d&&a.delStorageCode());if(d&&v&&e){a.delStorageCode(!0);var f=s.create(u);f.set(d,{code:e,langue:b.valLangue()})}}function i(a){var b=this,c=b.parent,d=c.rawConfig,e=b.getCacheId(d.runCode);if(e&&v&&(v[e]="",v.removeItem(e),!a)){var f=s.create(u);f.remove(e)}}function j(a){var b=this,c=b._memoryCode||{};return a?c[a]||"":""}function k(){var a,b=this,c=b.parent,d=c.rawConfig,e=b.getCacheId(d.runCode);if(e){var f=s.create(u);a=f.get(e),!a&&v&&(a=q.json(v[e]),a&&(f.set(e,a),v.removeItem(e)))}return a||{}}function l(a){if(a){var b=a.questionId||[a.pid||"",a.tid||"",a.qid||""].join("_");if(b&&!/^_+$/.test(b))return b="NC_Code_Cache_"+b}}function m(){var a=this,b=a.parent,c=b.valLangue(),d=b.getLangueData()[c]||{},e=d.tplCode||"";b.valCode(e),a.cacheCode2Memory(c,e)}function n(){var a=this,b=a.parent,c=b.valLangue(),d=a.getMemoryCode(c);b.valCode(d)}var o=a("nc"),p=o.$,q=o.Base,r=o.Clazz,s=(o.Event,o.Db),t=c.exports=r.create(),u="codeEditorCache",v=window.localStorage;q.extend(t.prototype,{initialize:d,initCacheCode:e,autoCacheCode:f,cacheCode2Memory:g,cacheCode2Storage:h,delStorageCode:i,getMemoryCode:j,getStorageCode:k,getCacheId:l,restoreTpl:m,restoreCode:n})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/codeEditor/plugin/hint",["nc"],function(a,b,c){function d(a){var b=this,c=(b.editor=a.editor,b.parent=a.parent),d=c.rawConfig,e=d.codeHint;({keyword:1,all:1})[e||""]&&(b.useRemote="all"===e,b.initHint(),b.initEvent(),b.canUse=!0)}function e(){var a=this,b=a.editor;F.forEach({"text/x-csrc":"hintCSRC","text/x-c++hdr":"hintCSRC","text/x-c++src":"hintCSRC","text/x-java":"hintJava",python:"hintPython","text/x-python":"hintPython",javascript:"hintJs","text/javascript":"hintJs","text/x-csharp":"hintCSharp",php:"hintPhp","application/x-httpd-php":"hintPhp"},function(b,c){K.registerHelper("hint",c,a.wrapHint(a[b]))});var c;b.on("change",function(b,d){var e=b.getValue(),f=c===e;return c=e,f?void 0:(a.codeIndex++,d&&"+input"===d.origin?void a.showHint():a.closeMenu())});var d=F.bind(a.getHintList,a);d.async=!0,F.extend(b.options.hintOptions,{hint:d})}function f(){var a=this;a.listen("codeHintClose",function(){a.lastHintList=null}),a.listen("codeHintShown",function(){})}function g(a){var b=this;b.canUse=a!==!1}function h(){var a=this;a.canHint()&&(a.currentHintList=a.lastHintList,a.editor.showHint())}function i(a){return this.hintCommonAction(a,[".","->"],"xcsrc")}function j(a){return this.hintCommonAction(a,["."],"xjava")}function k(a){return this.hintCommonAction(a,null,"xpython")}function l(a){return this.hintCommonAction(a,null,"xjs")}function m(a){return this.hintCommonAction(a,null,"xcsharp")}function n(a){return this.hintCommonAction(a,null,"xphp")}function o(a,b,c){var d=this,e=d.getInfo()||{},f=e.token,g=e.cur;if(!f||!g)return a&&a();var h=f.string,i=[];if(b&&F.contains(b,h))return d.currentHintList=null,f.start=g.ch,f.end=g.ch,void d.server(f,g,function(b){F.isArray(b)&&0!==b.length&&(F.forEach(b,function(a){var b=a.name,c=E.trim(b.split("(")[0]),e=a.type,f=b.length>20?b.substr(0,20)+"...":b;i.push(d.wrapListItem({text:c,display:f,ext:e,method:!0}))}),a&&a(d.wrapResult(i,f,g)))});var j="xcsrc"===c;if(j&&/^#[^#]+$/.test(h)){var k=h.substr(f.start,g.ch-f.start);if(/^#[^#]+$/.test(k))if(/\s/g.test(k)){var l=k.split(/\s+/);if(2===l.length&&/^<[^<]+$/.test(l[1])){var m=k.indexOf(l[1]);h=l[1].replace(/</gi,""),f.start=m+1}}else h=k.replace("#",""),f.start+=1,f.end=/\s/.test(k)?k.indexOf(" "):Math.min(k.length,f.end)}if(!d.hintHistory(h,f,g,a)){var n=d.getHintData(c);F.forEach(["keyword","header","extra"],function(a){F.forEach(n[a],function(b){d.isStartWith(b,h)&&i.push(d.wrapListItem({text:b,display:b,ext:a}))})}),F.forEach(n.method,function(a){d.isStartWith(a,h)&&i.push(d.wrapListItem({text:a+"()",display:a,ext:"function"}))}),F.forEach(n.func,function(a){d.isStartWith(a.text,h)&&i.push(d.wrapListItem({text:a.text,display:a.display,ext:a.type,method:!0}))});var o=d.wrapResult(i,f,g);a&&a(o)}}function p(a,b,c,d){var e=this;if(!e.currentHintList)return!1;var f=F.filter(e.currentHintList.list,function(b){return e.isStartWith(b.text,a)});return d&&d(e.wrapResult(f,b,c)),!0}function q(a,b){var c=a.getCursor(),d=(a.getHelpers(c,"hint")||[])[0];if(d)return d&&d(b);var e=K.hint.auto.resolve(a,c)(a);b&&b(e)}function r(a){var b=this;if(I.isSupport&&b.useRemote)if(b.ws)a&&a(b.ws);else{var c=b.ws=new I({url:"wss://101.37.169.225:9012/suggest"});c.listen("open",function(){a&&a(c)}),c.listen("error",function(){b.ws=null,F.out("出现错误")}),c.listen("close",function(){b.ws=null}),c.listen("message",function(a){var c=F.id(a.id),d=b.getSocketEventName(c);return c!==F.id(b.codeIndex)?b.unlisten(d):void b.fire(d,a.data)}),c.connect()}}function s(){var a=this;if(a.canHint()){var b=a.editor,c=b.getCursor(),d=b.getTokenAt(c);return d.state=K.innerMode(b.getMode(),d.state).state,{token:d,cur:c}}}function t(a){var b=this,c=b._cacheHintData=b._cacheHintData||{};return c[a]||(c[a]={},c[a]={keyword:(O[a].keyword||"").split(";"),header:(O[a].header||"").split(";"),extra:(O[a].extra||"").split(";"),method:(O[a].method||"").split(";"),func:F.map((O[a].func||"").split(";"),function(a){var b=a.split(">"),c=b.pop(),d=b.join(">"),e=(E.trim(d.split("(")[0]),d.length>M?d.substr(0,M)+"...":d);return{display:e,text:d,type:c}})}),c[a]}function u(a){return N+a}function v(){var a=this,b=a.editor;try{b.state.completionActive&&b.state.completionActive.close()}catch(c){}}function w(){var a=this,b=a.parent,c=a.editor,d=c.getCursor(),e=c.getTokenAt(d);if(a.canUse){var f=!1;if(!f){var g=F.id(b.valLangue()),h=J.getHintLang();if(!g||!F.contains(h,g))return}var i=e.type,j=e.string;if(!/\b(?:string|comment)\b/.test(i)&&E.trim(j))return!0}}function x(){var a=this,b=a.parent;a.fire.apply(a,arguments),b.fire.apply(b,arguments)}function y(a,b){return 0===a.indexOf(b)}function z(a,b,c){var d=this,e=d.parent,f=d.codeIndex;d.getSocket(function(a){if(a&&f===d.codeIndex){var g=d.getSocketEventName(f);d.one(g,c),a.clearSendList(),a.send({code:d.editor.getValue(),line:b.line+1,col:b.ch+1,lang:e.valLangue(),id:f})}})}function A(a){return{text:a.text+(a.method?"":""),displayText:a.display,ext:a.ext,render:function(a,b,c){a.innerHTML=(c.ext?'<span style="float:right;margin-left:20px;">'+c.ext+"</span>":"")+c.displayText}}}function B(a,b,c){var d=this;return F.isArray(a)&&0!==a.length?{list:a,from:L(c.line,b.start),to:L(c.line,b.end),_handlers:{shown:[function(){d.fireEditor("codeHintShown")}],select:[function(){d.fireEditor("codeHintSelect")}],pick:[function(){d.fireEditor("codeHintPick")}],close:[function(){d.fireEditor("codeHintClose")}]}}:null}function C(a){var b=this;return function(c){{var d;F.isFunction(c)}return F.bind(a,b)(function(a){d=a,F.isFunction(c)&&(b.lastHintList=a,c(a))}),b.lastHintList=d,d}}var D=a("nc"),E=D.$,F=D.Base,G=D.Clazz,H=D.Event,I=D.Ws,J=D.CodeLang,K=window.CodeMirror,L=K.Pos,M=50,N="NC_CODEMIRROR_CODE_HINT",O={xcsrc:{keyword:"main;include;define;std;break;case;continue;default;do;else;for;goto;if;_Pragma;return;switch;while;catch;operator;try;throw;using;asm;__asm__;auto;bool;_Bool;char;_Complex;double;enum;float;_Imaginary;int;long;short;signed;struct;typedef;union;unsigned;void;class;wchar_t;template;char16_t;char32_t;const;extern;register;restrict;static;volatile;inline;private;protected;public;friend;explicit;virtual;export;mutable;typename;constexpr;new;delete;alignas;alignof;decltype;noexcept;thread_local;and;and_eq;bitand;bitor;compl;not;not_eq;or;or_eq;typeid;xor;xor_eqconst_cast;dynamic_cast;reinterpret_cast;static_cast;sizeof;namespace;NULL;true;false;TRUE;FALSE;nullptr",header:"cstdlib;csignal;cstdarg;typeinfo;bitset;functional;utility;ctime;cstddef;new;memory;climits;cfloat;limits;exception;stdexcept;cassert;cerrno;cctype;cwctype;cstring;cwchar;string;vector;deque;list;set;map;stack;queue;algorithm;iterator;cmath;complex;valarray;numeric;iosfwd;ios;istream;ostream;iostream;fstream;sstream;iomanip;streambuf;cstdio;locale;clocale",func:"isascii(int c)>int;isdigit(int c)>int;isspace(int c)>int;isupper(int c)>int;isxdigit(int c)>int;gcvt(double number, size_t ndigits, char *buf)>char*;toascii(int c)>int;tolower(int c)>int;toupper(int c)>int;getpagesize(void)>size_t;mmap(void *start, size_t length, int prot, int flags, int fd, off_t offsize)>void*;munmap(void *start, size_t length)>int;asctime(const struct tm * timeptr)>char*;ctime(const time_t *timep)>char*;gettimeofday(struct timeval * tv, struct timezone * tz)>int;tm *gmtime(const time_t *timep)>struct;tm *localtime(const time_t * timep)>struct;mktime(strcut tm * timeptr)>time_t;settimeofday(const struct timeval *tv, const struct timezone *tz)>int;time(time_t *t)>time_t;index(const char *s, int c)>char*;memccpy(void *dest, const void * src, int c, size_t n)>void*;memchr(const void *s, char c, size_t n)>void*;memcmp(const void *s1, const void *s2, size_t n)>int;rindex(const char *s, int c)>char*;strcasecmp(const char *s1, const char *s2)>int;strcpy(char *dest, const char *src)>char*;strdup(const char *s)>char*;strncasecmp(const char *s1, const char *s2, size_t n)>int;strtok(char *s, const char *delim)>char*;abs(int j)>int;asin(double x)>double;atan(double x)>double;atan2(double y, double x)>double;endgrent(void)>void;endpwent(void)>void;endutent(void)>void;getgrent(FILE * stream)>struct group*;fgetpwent(FILE * stream)>struct passwd*;getegid(void)>gid_t;geteuid(void)>uid_t;getgid(void)>gid_t;getgrent(void)>struct group*;getgrgid(gid_t gid)>struct group*;getgrnam(const char * name)>struct group*;getgroups(int size, gid_t list[])>int;getpw(uid_t uid, char *buf)>int;getpwent(void)>struct passwd*;getpwnam(const char * name)>struct passwd*;getpwuid(uid_t uid)>struct passwd*;getuid(void)>uid_t;getutent(void)>struct utmp*;getutid(strcut utmp *ut)>struct utmp*;getutline(struct utmp *ut)>struct utmp*;initgroups(const char *user, gid_t group)>int;pututline(struct utmp *ut)>void;seteuid(uid_t euid)>int;setfsgid(uid_t fsgid)>int;setfsuid(uid_t fsuid)>int;setgid(gid_t gid)>int;setgrent(void)>void;setgroups(size_t size, const gid_t * list)>int;setpwent(void)>void;setregid(gid_t rgid, gid_t egid)>int;setreuid(uid_t ruid, uid_t euid)>int;setuid(uid_t uid)>int;setutent(void)>void;utmpname(const char * file)>void;close(int fd)>int;creat(const char * pathname, mode_tmode)>int;dup(int oldfd)>int;dup2(int odlfd, int newfd)>int;flock(int fd, int operation)>int;fsync(int fd)>int;lseek(int fildes, off_t offset, int whence)>off_t;mkstemp(char * template)>int;read(int fd, void * buf, size_t count)>ssize_t;sync(void)>int;write(int fd, const void * buf, size_t count)>ssize_t;clearerr(FILE * stream)>void;fclose(FILE * stream)>int;fdopen(int fildes, const char * mode)>FILE*;feof(FILE * stream)>int;fflush(FILE* stream)>int;fgetc(FILE * stream)>int;fgets(char * s, int size, FILE * stream)>har*;fileno(FILE * stream)>int;fputc(int c, FILE * stream)>int;fputs(const char * s, FILE * stream)>int;fread(void * ptr, size_t size, size_t nmemb, FILE * stream)>size_t;freopen(const char * path, const char * mode, FILE * stream)>FILE*;fseek(FILE * stream, long offset, int whence)>int;ftell(FILE * stream)>long;fwrite(const void * ptr, size_t size, size_t nmemb, FILE * stream)>size_t;mktemp(char * template)>char*;setbuffer(FILE * stream, char * buf, size_t size)>void;setlinebuf(FILE * stream)>void;atexit(void (*function) (void))>int;execl(const char * path, const char * arg, ...)>int;execlp(const char * file, const char * arg, ...)>int;execv(const char * path, char * const argv[])>int;execve(const char * filename, char * const argv[], char * const envp[])>int;execvp(const char *file, char * const argv [])>int;exit(int status)>void;_exit(int status)>void;getpgid(pid_t pid)>pid_t;getpgrp(void)>pid_t;getpid(void)>pid_t;getppid(void)>pid_t;getpriority(int which, int who)>int;nice(int inc)>int;on_exit(void (* function) (int void*), void *arg)>int;setpgid(pid_t pid, pid_t pgid)>int;setpgrp(void)>int;setpriority(int which, int who, int prio)>int;system(const char * string)>int;wait(int * status)>pid_t;waitpid(pid_t pid, int * status, int options)>pid_t;fprintf(FILE * stream, const char * format, ...)>int;fscanf(FILE * stream, const char *format, ...)>int;scanf(const char * format, ...)>int;vfprintf(FILE *stream, const char * format, va_list ap)>int;vfscanf(FILE * stream, const char * format, va_list ap)>int;vprintf(const char * format, va_list ap)>int;vscanf(const char * format, va_list ap)>int;vsprintf(char * str, const char * format, va_list ap)>int;vsscanf(const char * str, const char * format, va_list ap)>int;access(const char * pathname, int mode)>int;alphasort(const struct dirent **a, const struct dirent **b)>int;chdir(const char * path)>int;chmod(const char * path, mode_t mode)>int;chown(const char * path, uid_t owner, gid_t group)>int;chroot(const char * path)>int;closedir(DIR *dir)>int;fchdir(int fd)>int;fchmod(int fildes, mode_t mode)>int;fchown(int fd, uid_t owner, gid_t group)>int;fstat(int fildes, struct stat *buf)>int;ftruncate(int fd, off_t length)>int;getcwd(char * buf, size_t size)>char*;link(const char * oldpath, const char * newpath)>int;lstat(const char * file_name, struct stat * buf)>int;opendir(const char * name)>DIR*;readdir(DIR * dir)>struct dirent*;readlink(const char * path, char * buf, size_t bufsiz)>int;rewinddir(DIR *dir)>void;seekdir(DIR * dir, off_t offset)>void;stat(const char * file_name, struct stat *buf)>int;symlink(const char * oldpath, const char * newpath)>int;telldir(DIR *dir)>off_t;truncate(const char * path, off_t length)>int;umask(mode_t mask)>mode_t;unlink(const char * pathname)>int;utime(const char * filename, struct utimbuf * buf)>int;utimes(char * filename, struct timeval *tvp)>int;alarm(unsigned int seconds)>unsigned int;kill(pid_t pid, int sig)>int;pause(void)>int;sigaddset(sigset_t *set, int signum)>int;sigdelset(sigset_t * set, int signum)>int;sigemptyset(sigset_t *set)>int;sigfillset(sigset_t * set)>int;sigismember(const sigset_t *set, int signum)>int;(*signal(int signum, void(* handler)(int)))(int)>void;sigpending(sigset_t *set)>int;sigprocmask(int how, const sigset_t *set, sigset_t * oldset)>int;sleep(unsigned int seconds)>unsigned int;ferror(FILE *stream)>int;strerror(int errnum)>char*;mkfifo(const char * pathname, mode_t mode)>int;pclose(FILE * stream)>int;popen(const char * command, const char * type)>FILE*;accept(int s, struct sockaddr * addr, int * addrlen)>int;bind(int sockfd, struct sockaddr * my_addr, int addrlen)>int;connect(int sockfd, struct sockaddr * serv_addr, int addrlen)>int;endprotoent(void)>void;endservent(void)>void;getsockopt(int s, int level, int optname, void* optval, socklen_t* optlen)>int;htonl(unsigned long int hostlong)>unsigned long int;htons(unsigned short int hostshort)>unsigned short int;inet_addr(const char *cp)>unsigned long int;inet_aton(const char * cp, struct in_addr *inp)>int;inet_ntoa(struct in_addr in)>char*;listen(int s, int backlog)>int;ntohl(unsigned long int netlong)>unsigned long int;ntohs(unsigned short int netshort)>unsigned short int;recv(int s, void *buf, int len, unsigned int flags)>int;recvfrom(int s, void *buf, int len, unsigned int flags, struct sockaddr *from,int *fromlen)>int;recvmsg(int s, struct msghdr *msg, unsigned int flags)>int;send(int s, const void * msg, int len, unsigned int falgs)>int;sendmsg(int s, const strcut msghdr *msg, unsigned int flags)>int;sendto(int s, const void * msg, int len, unsigned int flags, const struct&nbsp>sockaddr * to, int tolen);setprotoent(int stayopen)>void;setsockopt(int s, int level, int optname, const void * optval, ,socklen_toptlen)>int;shutdown(int s, int how)>int;socket(int domain, int type, int protocol)>int;getenv(const char *name)>char*;putenv(const char * string)>int;getopt(int argc, char * const argv[], const char * optstring)>int;isatty(int desc)>int;select(int n, fd_set * readfds, fd_set * writefds, fd_set * exceptfds, struct&nbsp>timeval * timeout);ttyname(int desc)>char*"},xjava:{keyword:"abstract;assert;boolean;break;byte;case;catch;char;class;const;continue;default;do;double;else;enum;extends;final;finally;float;for;goto;if;implements;import;instanceof;int;interface;long;native;new;package;private;protected;public;return;short;static;strictfp;super;switch;synchronized;this;throw;throws;transient;try;void;volatile;while",extra:"Enum;MONTH;WEEK_OF_MONTH;DECEMBER;OutputStream;ArrayList;String;Math;WEDNESDAY;NEGATIVE_INFINITY;LONG_STANDALONE;YEAR;WEEK_OF_YEAR;TreeSet;CASE_INSENSITIVE;SATURDAY;Vector;TYPE;LITERAL;LONG_FORMAT;in;SIZE;AM;DOTALL;Float;UNICODE_CASE;ERA;SortedMap;Byte;JULY;Object;DAY_OF_WEEK;Arrays;Map;DAY_OF_YEAR;Set;MAY;DAY_OF_MONTH;Matcher;E;FRIDAY;AM_PM;FEBRUARY;COMMENTS;Reader;MAX_VALUE;SortedSet;out;ZONE_OFFSET;StringWriter;UNDECIMBER;StringReader;Queue;MIN_EXPONENT;LONG;PrintWriter;JUNE;Pattern;err;Hashtable;Calendar;NOVEMBER;IOException;TreeMap;UNIX_LINES;StringBuffer;Runnable;MARCH;OutputStreamWriter;MILLISECOND;Writer;LinkedHashSet;BYTES;Comparable;THURSDAY;HashMap;NARROW_STANDALONE;DAY_OF_WEEK_IN_MONTH;NARROW_FORMAT;Comparator;FIELD_COUNT;Random;MINUTE;List;Collections;Short;HashSet;JANUARY;DST_OFFSET;EMPTY_MAP;SUNDAY;UNICODE_CHARACTER_CLASS;TUESDAY;CANON_EQ;SEPTEMBER;Double;LinkedList;Stack;POSITIVE_INFINITY;DATE;MAX_EXPONENT;ByteArrayInputStream;EMPTY_SET;Long;AUGUST;Collection;MULTILINE;CASE_INSENSITIVE_ORDER;Scanner;Dictionary;HOUR;ALL_STYLES;MatchResult;System;Number;MIN_NORMAL;HOUR_OF_DAY;Iterator;NaN;APRIL;PrintStream;SHORT_STANDALONE;InputStreamReader;OCTOBER;InputStream;Error;ByteArrayOutputStream;MIN_VALUE;Date;Exception;SHORT;Integer;MONDAY;EMPTY_LIST;PI;SECOND;PM;SHORT_FORMAT",header:"java.util.Collections;java.util.Comparator;java.util.Date;java.util.List;java.util.Locale;java.util.regex.Pattern;java.util.regex.Matcher;java.util.regex.MatchResult;java.io.BufferedOutputStream;java.io.BufferedInputStream;java.io.FileOutputStream;java.io.FileInputStream;java.io.StringReader;java.io.StringWriter;java.util.regex.Matcher;java.util.regex.MatchResult;java.util.Arrays;java.util.Collections;java.util.Arrays;java.util.ArrayList;java.util.Set;java.util.Map;java.util.HashMap;java.util.HashSet;java.util.Dictionary;java.util.Iterator;java.util.LinkedHashMap;java.util.LinkedHashSet;java.util.LinkedList;",method:"nextFloat;newSetFromMap;setSecurityManager;toUnsignedLong;asList;offer;unmodifiableCollection;quote;trim;disjoint;getSuppressed;getMonth;removeAllElements;getAvailableLocales;setTime;emptyEnumeration;printStackTrace;subMap;divideUnsigned;useDelimiter;concat;contains;size;toBinaryString;endsWith;listIterator;lowerKey;pollFirst;headMap;usePattern;emptySet;compare;roll;nextAfter;lineSeparator;setLenient;removeLast;appendCodePoint;search;nanoTime;setTimeZone;after;close;getenv;setMonth;synchronizedMap;set;toHexString;doubleToRawLongBits;getTimezoneOffset;abs;setTimeInMillis;floorDiv;toString;bitCount;toUnsignedString;hasNextBigDecimal;unmodifiableSortedSet;retainAll;byteValue;emptyIterator;navigableKeySet;higherEntry;longBitsToDouble;getLast;empty;compute;checkedNavigableSet;toMatchResult;getStackTrace;addSuppressed;getFirst;decrementExact;enumeration;add;list;ioException;setStackTrace;ulp;asLifoQueue;fillInStackTrace;reverseBytes;hasTransparentBounds;getTime;notifyAll;regionMatches;runFinalizersOnExit;locale;replaceAll;remove;random;tanh;emptyList;setHours;load;hashCode;elementAt;subSet;sin;end;gc;useRadix;hasNextBoolean;codePointCount;floorEntry;toIntExact;isEmpty;length;setFirstDayOfWeek;parse;subSequence;nextLong;hasNextShort;nextGaussian;parseByte;offerLast;print;insertElementAt;computeIfPresent;getFirstDayOfWeek;clone;asin;emptySortedSet;hasNextLong;append;charAt;numberOfTrailingZeros;deleteCharAt;copyOfRange;getWeekYear;headSet;codePointAt;setMinimalDaysInFirstWeek;containsValue;parseUnsignedLong;identityHashCode;sqrt;higherKey;setSeconds;toArray;parallelStream;findInLine;join;codePointBefore;write;compareToIgnoreCase;atan2;spliterator;lower;getTimeInMillis;regionEnd;hasNext;peekFirst;toDegrees;peekLast;ceil;doubleToLongBits;getExponent;ceilingKey;toGMTString;writeTo;exit;compareUnsigned;getDisplayName;setWeekDate;mapLibraryName;hasNextDouble;tailMap;synchronizedSortedMap;wait;ceilingEntry;getLocalizedMessage;intBitsToFloat;skip;notify;addLast;checkedMap;stream;parseShort;copyValueOf;comparingDouble;trimToSize;synchronizedSet;nextLine;max;getActualMinimum;getMessage;hasAnchoringBounds;peek;IEEEremainder;getLong;comparator;getSeconds;unmodifiableSortedMap;parseLong;equals;currentTimeMillis;setDate;nullsFirst;shuffle;rotate;getTimeZone;UTC;cos;expm1;offerFirst;compareTo;decode;setOut;floatToRawIntBits;nextUp;split;find;removeFirst;indexOf;emptyNavigableMap;read;comparingLong;entrySet;swap;getLeastMaximum;toLowerCase;sort;acos;fill;synchronizedNavigableSet;removeIf;lastIndexOfSubList;addElement;requireEnd;getBuffer;keys;getMaximum;delete;substring;parallelSort;parseDouble;getHours;println;setSize;putAll;nextBoolean;floor;keySet;console;getCalendarType;forEach;contentEquals;nextInt;toRadians;setYear;getDay;getMinutes;appendReplacement;lastEntry;removeElement;reversed;toCharArray;firstElement;setProperties;rint;setCharAt;iterator;removeAll;getWeeksInWeekYear;deepHashCode;merge;equalsIgnoreCase;exp;element;floorKey;tailSet;nextBigDecimal;synchronizedSortedSet;checkedCollection;getProperties;initCause;toUnsignedInt;addExact;lowerEntry;nextByte;log10;descendingIterator;replaceFirst;sum;checkError;pollLast;isFinite;pop;parseUnsignedInt;getDeclaringClass;min;thenComparing;isInfinite;setElementAt;ints;arraycopy;hypot;removeElementAt;pow;synchronizedList;checkedSet;getDisplayNames;subList;intern;unmodifiableNavigableMap;getChars;singletonList;parallelSetAll;nextDouble;radix;addAll;emptyListIterator;hasNextLine;incrementExact;comparingInt;addFirst;chars;ordinal;getOrDefault;emptyNavigableSet;thenComparingDouble;markSupported;log1p;available;indexOfSubList;run;isNaN;getCause;getBytes;frequency;compile;getActualMaximum;quoteReplacement;checkedSortedSet;singletonMap;nextShort;getMinimum;toUpperCase;shortValue;forEachRemaining;unmodifiableNavigableSet;removeLastOccurrence;codePoints;synchronizedNavigableMap;last;sinh;copyInto;floatValue;setMinutes;unmodifiableMap;numberOfLeadingZeros;pollLastEntry;getSecurityManager;firstKey;lastElement;name;ensureCapacity;region;toLocaleString;higher;next;thenComparingInt;computeIfAbsent;useTransparentBounds;descendingSet;synchronizedCollection;multiplyExact;binarySearch;toOctalString;printf;cbrt;flush;negateExact;lastKey;singleton;valueOf;start;nextDown;parseInt;lastIndexOf;appendTail;isWeekDateSupported;toByteArray;checkedQueue;getInstance;putIfAbsent;mark;useLocale;deepToString;copySign;put;getEncoding;floatToIntBits;delimiter;asPredicate;nextBigInteger;hasNextBigInteger;signum;isSet;doubleValue;matcher;matches;push;getYear;groupCount;doubles;setProperty;reset;hasNextInt;useAnchoringBounds;hitEnd;runFinalization;parseFloat;getMinimalDaysInFirstWeek;naturalOrder;parallelPrefix;log;reverseOrder;pattern;flags;rotateLeft;longValue;capacity;longs;remainderUnsigned;get;emptyMap;getDate;firstEntry;copy;hasNextByte;containsAll;copyOf;reverse;toInstant;checkedList;nCopies;elements;first;descendingKeySet;getClass;getAvailableCalendarTypes;before;replace;splitAsStream;getInteger;poll;atan;clearProperty;lookingAt;checkedSortedMap;checkedNavigableMap;inheritedChannel;from;group;tan;setErr;loadLibrary;setIn;deepEquals;containsKey;format;comparing;unmodifiableList;setLength;nullsLast;removeFirstOccurrence;setSeed;hasNextFloat;getGreatestMinimum;scalb;floorMod;isLenient;descendingMap;values;insert;findWithinHorizon;regionStart;nextBytes;pollFirstEntry;unmodifiableSet;ready;setAll;lowestOneBit;subtractExact;ceiling;getProperty;rotateRight;intValue;clear;match;cosh;emptySortedMap;thenComparingLong;round;highestOneBit;offsetByCodePoints;startsWith"},xpython:{keyword:"and;as;assert;break;class;continue;def;del;elif;else;except;exec;finally;for;from;global;if;import;in;is;lambda;not;or;pass;print;raise;return;try;while;with;yield"},xjs:{keyword:"break;case;catch;continue;default;delete;do;else;finally;for;function;if;in;instanceof;new;return;switch;this;throw;try;typeof;var;void;while;with;abstract;boolean;byte;char;class;const;debugger;double;enum;export;extends;final;float;goto;implements;import;int;interface;long;native;package;private;protected;public;short;static;super;synchronized;throws;transient;volatile"},xcsharp:{keyword:"abstract;as;base;bool;break;byte;case;catch;char;checked;class;const;continue;decimal;default;delegate;do;double;else;enum;ecent;explicit;extern;false;finally;fixed;float;for;foreach;get;goto;if;implicit;in;int;interface;internal;is;lock;long;namespace;new;null;object;out;override;partial;private;protected;public;readonly;ref;return;sbyte;sealed;set;short;sizeof;stackalloc;static;struct;switch;this;throw;true;try;typeof;uint;ulong;unchecked;unsafe;ushort;using;value;virtual;volatile;volatile;void;where;while;yield"},xphp:{keyword:"__halt_compiler;abstract;and;array;as;break;callable;case;catch;class;clone;const;continue;declare;default;die;do;echo;else;elseif;empty;enddeclare;endfor;endforeach;endif;endswitch;endwhile;eval;exit;extends;final;finally;for;foreach;function;global;goto;if;implements;include;include_once;instanceof;insteadof;interface;isset;list;namespace;new;or;print;private;protected;public;require;require_once;return;static;switch;throw;trait;try;unset;use;var;while;xor;yield"}},P=c.exports=G.create();F.extend(P.prototype,H,{codeIndex:1,lastHintList:null,currentHintList:null,initialize:d,initHint:e,initEvent:f,start:g,showHint:h,hintCSRC:i,hintJava:j,hintPython:k,hintJs:l,hintCSharp:m,hintPhp:n,hintCommonAction:o,hintHistory:p,getHintList:q,getSocket:r,getInfo:s,getHintData:t,getSocketEventName:u,closeMenu:v,canHint:w,fireEditor:x,isStartWith:y,server:z,wrapListItem:A,wrapResult:B,wrapHint:C})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/codeEditor/plugin/selfTest",["nc","cpn"],function(a,b,c){function d(a){var b=this;b.editor=a.editor,b.parent=a.parent,b.elMap={},b.isInTest=!1;var c=b.parent.rawConfig;c.noSelfTest||b.initAction()}function e(){var a=this,b=a.parent.getEl();b.on("click",".js-self-test",function(){a.enterTest()}),b.on("click",".js-exit-self-test",function(){a.exitTest()})}function f(){var a=this,b=a.elMap;return{inTest:!!a.isInTest,input:b.inputIpt?b.inputIpt.val():"",output:b.outputIpt?b.outputIpt.val():""}}function g(){var a=this,b=a.parent,c=b.getEl(),d=a.elMap;if(!a.isInTest){if(!d.content){var e=a._createMask(),f=a._createContent();c.append(e),c.append(f),d.mask=e,d.content=f,d.head=f.find(".js-head"),d.body=f.find(".js-body"),d.input=f.find(".js-input"),d.output=f.find(".js-output"),d.inputIpt=f.find(".js-input textarea"),d.outputIpt=f.find(".js-output textarea")}a.isInTest=!0,d.mask.show(),d.content.show(),d.inputIpt.focus(),a.resize(),b.fire("enterSelfTest")}}function h(){var a=this,b=a.parent,c=a.elMap;c.mask&&c.mask.hide(),c.content&&c.content.hide(),a.isInTest&&b.fire("exitSelfTest"),a.isInTest=!1}function i(){var a=this;if(a.isInTest){var b=a.elMap,c=b.content,d=b.head,e=b.body,f=b.input,g=b.output,h=b.inputIpt,i=b.outputIpt;e.outerHeight(c.height()-d.outerHeight());var j=e.height(),k=e.width();f.outerWidth(k).outerHeight(j/2),g.outerWidth(k).outerHeight(j/2),h.outerWidth(f.width()).outerHeight(f.height()),i.outerWidth(g.width()).outerHeight(g.height())}}function j(){return m('<div style="position:absolute;z-index:9;left:0;top:0;background:#000;width:100%;height:100%;filter:alpha(opacity:30);opacity:0.3;"></div>')}function k(){return m(['<div class="self-test-main" style="position:absolute;z-index:10;left:0;top:0;width:100%;height:100%;font-size:14px;overflow:hidden;">','<div class="js-head self-test-hd">',"<span>根据本题要求输入你自测的用例。</sapn>",'<a href="javascript:void(0);" class="link-green float-right js-exit-self-test">返回代码编辑器</a>',"</div>",'<div class="js-body self-test-bd">','<div class="js-input self-test-item" style="padding:0 0 5px 0;display:block;">','<textarea style="resize:none;" placeholder="输入数据"></textarea>',"</div>",'<div class="js-output self-test-item" style="padding:5px 0 0 0;display:block;">','<textarea style="resize:none;" placeholder="你期待的输出结果"></textarea>',"</div>","</div>","</div>"].join(""))}var l=a("nc"),m=(a("cpn"),l.$),n=l.Base,o=l.Clazz,p=c.exports=o.create();n.extend(p.prototype,{initialize:d,initAction:e,val:f,enterTest:g,exitTest:h,resize:i,_createMask:j,_createContent:k})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/codeEditor/plugin/setting",["nc","cpn"],function(a,b,c){function d(a){var b=this;b.editor=a.editor,b.parent=a.parent,b.initDb(),b.initSwitch()}function e(){var a=this,b=a.db=n.create(p),c=n.get("codeEditorHintStatus"),d=n.get("codeEditorTabSpaceStatus");void 0!==c&&null!==c&&(b.set("settingHint",c),n.remove("codeEditorHintStatus")),void 0!==d&&null!==d&&(b.set("settingTabSpace",d),n.remove("codeEditorTabSpaceStatus"))}function f(){function a(a,b){var c=k('<li><a href="javascript:void(0);"></a></li>');i.append(c);var d=new o({renderTo:c.find("a"),text:a,checked:b});return d}function b(a){d.db.set("settingHint",!!a),e.execPlugin("hint","start",!!a)}function c(a){d.db.set("settingTabSpace",!!a),g[a?"removeClass":"addClass"]("cm-nc-tab-space-close")}var d=this,e=d.parent,f=e.rawConfig,g=e.getEl(),h=k(['<div class="format-setting">','<a href="javascript:void(0);" class="icon-cog"></a>','<ul class="dropdown-menu js-switch"></ul>',"</div>"].join(""));d._getEl().append(h);var i=h.find(".js-switch");if({keyword:1,all:1}[f.codeHint||""]){var j=d.db.get("settingHint");j=!(void 0!==j&&!j);var l=a("代码自动补全",j);l.listen("change",function(){b(l.isChecked())}),b(j)}var m=d.db.get("settingTabSpace");m=!(void 0!==m&&!m);var n=a("空格tab提示",m);n.listen("change",function(){c(n.isChecked())}),c(m)}function g(){{var a=this;a._getEl().find("ul.js-switch")}}function h(){var a=this,b=a.parent.getEl();return b.find(".js-head-tool")}var i=a("nc"),j=a("cpn"),k=i.$,l=i.Base,m=i.Clazz,n=i.Db,o=j.CheckBox,p="codeEditorCache",q=c.exports=m.create();l.extend(q.prototype,{initialize:d,initDb:e,initSwitch:f,createSwitch:g,_getEl:h})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/index",["ncPlugin/kindeditor/kindeditor","ncPlugin/kindeditor/kindeditor/themes/nowcoder/nowcoder.css","nc","cpn","../../../core/siteConfig"],function(a,b,c){function d(a,b){if(a=G(a),0!==a.length){var c=(a.prop("tagName")||"").toLowerCase(),d="input"===c||"textarea"===c;return new N(K.extend({renderTo:a,renderBy:"replaceWith",content:d?a.val():"",height:Math.max(a.outerHeight(),200)},b))}}function e(){var a=this;a._createdQueue=[]}function f(){var a=this;a._initKePlugin();var b=a.getEl(),c=G("<div></div>");b.append(c);var d=a.keEditor=E.create(c.get(0),a._getConf()),e=d.html;d.html=function(a){return a?(a=a.replace(/\u00A0/g,"&nbsp;"),e.call(this,a)):e.apply(this,arguments)}}function g(){var b=this;b.waitCreated(function(){var c="toolbar,md,autoLink,imageBar,placeholder,uploadPaste,uploadRemote,codeName,defaultAction,monitContent,autoHeight,at".split(",");K.forEach(c,function(c){a.async("./plugin/"+c,function(a){new a(b)})})})}function h(){var a=this,b=a.rawConfig,c=a.getEl();a._initEvent||(a._initEvent=!0,a.listen("afterCreate",function(){a._afterCreate||(a._afterCreate=!0,b.content&&a.val(b.content),K.forEach(a._createdQueue,function(b){b&&b.call(a)}),a._createdQueue.length=0,c.on("click","div.js-editor-mask",function(){try{b.clickMask&&b.clickMask.call(a)}catch(c){}}),b.afterCreate&&b.afterCreate.call(a))}),a.listen("afterChange",function(){var c=a.keEditor,d=c.edit.cmd.range,e=a.isInTagNode(d.startContainer,"blockquote")||a.isInTagNode(d.endContainer,"blockquote");e?c.toolbar.select("bockquote"):c.toolbar.unselect("bockquote");var f=a.isInTagNode(d.startContainer,"pre")||a.isInTagNode(d.endContainer,"pre");c.edit.designMode&&(f?(c.toolbar.disableAll(!0,["source","codeblock"]),c.toolbar.select("codeblock")):(c.toolbar.disableAll(!1),c.toolbar.unselect("codeblock"))),b.afterChange&&b.afterChange.call(a)}),a.listen("afterBlur",function(){b.afterBlur&&b.afterBlur.call(a)}),a.listen("afterFocus",function(){b.afterFocus&&b.afterFocus.call(a)}))}function i(){var a=this;return a.keEditor.html.apply(a.keEditor,arguments)}function j(){var a=this;return a.keEditor.text.apply(a.keEditor,arguments)}function k(){var a=this;return a.keEditor.count("text")}function l(){var a=this;try{a.keEditor.blur()}catch(b){}}function m(){var a=this;try{a.keEditor.focus()}catch(b){}}function n(a){var b=this,c=b.getEl();b.waitCreated(function(){var b=c.find(".js-editor-mask");return a===!1?b.hide():(0===b.length&&(b=G('<div class="js-editor-mask" style="background:#fff;opacity:0;filter:alpha(opacity=0);position:absolute;width:100%;height:100%;top:0;left:0;z-index:999;"></div>'),c.append(b)),void b.show())})}function o(){var a=this;return a.keEditor.isEmpty()}function p(a,b){var c=this,d=c.rawConfig,e=c.getEl();c.waitCreated(function(){var f=c.keEditor;if(a&&e.outerWidth(a),c.getEditorEl().width("auto"),b){var g=c.getToolbarEl(),h=g.outerHeight(),i=!d.noAutoHeight;b=Math.max(b-h-2,0),i&&(f.edit._editHeight=b+"px"),i&&c.autoHeight(),!i&&f.edit.setHeight(b)}})}function q(a){var b=this,c=b.rawConfig,d=b.keEditor,e=b.getEditorDoc();if(!c.noAutoHeight){if(!a){var f=b.getEditorEl();a=L.getScrollParent(f),a=G(a?a:window)}var g=a.scrollTop();d.edit.setHeight(1);var h=e.body.scrollHeight;G(b.getEditorDoc().body).css("overflow","hidden"),b.getEditorEditEl().css("overflow","hidden").height(1),h=Math.max(h,e.body.scrollHeight);var i=b._lastHeight?h-b._lastHeight:0;b._lastHeight=h;var j=parseInt(d.edit._editHeight||0,10)||0;h=Math.max(h,j),d.edit.setHeight(h),a.scrollTop(g+(h===j?0:i))}}function r(a){var b=this,c=b.keEditor;c&&c.isCreated?a&&a.call(b):b._createdQueue.push(a)}function s(){var a=this;return a.keEditor}function t(){var a=this;return a.keEditor.edit.doc}function u(){var a=this;return a.keEditor.edit.win}function v(){var a=this;return G(a.keEditor.container[0])}function w(){var a=this;return G(a.keEditor.edit.div)}function x(){var a=this;return G(a.keEditor.toolbar.div.get(0))}function y(){for(var a=this,b=a.keEditor.cmd.range.startContainer;b&&1!==b.nodeType;)b=b.parentNode;return b}function z(a,b){if(!a||!b)return!1;var c=!1;b=b.toLowerCase();try{for(;a;){var d=(a.tagName||"").toLowerCase();if(d&&d===b){c=!0;break}a=a.parentNode}}catch(e){}return c}function A(){var a=this,b=G(a.getEditorDoc());b.find("#kePlaceholder").remove()}function B(a){var b=this,c=b.getEl(),d=b.getEditorDoc(),e=G(d.body),f=L.getPosTop(a,e),g=L.getPosLeft(a,e),h=L.getPosTop(c),i=L.getPosLeft(c),j=b.getToolbarEl().outerHeight(),k=e.scrollTop(),l=e.scrollLeft();return{top:f+h+j-k,left:g+i-l}}function C(){var a=this,b=a.rawConfig,c=K.clone(H.get());c.type=M.uploadType.image,c.token=H.get("csrf_token");var d={allowNCFileUpload:!0,allowFileManager:!0,themeType:"nowcoder",uploadJson:"/uploadImage",extraFileUploadParams:c,resizeType:0,height:(b.height||300)+"px",newlineTag:"div",cssData:['body{background-color:transparent;font-family:arial,STHeiti,"Microsoft YaHei";line-height:1.8}',"p{line-height:1.8}","h1,h2,h3,h4,h5,h6{margin:10px 0}","img{max-width:100%}",'blockquote{position:relative;color: #999;font-weight:300;font-family:Avenir, "Helvetica Neue", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", sans-serif;border-left:2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;}',"pre{font-size: 14px;position: relative;border-left: 2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;background: #fefefe;word-break:break-all;}","a{color:#25bb9b;text-decoration:none;}"].join(""),items:"source,preview,|,bold,italic,underline,|,bockquote,codeblock,insertorderedlist,insertunorderedlist,|,image,|,table,subscript,superscript,math,removeformat".split(","),htmlTags:{span:".color,.font-weight,.text-decoration,.vertical-align".split(","),div:"class,id,align,.margin,.padding,.text-align,.color,.font-weight,.text-decoration,.vertical-align".split(","),table:"border,cellspacing,cellpadding,height,align,bordercolor,.padding,.margin,.border,bgcolor,.text-align,.color,.background-color,.font-weight,.text-decoration,.background,.height,.border-collapse".split(","),"td,th":"align,valign,width,height,colspan,rowspan,bgcolor,.text-align,.color,.background-color,.font-weight,.text-decoration,.vertical-align,.background,.border".split(","),a:"href,target,name,data-card-uid,class".split(","),embed:"src,width,height,wmode,name,allowfullscreen,flashvars,type,loop,autostart,quality,.width,.height,align,allowscriptaccess".split(","),object:"classid,width,height,id".split(","),param:"name,value".split(","),img:"class,id,src,width,height,border,alt,title,align,.width,.height,.border".split(","),"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":"align,.text-align,.color,.font-weight,.text-decoration,.vertical-align,.text-indent,.margin-left".split(","),pre:["class"],hr:"class,.page-break-after".split(","),iframe:"frameborder,width,height,src,allowfullscreen".split(","),"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]}},e=K.extend(d,b.keConf,{placeholder:b.placeholder,afterCreate:function(){a.keEditor=a.keEditor||this,a.fire("afterCreate")},afterChange:function(){a.keEditor=a.keEditor||this,a.waitCreated(function(){a.fire("afterChange")})},afterBlur:function(){a.keEditor=a.keEditor||this,a.fire("afterBlur")},afterFocus:function(){a.keEditor=a.keEditor||this,a.fire("afterFocus")}});return b.isAdmin&&(e.items="source,preview,|,bold,italic,underline,forecolor,|,bockquote,codeblock,insertorderedlist,insertunorderedlist,link,|,image,|,table,subscript,superscript,math,removeformat".split(",")),b.noCodeSelect||K.forReverse(e.items,function(a,b){"codeblock"===a&&e.items.splice(b,1)}),e}function D(){var a=this;N._initKePlugin||(N._initKePlugin=!0,E.plugin("bockquote",function(){var b=this;b.clickToolbar("bockquote",function(){G("#kePlaceholder",b.edit.doc).remove(),b.select();var c=b.cmd.commonNode({blockquote:"*"});if(c){var d=b.cmd.range.createBookmark();c.remove(!0),b.cmd.range.moveToBookmark(d)}else{b.cmd.indent();var c=b.cmd.commonNode({blockquote:"*"});if(c){try{b.cmd.range.selectNodeContents(c),b.cmd.removeformat()}catch(e){}c.removeAttr("style"),!c.next()&&c.after("<br />")}}b.select(),a.fire("afterChange")})}),E.plugin("codeblock",function(){var b=this;b.clickToolbar("codeblock",function(){G("#kePlaceholder",b.edit.doc).remove(),b.select();var c=b.cmd.commonNode({pre:"*"});if(c){var d=b.cmd.range.createBookmark();c.remove(!0),b.cmd.range.moveToBookmark(d)}else{b.exec("formatblock","<pre>");var c=b.cmd.commonNode({pre:"*"});if(c){try{b.cmd.range.selectNodeContents(c),b.cmd.removeformat()}catch(e){}c.addClass("prettyprint"),!c.next()&&c.after("<br />")}}b.select(),a.fire("afterChange")})}))}a("ncPlugin/kindeditor/kindeditor"),a("ncPlugin/kindeditor/kindeditor/themes/nowcoder/nowcoder.css");var E=window.KindEditor,F=a("nc"),G=(a("cpn"),F.$),H=F.Cookie,I=F.Component,J=F.Clazz,K=(F.Browser,F.Base),L=F.Dom,M=a("../../../core/siteConfig"),N=c.exports=J.create();J.mix(N,I,{_template:'<div style="position:relative;"></div>',listeners:[{name:"render",type:"custom",handler:function(){{var a=this,b=a.rawConfig;a.getEl()}a.initEvent(),a.initPlugin(),!!b.disabled&&a.disable(),a.resize(b.width,b.height),a.initKe()}},{name:"destroy",type:"custom",handler:function(){var a=this;try{a.keEditor.remove()}catch(b){}}}],create:d},{initialize:e,initKe:f,initPlugin:g,initEvent:h,val:i,text:j,count:k,blur:l,focus:m,disable:n,isEmpty:o,resize:p,autoHeight:q,waitCreated:r,getEditor:s,getEditorDoc:t,getEditorWin:u,getEditorEl:v,getEditorEditEl:w,getToolbarEl:x,getCmdClosestEl:y,isInTagNode:z,removePlaceHolder:A,getElPos:B,_getConf:C,_initKePlugin:D})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/at",["nc","../../../../util/atList","cpn","../../../../action/message","../../../../util/ajax","../../../../core/siteConfig","../../../../util/util"],function(a,b,c){function d(a){var b=this;b.editor=a;var c=a.rawConfig;c.needAt&&(b.id=o.ascId(),b.initIpt(a))}function e(a){function b(){window.clearTimeout(f),f=window.setTimeout(function(){g.analyze()},h)}function c(){window.clearTimeout(f),f=window.setTimeout(function(){r.showList(g.id)},h)}function d(a){window.clearTimeout(f);var c=+a.keyCode,d={37:"left",38:"top",39:"right",40:"down",16:"shift",17:"ctrl",18:"option",91:"cmd"};return!d[c]&&g.cancelAt()?void a.preventDefault():{38:1,40:1,13:1}[c]?13===c&&i.isListMenuShow?a.preventDefault():void 0:b()}function e(a){g.cancelAt()&&a.preventDefault()}var f,g=this,h=150,i=r.getPool(g.id),j=n(a.getEditorDoc()),k=n(a.getEditorWin()),l=n(j).find("body");j.on("click",b),j.on("focus",b),j.on("keydown",d),k.on("blur",c),l.on("paste",e),l.on("cut",e),l.on("copy",e)}function f(){var a=this,b=a.editor,c=b.keEditor,d=a.getAtInfo();if(!d)return r.showList(a.id);var e=a.getPos(d.range);r.showList(a.id,{ipt:b.getEditorDoc(),text:d.text,pos:e,ext:{top:5},ok:function(d){{var e=b.getEditorDoc(),f=a.getAtInfo().range;"//"+(s.isInDev()?"d.":"www.")+"nowcoder.com/profile/"+d.id}c.insertHtml('​<a data-card-uid="'+d.id+'" href="javascript:void(0);">@'+d.nickname+'</a>&nbsp;<span id="jsNcAtTmpSpan"></span>'),f.deleteContents();try{var g=e.getElementById("jsNcAtTmpSpan");f=e.createRange(),f.selectNodeContents(g),f.collapse(!1);var h=b.getEditorWin().getSelection();h.removeAllRanges(),h.addRange(f),g.parentNode.removeChild(g)}catch(i){}}})}function g(){var a=this,b=a.editor,c=b.keEditor,d=c.cmd.range;if(d.collapsed&&!a.getAtNodeByRange(d)){for(var e,f=d.shrink().down().startContainer.data||"",g=d.startOffset-1,h=-1;g>=0&&(e=f[g],"@"===e&&(h=g),"@"!==e&&!/\s/.test(e));)g--;if(-1!==h&&!(h>0&&/[1-9a-z]/gi.test(f[h-1]))){var i=d.cloneRange();return i.setStart(d.startContainer,h),{index:h,text:f.substring(h+1,d.startOffset),full:f.substring(h,d.startOffset),range:i}}}}function h(a){var b=this,c=b.editor,d=a.doc,e=d.createDocumentFragment(),f=d.getElementById("ncAtTmpHockSpan");f||(f=d.createElement("span"),f.id="ncAtTmpHockSpan"),f.innerHTML="@",e.appendChild(f),a.insertNode(e);var g=c.getElPos(f),h=n(f).outerHeight();return f.parentNode.removeChild(f),{top:g.top+h,left:g.left}}function i(){var a=this,b=a.editor,c=b.keEditor;c.cmd.selection();var d=c.cmd.range,e=d.collapsed,f=a.getAtNodeByRange(d),g=e?f:a.getAtNodeByRange(d,!0);if(f||g){var h=f,i=f!==g&&g?g:null,j=d.createBookmark();return h&&a.removeNode(h,!0),i&&a.removeNode(i,!0),d.moveToBookmark(j),c.select(),!0}}function j(a,b){var c=this,d=a[b?"endContainer":"startContainer"],e=a[b?"endOffset":"startOffset"];if(1===d.nodeType){var f=d.childNodes;if(e=e>0?e-1:0,f.length>e)return c.getAtNode(f[e])}return c.getAtNode(d)}function k(a){for(;a;){var b=(a.nodeName||"").toLowerCase(),c=(a.className||"",a.getAttribute?a.getAttribute("data-card-uid"):"");if("a"===b&&(c||""===c))break;a=a.parentNode}return a}function l(a,b){var c,d=(a||{}).parentNode;if(d){if(b&&a.hasChildNodes())for(;c=a.firstChild;)d.insertBefore(c,a);d.removeChild(a)}return a}var m=a("nc"),n=m.$,o=m.Base,p=(m.Dom,m.Clazz),q=c.exports=p.create(),r=a("../../../../util/atList"),s=a("../../../../util/util");o.extend(q.prototype,{initialize:d,initIpt:e,analyze:f,getAtInfo:g,getPos:h,cancelAt:i,getAtNodeByRange:j,getAtNode:k,removeNode:l})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/autoHeight",["nc"],function(a,b,c){function d(a){var b=a.rawConfig;if(!b.noAutoHeight){var c=a.getEditorEl(),d=h.getScrollParent(c);d=f(d?d:window);var e=a.val();a.listen("afterChange",function(){var b=a.val();if(e!==b){e=b;try{a.autoHeight(d)}catch(c){}}}),e&&f(a.getEditorDoc()).one("click",function(){a.autoHeight(d)})}}var e=a("nc"),f=e.$,g=e.Base,h=e.Dom,i=e.Clazz,j=c.exports=i.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/autoLink",["nc"],function(a,b,c){function d(a){if(!i.ie()){var b=a.getEditorDoc(),b=(a.keEditor,f(b));a.listen("afterBlur",function(){var b=a.val(),c=j.replaceLink(b);c!==b&&a.val(c)})}}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=e.Browser,j=(e.Str,e.Html),k=c.exports=h.create();g.extend(k.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/codeName",["nc"],function(a,b,c){function d(a){var b,c=a.keEditor,d=a.getEditorDoc(),e=a.getEditorWin();f(d).on("click","pre",function(h){if(h.shiftKey){var i=f(h.target),k=i.attr("class")||"",l=/lang-(.*)/.exec(k),m=l?l[1]||"":"",n=j(a.getEditorEditEl().get(0)).pos(),o=j(i.get(0)).pos(),p=f(e).scrollTop()||f(d.body).scrollTop(),q=n.y+(o.y<p?0:o.y-p);b=c.menu=new j.MenuClass({name:"codename",width:150,centerLineMode:!1,x:n.x+o.x,y:q,z:50}),f(b.div).css({"max-height":"200px","overflow-y":"auto"});var r=[{name:"ASP/VB",val:"vb"},{name:"C/C++",val:"cpp"},{name:"CSS",val:"css"},{name:"C#",val:"cs"},{name:"HTML",val:"html"},{name:"Java",val:"java"},{name:"JavaScript",val:"js"},{name:"Perl",val:"pl"},{name:"PHP",val:"php"},{name:"Python",val:"py"},{name:"Ruby",val:"rb"},{name:"Shell",val:"bsh"},{name:"XML",val:"xml"},{name:"Other",val:""}];g.forEach(r,function(a){b.addItem({title:'<span unselectable="on">'+a.name+"</span>",checked:m===a.val,click:function(){i.removeClass().addClass(a.val?"prettyprint lang-"+a.val:"prettyprint"),c.hideMenu()}})})}})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=c.exports=h.create(),j=window.KindEditor;g.extend(i.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/defaultAction",["nc","cpn","../../../../util/uploadRemote"],function(a,b,c){function d(a){var b=this,c=b.action=(a.rawConfig||{}).toolAction||{};b.initMath(a);var d=a.getEditor();k.forEach(c,function(a,b){d._handlers[b]=[a]})}function e(a){var b=this;k.extend(b.action,{clickToolbarmath:k.bind(b.math,b,a)}),j(a.getEditorDoc()).on("click","img",function(c){var d=j(c.currentTarget),e=d.attr("src"),f=m.getParam("tex",e);f&&b._formula({useLaTex:!0,value:f,valueLaTex:"$ "+f+" $",eidtor:a,call:function(a){d.attr("src",a).attr("data-ke-src",a)},callLaTex:function(a){d.replaceWith(a)}})})}function f(a){var b=this;b._formula({useLaTex:!0,eidtor:a,call:function(b){a.getEditor().exec("insertimage",b)}})}function g(a){var b=a.eidtor;o.show({useLaTex:!!a.useLaTex,value:a.value,valueLaTex:a.valueLaTex,uploadBatch:function(a,b,c){var d=this.showLoad(),e=a.length,f=0,g={};return 0===e?c(g):void k.forEach(b,function(b,h){var i=a[h];p.upload(b,function(a){f++;var h=a&&a!==b;g[i]=h?m.addParam({tex:i},a):"",f>=e&&(d.close(),c&&c(g))})})},callLaTex:function(c){j.trim(c)&&(a.callLaTex&&a.callLaTex(c),!a.callLaTex&&b&&b.getEditor().insertHtml(c))},upload:function(b,c,d){var e=this.showLoad();p.upload(c,function(f){e.close();var g=f&&f!==c;!g&&n.alert("出现错误，请重试"),g&&(f=m.addParam({tex:b},f),a.call&&a.call(f),d&&d())})}})}var h=a("nc"),i=a("cpn"),j=h.$,k=h.Base,l=h.Clazz,m=h.Uri,n=i.Popup,o=i.PopupFormula,p=a("../../../../util/uploadRemote"),q=c.exports=l.create();k.extend(q.prototype,{initialize:d,initMath:e,math:f,_formula:g})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/imageBar",["nc"],function(a,b,c){function d(a){var b=a.getEl(),c=f(['<div class="js-editor-img-bar editor-img-bar" style="display:none;width:60px;">','<a href="javascript:void(0);" title="放大" class="icon-zoom-in"></a>','<a href="javascript:void(0);" title="缩小" class="icon-zoom-out"></a>',"</div>"].join(""));f(document.body).append(c),a.listen("destroy",function(){c.remove()});var d,e=a.getEditorDoc();f(e).on("keydown",function(){window.clearTimeout(d),c.unbind("click").hide()}),f(e).on("click",function(a){window.clearTimeout(d),c.unbind("click").hide();var g=a.target,h=f(g).attr("src")||"";"img"!==(g.tagName||"").toLowerCase()||j.getParam("tex",h)||(d=window.setTimeout(function(){var a=g.width,d=g.height;if(a&&d){var h=i.getPosTop(g,e.body),j=i.getPosLeft(g,e.body),k=i.getPosTop(b),l=i.getPosLeft(b);c.css("top",k+h+40).css("left",l+j+1).show();var m=null;c.on("click","a.icon-zoom-in",function(){var a=f(g).width();f(g).removeAttr("width height").height("auto"),m=m||f(g).width("auto").width();var b=(Math.round(10*a/m)+1)/10;f(g).width(b>5?a:m*b)}),c.on("click","a.icon-zoom-out",function(){var a=f(g).width();f(g).removeAttr("width height").height("auto"),m=m||f(g).width("auto").width();var b=(Math.round(10*a/m)-1)/10;f(g).width(.1>b?a:m*b)})}},25))}),f(document.body).on("click",function(a){var b=a.target;b===c.get(0)||f.contains(c.get(0),b)||(window.clearTimeout(d),c.unbind("click").hide())})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=e.Dom,j=e.Uri,k=c.exports=h.create();g.extend(k.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/md",["nc","cpn"],function(a,b,c){function d(a){var b=this;b.editor=a;var c=a.rawConfig;if(c.needChangeEditor){var d=h('<a class="ico-to-html js-2-md">使用MD编辑器</a>');a.getToolbarEl().prepend(d),d.on("click",function(){b.changeEditor()})}}function e(){function b(a){var b=new a({renderTo:f,renderBy:"after",isAdmin:e.isAdmin,content:a.html2md(g),needChangeEditor:!0,needAt:!!e.needAt,afterChangeEditor:e.afterChangeEditor,width:e.width,height:e.height,draftChange:e.draftChange,disabled:e.disabled,clickMask:e.clickMask,noToolbarFixed:e.noToolbarFixed,toolbarFixedTop:e.toolbarFixedTop,noAutoHeight:e.noAutoHeight,render:function(){d.destroy()}});e.afterChangeEditor&&e.afterChangeEditor.call(d,b),d.fire("changeEditor",b),f.hide()}var c=this,d=c.editor,e=d.rawConfig,f=d.getEl(),g=d.val();return d.isEmpty()?void a.async("../../mdEditor",function(a){b(a)}):void a.async("../../mdEditor",function(a){var c=k.confirm('切换到 MarkDown 编辑器可能会丢失部分内容格式，确认切换？<a class="link-green" href="javascript:void(0);">预览转换后的效果</a>',function(){b(a)});c&&c.getEl().find("a.link-green").on("click",function(){var b=a.html2md(g),c=a.md2html(b),d=window.open(),e=d.document;e.open("text/html","replace");var f=["html{margin:0;padding:0}","body{margin:0;padding:5px;}","body, td {font-size:14px;line-height:20px;}","body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",'body{background-color:transparent;font-family:arial,STHeiti,"Microsoft YaHei";line-height:1.8}',"table{width:100%;}","p{line-height:1.8}","h1,h2,h3,h4,h5,h6{margin:10px 0}","img{max-width:100%}",'blockquote{position:relative;color: #999;font-weight:300;font-family:Avenir, "Helvetica Neue", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", sans-serif;border-left:2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;}',"pre{font-size: 14px;position: relative;border-left: 2px solid #1abc9c;padding: 10px 0 10px 10px;margin: .8em 0;background: #fefefe;word-break:break-all;}","a{color:#25bb9b;text-decoration:none;}"].join("");e.write("<html><head><title>预览</title><style>"+f+"</style></head><body>"+c+"</body></html>"),e.close()})})}var f=a("nc"),g=a("cpn"),h=f.$,i=f.Base,j=f.Clazz,k=g.Popup,l=c.exports=j.create();i.extend(l.prototype,{initialize:d,changeEditor:e})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/monitContent",["nc"],function(a,b,c){function d(a){function b(){a.waitCreated(function(){try{var b=(new Date).getTime();if(c){if(b-c>i){var g=d||"",h=f.trim(a.val());c=b,d=h,h!==g&&(a.fire("draftChange"),e.draftChange&&e.draftChange.call(a,h))}}else c=b}catch(j){}})}var c,d,e=a.rawConfig;if(e.draftChange){var g=window.setInterval(b,2*i);a.listen("destroy",function(){window.clearInterval(g)})}a.listen("afterChange",b)}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=800,j=c.exports=h.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/placeholder",["nc"],function(a,b,c){function d(a){var b,c,d,e=a.rawConfig,g=f(a.getEditorDoc()),h=g.get(0).body;g.on("mousedown",d=function(){b&&(a.removePlaceHolder(),b=!0),g.unbind("mousedown",d)}),e.placeholder&&a.isEmpty()&&(h.innerHTML='<div id="kePlaceholder" style="color:#ddd;">'+e.placeholder+"</div>",b=!0),a.listen("afterBlur",function(){e.placeholder&&""===a.val()&&(h.innerHTML='<div id="kePlaceholder" style="color:#ddd;">'+e.placeholder+"</div>",b=!0)}),a.listen("afterFocus",function(){a.removePlaceHolder(),c||(c=window.setTimeout(function(){a.removePlaceHolder(),c=null},0))})}var e=a("nc"),f=e.$,g=e.Base,h=e.Clazz,i=c.exports=h.create();g.extend(i.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/toolbar",["nc","cpn","../../../select"],function(a,b,c){function d(a){var b=this;b.editor=a,b.initFullScreen(),b.initTips(),b.initFix(),b.initCodeSelect()}function e(){var a=this,b=a.editor,c=b.rawConfig;if(c.fullScreen){var d=k('<a href="javaScript:void(0);" class="full-ico"></a>');b.getToolbarEl().append(d),d.on("click",c.fullScreen)}}function f(){var a=this,b=a.editor,c=(b.rawConfig,b.getToolbarEl()),d=c.find("span.ke-outline");p.titleEl(d,{verReverse:!0},function(a){b.pushChild(a)})}function g(){function a(){(0===p&&q||p>0)&&(q&&window.setTimeout(b,1200),!q&&b(),q=!1)}function b(){m(function(){p++;var a=j.outerHeight(),b=h.scrollTop(),c=n.getPosTop(j);b+i>c&&c+a>b+i+g?(f||(f=l.width()||0),l.css("width",f),j.addClass("fixed-eidt-header"),l.css("top",i)):(j.removeClass("fixed-eidt-header"),l.css("top",null),l.css("width","auto"))})}var c=this,d=c.editor,e=d.rawConfig;if(!e.noToolbarFixed){var f,g,h=k(window),i=+e.toolbarFixedTop||0,j=d.getEditorEl(),l=d.getToolbarEl(),m=o.frequency(10),p=0,q=!0;g=l.outerHeight(),h.on("scroll",a),d.listen("destroy",function(){h.unbind("scroll",a)})}}function h(){function a(a){var b=c.getToolbarEl(),d=new q({renderTo:b,renderBy:"prepend",size:"small",text:"代码语言",options:[{text:"ASP/VB",value:"vb"},{text:"C/C++",value:"cpp"},{text:"CSS",value:"css"},{text:"C#",value:"cs"},{text:"HTML",value:"html"},{text:"Java",value:"java"},{text:"JavaScript",value:"js"},{text:"Perl",value:"pl"},{text:"PHP",value:"php"},{text:"Python",value:"py"},{text:"Ruby",value:"rb"},{text:"Shell",value:"bsh"},{text:"XML",value:"xml"},{text:"其他",value:""}],change:function(){var b=this.val();c.removePlaceHolder(),a.select();var d=a.cmd.commonNode({pre:"*"});if(!d&&(a.exec("formatblock","<pre>"),d=a.cmd.commonNode({pre:"*"}))){try{a.cmd.range.selectNodeContents(d),a.cmd.removeformat()}catch(e){}d.addClass("prettyprint"),d.next()||d.after("<br />")}k(d).removeClass().addClass("prettyprint "+(b?"lang-"+b:"")),a.select(),c.fire("afterChange")}});return d}var b=this,c=b.editor,d=c.rawConfig;if(!d.noCodeSelect){var e=c.keEditor,f=a(e);c.listen("afterChange",function(){var a=e.edit.cmd.range,b=c.isInTagNode(a.startContainer,"pre")||c.isInTagNode(a.endContainer,"pre");if(b){var d=e.cmd.commonNode({pre:"*"});if(d){var g=d.attr("class")||"",h=/lang-(.*)/.exec(g),i=h?h[1]||"":"";f.val(i)}}else f.clear()})}}var i=a("nc"),j=a("cpn"),k=i.$,l=i.Base,m=i.Clazz,n=i.Dom,o=i.Time,p=j.Tips,q=a("../../../select"),r=c.exports=m.create();l.extend(r.prototype,{initialize:d,initFullScreen:e,initTips:f,initFix:g,initCodeSelect:h})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/uploadPaste",["nc","cpn"],function(a,b,c){function d(a){function b(){return j||(j=f.PopupUploadTips.show({}),j.popup.listen("close",function(){j=null})),j}var c=a.rawConfig;if(!c.noPasteUpload){var d=a.getEditor(),h=a.getEditorDoc();i.bindPaste(h,h.body,function(a,c){var f=g.find(a,function(a){return"file"===a.kind&&/image/.test(a.type||"")}),h=f?f.getAsFile():null;if(h){c&&c.preventDefault&&c.preventDefault();var i=new e.Upload({url:"/uploadImage?type=1",progress:function(a){var c=b();c.showProgress("正在上传："+a+"%",a)},error:function(){var a=b();a.showError("上传失败")},call:function(a){var c=b();c.close(),d.exec("insertimage",a.url)}});i.uploadBlob(h,(new Date).getTime()+"."+(h.type||"").split("/").pop())}});var j}}var e=a("nc"),f=a("cpn"),g=(e.$,e.Base),h=e.Clazz,i=e.Dom,j=c.exports=h.create();g.extend(j.prototype,{initialize:d})});
define("nowcoder/1.2.1082/javascripts/component/editorSub/hEditor/plugin/uploadRemote",["nc","cpn","../../../../util/uploadRemote"],function(a,b,c){function d(a){function b(){if(!e){var b=a.getEditorDoc(),d=g(b.body).find("img"),f=d.length;if(0!==f){var i=h.map(d,function(a){return g.trim(g(a).attr("src"))});if(k.canUpload(i)){var j=c();e=!0;var l=0;h.forEach(d,function(a){a=g(a);var b=g.trim(a.attr("src"));k.upload(b,function(c){c&&c!==b&&(a.attr("src",c),a.attr("data-ke-src",c)),l++,l>=f&&(e=!1,j.close())})})}}}}function c(){return new j({hasNoTitle:!0,hasNoFooter:!0,noUnique:!0,content:'<div style="font-size:14px;text-align:center;">图片上传中...</div>'})}var d=a.rawConfig;if(!d.noUploadRemote){var e=!1;a.listen("draftChange",b),b()}}var e=a("nc"),f=a("cpn"),g=e.$,h=e.Base,i=e.Clazz,j=f.Popup,k=a("../../../../util/uploadRemote"),l=c.exports=i.create();h.extend(l.prototype,{initialize:d})});